{"remainingRequest":"/ai/didi01/zhanglingyu/om3-extend/om3-client/node_modules/babel-loader/lib/index.js!/ai/didi01/zhanglingyu/om3-extend/om3-client/node_modules/ts-loader/index.js??ref--15-2!/ai/didi01/zhanglingyu/om3-extend/om3-client/node_modules/eslint-loader/index.js??ref--14-0!/ai/didi01/zhanglingyu/om3-extend/om3-client/src/model/non-uniform-col-obj.ts","dependencies":[{"path":"/ai/didi01/zhanglingyu/om3-extend/om3-client/src/model/non-uniform-col-obj.ts","mtime":1732546288000},{"path":"/ai/didi01/zhanglingyu/om3-extend/om3-client/babel.config.js","mtime":1732546288000},{"path":"/ai/didi01/zhanglingyu/om3-extend/om3-client/node_modules/cache-loader/dist/cjs.js","mtime":1732627998000},{"path":"/ai/didi01/zhanglingyu/om3-extend/om3-client/node_modules/babel-loader/lib/index.js","mtime":1732627998000},{"path":"/ai/didi01/zhanglingyu/om3-extend/om3-client/node_modules/ts-loader/index.js","mtime":1732627997000},{"path":"/ai/didi01/zhanglingyu/om3-extend/om3-client/node_modules/eslint-loader/index.js","mtime":1732627997000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0IHsgZ2V0SW5kZXhUaW1lIH0gZnJvbSAiQC9oZWxwZXIvZm9ybWF0LWRhdGEiOwppbXBvcnQgc3RvcmUgZnJvbSAiQC9zdG9yZSI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmFzeW5jIGZ1bmN0aW9uIGdldCh1cmwpIHsKICB1cmwgPSAncG9zdGdyZXMnICsgdXJsOwogIC8vY29uc3QgbG9hZGluZyA9IG9wZW5Mb2FkaW5nKCk7CiAgY29uc3QgewogICAgZGF0YQogIH0gPSBhd2FpdCBheGlvcy5nZXQodXJsKTsKICAvL2xvYWRpbmcuY2xvc2UoKTsKICByZXR1cm4gZGF0YTsKfQpleHBvcnQgZGVmYXVsdCBjbGFzcyBOb1VuaWZvcm1Db2xPYmogewogIGNvbnN0cnVjdG9yKGNvbCwgdFN0YXJ0LCB0RW5kLCBsZXZlbCwgd2lkdGgsIGdsb2JhbERhdGFMZW4sIG1heExldmVsLCBkYXRhTmFtZSkgewogICAgdGhpcy5pc01pcyA9IGZhbHNlOwogICAgdGhpcy5zdGFydFYgPSB1bmRlZmluZWQ7CiAgICB0aGlzLmVuZFYgPSB1bmRlZmluZWQ7CiAgICB0aGlzLmF2ZXJhZ2UgPSAwOwogICAgdGhpcy5jdXJyZW50U3VtID0gMDsKICAgIHRoaXMuY3VycmVudFBvaW50TnVtID0gMDsKICAgIHRoaXMuY3VycmVudFJhbmdlID0gW107CiAgICB0aGlzLm9yZGluYWxMZXZlbENvdW50ID0gMDsKICAgIHRoaXMubWluVlRpbWVSYW5nZSA9IFswLCAwXTsKICAgIHRoaXMubWF4VlRpbWVSYW5nZSA9IFswLCAwXTsKICAgIHRoaXMudlJhbmdlID0gW0luZmluaXR5LCAtSW5maW5pdHldOwogICAgdGhpcy53aWR0aCA9IHdpZHRoOwogICAgdGhpcy5jb2wgPSBjb2w7CiAgICB0aGlzLnRTdGFydCA9IHRTdGFydDsKICAgIHRoaXMudEVuZCA9IHRFbmQ7CiAgICB0aGlzLnNlbWFudGljVFN0YXJ0ID0gdFN0YXJ0OwogICAgdGhpcy5zZW1hbnRpY1RFbmQgPSB0RW5kOwogICAgdGhpcy5sZXZlbCA9IGxldmVsOwogICAgdGhpcy5zdGFydEluZGV4ID0gMDsKICAgIHRoaXMuZW5kSW5kZXggPSAwOwogICAgdGhpcy5pbmRleCA9IDA7CiAgICB0aGlzLmdsb2JhbERhdGFMZW4gPSBnbG9iYWxEYXRhTGVuOwogICAgdGhpcy5tYXhMZXZlbCA9IG1heExldmVsOwogICAgdGhpcy5wb3NpdGlvbkluZm8gPSB7CiAgICAgIHN0YXJ0WDogMCwKICAgICAgZW5kWDogMCwKICAgICAgbWluWDogMCwKICAgICAgbWF4WDogMAogICAgfTsKICAgIHRoaXMuZGF0YU5hbWUgPSBkYXRhTmFtZTsKICAgIHRoaXMuc2hhcGVNaW5NYXggPSBbSW5maW5pdHksIC1JbmZpbml0eV07CiAgICB0aGlzLnNoYXBlTWluVCA9IFtdOwogICAgdGhpcy5zaGFwZU1heFQgPSBbXTsKICAgIHRoaXMubWluTm9kZXMgPSBbXTsKICAgIHRoaXMubWF4Tm9kZXMgPSBbXTsKICAgIHRoaXMucmVhbFN0YXJ0ID0gMDsKICAgIHRoaXMuc2VtZW50aWNJbnRlcnZhbCA9IDA7CiAgICB0aGlzLmFkZE1pbiA9IFstMSwgSW5maW5pdHldOwogICAgdGhpcy5hZGRNYXggPSBbLTEsIC1JbmZpbml0eV07CiAgICB0aGlzLnN1Yk1pbiA9IFstMSwgSW5maW5pdHldOwogICAgdGhpcy5zdWJNYXggPSBbLTEsIC1JbmZpbml0eV07CiAgICB0aGlzLm11bHRpTWluID0gWy0xLCBJbmZpbml0eV07CiAgICB0aGlzLm11bHRpTWF4ID0gWy0xLCAtSW5maW5pdHldOwogICAgdGhpcy5kaXZNaW4gPSBbLTEsIEluZmluaXR5XTsKICAgIHRoaXMuZGl2TWF4ID0gWy0xLCAtSW5maW5pdHldOwogICAgdGhpcy5tdWx0aUF2ZSA9IDA7CiAgfQogIHJlYnVpbGQoY29sLCB0U3RhcnQsIHRFbmQsIGxldmVsLCB3aWR0aCwgZ2xvYmFsRGF0YUxlbiwgbWF4TGV2ZWwsIGRhdGFOYW1lKSB7CiAgICB0aGlzLndpZHRoID0gd2lkdGg7CiAgICB0aGlzLmNvbCA9IGNvbDsKICAgIHRoaXMudFN0YXJ0ID0gdFN0YXJ0OwogICAgdGhpcy50RW5kID0gdEVuZDsKICAgIHRoaXMubGV2ZWwgPSBsZXZlbDsKICAgIHRoaXMuc3RhcnRJbmRleCA9IDA7CiAgICB0aGlzLmVuZEluZGV4ID0gMDsKICAgIHRoaXMuaW5kZXggPSAwOwogICAgdGhpcy5zdGFydFYgPSB1bmRlZmluZWQ7CiAgICB0aGlzLmVuZFYgPSB1bmRlZmluZWQ7CiAgICB0aGlzLmF2ZXJhZ2UgPSAwOwogICAgdGhpcy5jdXJyZW50U3VtID0gMDsKICAgIHRoaXMuY3VycmVudFBvaW50TnVtID0gMDsKICAgIHRoaXMuY3VycmVudFJhbmdlID0gW107CiAgICB0aGlzLm9yZGluYWxMZXZlbENvdW50ID0gMDsKICAgIHRoaXMudlJhbmdlWzBdID0gSW5maW5pdHk7CiAgICB0aGlzLnZSYW5nZVsxXSA9IC1JbmZpbml0eTsKICAgIHRoaXMuZ2xvYmFsRGF0YUxlbiA9IGdsb2JhbERhdGFMZW47CiAgICB0aGlzLm1heExldmVsID0gbWF4TGV2ZWw7CiAgICB0aGlzLnBvc2l0aW9uSW5mby5zdGFydFggPSAwOwogICAgdGhpcy5wb3NpdGlvbkluZm8uZW5kWCA9IDA7CiAgICB0aGlzLnBvc2l0aW9uSW5mby5taW5YID0gMDsKICAgIHRoaXMucG9zaXRpb25JbmZvLm1heFggPSAwOwogICAgdGhpcy5taW5WVGltZVJhbmdlWzBdID0gMDsKICAgIHRoaXMubWluVlRpbWVSYW5nZVsxXSA9IDA7CiAgICB0aGlzLm1heFZUaW1lUmFuZ2VbMF0gPSAwOwogICAgdGhpcy5tYXhWVGltZVJhbmdlWzFdID0gMDsKICAgIHRoaXMuZGF0YU5hbWUgPSBkYXRhTmFtZTsKICAgIHRoaXMuYWRkTWluID0gWy0xLCBJbmZpbml0eV07CiAgICB0aGlzLmFkZE1heCA9IFstMSwgLUluZmluaXR5XTsKICAgIHRoaXMuc3ViTWluID0gWy0xLCBJbmZpbml0eV07CiAgICB0aGlzLnN1Yk1heCA9IFstMSwgLUluZmluaXR5XTsKICAgIHRoaXMubXVsdGlNaW4gPSBbLTEsIEluZmluaXR5XTsKICAgIHRoaXMubXVsdGlNYXggPSBbLTEsIC1JbmZpbml0eV07CiAgICB0aGlzLmRpdk1pbiA9IFstMSwgSW5maW5pdHldOwogICAgdGhpcy5kaXZNYXggPSBbLTEsIC1JbmZpbml0eV07CiAgICB0aGlzLm11bHRpQXZlID0gMDsKICB9CiAgc2V0UmVhbFN0YXJ0QW5kSW50ZXJ2YWwoc3RhcnQsIGludGVydmFsKSB7CiAgICB0aGlzLnJlYWxTdGFydCA9IHN0YXJ0OwogICAgdGhpcy5zZW1lbnRpY0ludGVydmFsID0gaW50ZXJ2YWw7CiAgfQogIHNldFRTdGFydCh0KSB7CiAgICB0aGlzLnRTdGFydCA9IHQ7CiAgfQogIHNldFRFbmQodCkgewogICAgdGhpcy50RW5kID0gdDsKICB9CiAgc2V0U2VtYW50aWNUU3RhcnQodCkgewogICAgdGhpcy5zZW1hbnRpY1RTdGFydCA9IHQ7CiAgICB0aGlzLnRTdGFydCA9IE1hdGguZmxvb3IoKHRoaXMuc2VtYW50aWNUU3RhcnQgLSB0aGlzLnJlYWxTdGFydCkgLyB0aGlzLnNlbWVudGljSW50ZXJ2YWwpOwogIH0KICBzZXRTZW1hbnRpY1RFbmQodCkgewogICAgdGhpcy5zZW1hbnRpY1RFbmQgPSB0OwogICAgdGhpcy50RW5kID0gTWF0aC5mbG9vcigodGhpcy5zZW1hbnRpY1RFbmQgLSB0aGlzLnJlYWxTdGFydCkgLyB0aGlzLnNlbWVudGljSW50ZXJ2YWwpIC0gMTsKICB9CiAgZ2V0RW5kUmFuZ2UoKSB7CiAgICBjb25zdCBpbmRleCA9IE1hdGguZmxvb3IodGhpcy50RW5kIC8gMik7CiAgICBpZiAoaW5kZXggJSAyID09PSAwKSB7CiAgICAgIHJldHVybiBbaW5kZXgsIGluZGV4ICsgMV07CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gW2luZGV4IC0gMSwgaW5kZXhdOwogICAgfQogIH0KICBnZXRTdGFydFJhbmdlKCkgewogICAgY29uc3QgaW5kZXggPSBNYXRoLmZsb29yKHRoaXMudFN0YXJ0IC8gMik7CiAgICBpZiAoaW5kZXggJSAyID09PSAwKSB7CiAgICAgIHJldHVybiBbaW5kZXgsIGluZGV4ICsgMV07CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gW2luZGV4IC0gMSwgaW5kZXhdOwogICAgfQogIH0KICAvLyAxIOWujOWFqOWxnuS6juivpeWIlyAgMiDkuI7or6XliJfnm7jkuqQgICAzIOWkp+S6juivpeWIlyA0IOWujOWFqOWwj+S6juivpeWIlyA1IOS4jeWujOWFqOWwj+S6juivpeWIlwogIGlzQ29udGFpbihwKSB7CiAgICBjb25zdCBwTCA9IHAubGV2ZWw7CiAgICBjb25zdCBwVFJhbmdlID0gMiAqKiB0aGlzLm1heExldmVsIC8gMiAqKiBwTDsKICAgIGNvbnN0IHBUaW1lUyA9IHAuaW5kZXggKiBwVFJhbmdlOwogICAgY29uc3QgcFRpbWVFID0gcFRSYW5nZSArIHBUaW1lUyAtIDE7CiAgICBpZiAodGhpcy50U3RhcnQgPT09IHBUaW1lUykgewogICAgICB0aGlzLnN0YXJ0ViA9IHAueUFycmF5WzBdOwogICAgfQogICAgaWYgKHRoaXMudEVuZCA9PT0gcFRpbWVFKSB7CiAgICAgIHRoaXMuZW5kViA9IHAueUFycmF5WzNdOwogICAgfQogICAgaWYgKHBUaW1lRSA+PSB0aGlzLmdsb2JhbERhdGFMZW4pIHsKICAgICAgaWYgKHBUaW1lUyA8PSB0aGlzLnRFbmQpIHsKICAgICAgICBpZiAocC55QXJyYXlbMV0gPCB0aGlzLnZSYW5nZVswXSkgewogICAgICAgICAgdGhpcy52UmFuZ2VbMF0gPSBwLnlBcnJheVsxXTsKICAgICAgICAgIGNvbnN0IHRSYW5nZSA9IGdldEluZGV4VGltZShwLmxldmVsLCBwLmluZGV4LCB0aGlzLm1heExldmVsKTsKICAgICAgICAgIHRoaXMubWluVlRpbWVSYW5nZSA9IFt0UmFuZ2Uuc3RhcnRULCB0UmFuZ2UuZW5kVF07CiAgICAgICAgfQogICAgICAgIGlmIChwLnlBcnJheVsyXSA+IHRoaXMudlJhbmdlWzFdKSB7CiAgICAgICAgICB0aGlzLnZSYW5nZVsxXSA9IHAueUFycmF5WzJdOwogICAgICAgICAgY29uc3QgdFJhbmdlID0gZ2V0SW5kZXhUaW1lKHAubGV2ZWwsIHAuaW5kZXgsIHRoaXMubWF4TGV2ZWwpOwogICAgICAgICAgdGhpcy5tYXhWVGltZVJhbmdlID0gW3RSYW5nZS5zdGFydFQsIHRSYW5nZS5lbmRUXTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIDY7CiAgICB9CiAgICBpZiAocFRpbWVTID49IHRoaXMudFN0YXJ0ICYmIHBUaW1lRSA8PSB0aGlzLnRFbmQpIHsKICAgICAgaWYgKHAueUFycmF5WzFdIDwgdGhpcy52UmFuZ2VbMF0pIHsKICAgICAgICB0aGlzLnZSYW5nZVswXSA9IHAueUFycmF5WzFdOwogICAgICAgIGNvbnN0IHRSYW5nZSA9IGdldEluZGV4VGltZShwLmxldmVsLCBwLmluZGV4LCB0aGlzLm1heExldmVsKTsKICAgICAgICB0aGlzLm1pblZUaW1lUmFuZ2UgPSBbdFJhbmdlLnN0YXJ0VCwgdFJhbmdlLmVuZFRdOwogICAgICB9CiAgICAgIGlmIChwLnlBcnJheVsyXSA+IHRoaXMudlJhbmdlWzFdKSB7CiAgICAgICAgdGhpcy52UmFuZ2VbMV0gPSBwLnlBcnJheVsyXTsKICAgICAgICBjb25zdCB0UmFuZ2UgPSBnZXRJbmRleFRpbWUocC5sZXZlbCwgcC5pbmRleCwgdGhpcy5tYXhMZXZlbCk7CiAgICAgICAgdGhpcy5tYXhWVGltZVJhbmdlID0gW3RSYW5nZS5zdGFydFQsIHRSYW5nZS5lbmRUXTsKICAgICAgfQogICAgICByZXR1cm4gMTsKICAgIH0gZWxzZSBpZiAocFRpbWVTIDw9IHRoaXMudEVuZCAmJiBwVGltZUUgPiB0aGlzLnRFbmQpIHsKICAgICAgcmV0dXJuIDI7CiAgICB9IGVsc2UgaWYgKHBUaW1lUyA+IHRoaXMudEVuZCkgewogICAgICByZXR1cm4gMzsKICAgIH0gZWxzZSBpZiAocFRpbWVFIDwgdGhpcy50U3RhcnQpIHsKICAgICAgLy8gZGVidWdnZXIKICAgICAgcmV0dXJuIDQ7CiAgICB9IGVsc2UgaWYgKHBUaW1lRSA+PSB0aGlzLnRTdGFydCkgewogICAgICAvL2RlYnVnZ2VyCiAgICAgIHJldHVybiA1OwogICAgfSBlbHNlIHsKICAgICAgY29uc29sZS5sb2cocCwgdGhpcyk7CiAgICAgIHRocm93IG5ldyBFcnJvcigidGltZSBvdXQgb2YgcmFuZ2UiKTsKICAgIH0KICB9CiAgaXNNaXNzQ29udGFpbihwKSB7CiAgICBjb25zdCBwTCA9IHAubGV2ZWw7CiAgICBjb25zdCBwVFJhbmdlID0gMiAqKiB0aGlzLm1heExldmVsIC8gMiAqKiBwTDsKICAgIGNvbnN0IHBUaW1lUyA9IHAuaW5kZXggKiBwVFJhbmdlOwogICAgY29uc3QgcFRpbWVFID0gcFRSYW5nZSArIHBUaW1lUyAtIDE7CiAgICBpZiAocFRpbWVFID49IHRoaXMuZ2xvYmFsRGF0YUxlbikgewogICAgICByZXR1cm4gNjsKICAgIH0KICAgIGlmIChwVGltZVMgPj0gdGhpcy50U3RhcnQgJiYgcFRpbWVFIDw9IHRoaXMudEVuZCkgewogICAgICBpZiAocFRpbWVTID09IHRoaXMudFN0YXJ0ICYmIHBUaW1lRSA9PSB0aGlzLnRFbmQpIHsKICAgICAgICByZXR1cm4gNzsKICAgICAgfSBlbHNlIGlmIChwVGltZVMgPT09IHRoaXMudFN0YXJ0KSB7CiAgICAgICAgcmV0dXJuIDg7CiAgICAgIH0gZWxzZSBpZiAocFRpbWVFID09PSB0aGlzLnRFbmQpIHsKICAgICAgICByZXR1cm4gOTsKICAgICAgfSBlbHNlIGlmIChwLmdhcEZsYWcgIT09ICdOTycpIHsKICAgICAgICByZXR1cm4gMTA7CiAgICAgIH0KICAgICAgLy9jb25zb2xlLmxvZyhwVGltZVMscFRpbWVFLHRoaXMudFN0YXJ0LHRoaXMudEVuZCkKICAgICAgcmV0dXJuIDE7CiAgICB9IGVsc2UgaWYgKHBUaW1lUyA8PSB0aGlzLnRFbmQgJiYgcFRpbWVFID4gdGhpcy50RW5kKSB7CiAgICAgIHJldHVybiAyOwogICAgfSBlbHNlIGlmIChwVGltZVMgPiB0aGlzLnRFbmQpIHsKICAgICAgcmV0dXJuIDM7CiAgICB9IGVsc2UgaWYgKHBUaW1lRSA8IHRoaXMudFN0YXJ0KSB7CiAgICAgIHJldHVybiA0OwogICAgfSBlbHNlIGlmIChwVGltZUUgPj0gdGhpcy50U3RhcnQpIHsKICAgICAgcmV0dXJuIDU7CiAgICB9IGVsc2UgewogICAgICBjb25zb2xlLmxvZyhwLCB0aGlzKTsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJ0aW1lIG91dCBvZiByYW5nZSIpOwogICAgfQogIH0KICBjb250YWluQ29sdW1uUmFuZ2UocCwgdHlwZSkgewogICAgaWYgKHAubm9kZVR5cGUgPT09ICJOVUxMIikgewogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAocC55QXJyYXlbMV0gPT09IHVuZGVmaW5lZCB8fCBwLnlBcnJheVsyXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGRlYnVnZ2VyOwogICAgICB0aHJvdyBuZXcgRXJyb3IoImVycm9yIHZhbCIpOwogICAgfQogICAgY29uc3QgcEwgPSBwLmxldmVsOwogICAgY29uc3QgcFRSYW5nZSA9IDIgKiogdGhpcy5tYXhMZXZlbCAvIDIgKiogcEw7CiAgICBjb25zdCBwVGltZVMgPSBwLmluZGV4ICogcFRSYW5nZTsKICAgIGNvbnN0IHBUaW1lRSA9IHBUUmFuZ2UgKyBwVGltZVMgLSAxOwogICAgaWYgKHRoaXMudFN0YXJ0ID09PSBwVGltZVMpIHsKICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKCJjYW5ub3QgdXNlIHRoaXMgdmFsIikKICAgICAgLy8gdGhpcy5zdGFydFYgPSBwLnlBcnJheVswXTsKICAgIH0KICAgIGlmICh0aGlzLnRFbmQgPT09IHBUaW1lRSkgewogICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoImNhbm5vdCB1c2UgdGhpcyB2YWwiKQogICAgICAvLyB0aGlzLmVuZFYgPSAwOy8vcC55QXJyYXlbM107CiAgICB9CiAgICBpZiAodHlwZSA9PT0gNikgewogICAgICAvLyBjb25zb2xlLmxvZyhwVGltZUUpCiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZ2xvYmFsRGF0YUxlbikKICAgICAgLy8gY29uc29sZS5lcnJvcigidHlwZSA2Iik7CiAgICAgIC8vdGhyb3cgbmV3IEVycm9yKCJ0eXBlIDgiKQogICAgfQogICAgaWYgKHR5cGUgPT09IDEgfHwgdHlwZSA9PT0gNyB8fCB0eXBlID09PSA4IHx8IHR5cGUgPT09IDkpIHsKICAgICAgaWYgKHAueUFycmF5WzFdIDwgdGhpcy52UmFuZ2VbMF0pIHsKICAgICAgICB0aGlzLnZSYW5nZVswXSA9IHAueUFycmF5WzFdOwogICAgICAgIGNvbnN0IHRSYW5nZSA9IGdldEluZGV4VGltZShwLmxldmVsLCBwLmluZGV4LCB0aGlzLm1heExldmVsKTsKICAgICAgICB0aGlzLm1pblZUaW1lUmFuZ2UgPSBbdFJhbmdlLnN0YXJ0VCwgdFJhbmdlLmVuZFRdOwogICAgICB9CiAgICAgIGlmIChwLnlBcnJheVsyXSA+IHRoaXMudlJhbmdlWzFdKSB7CiAgICAgICAgdGhpcy52UmFuZ2VbMV0gPSBwLnlBcnJheVsyXTsKICAgICAgICBjb25zdCB0UmFuZ2UgPSBnZXRJbmRleFRpbWUocC5sZXZlbCwgcC5pbmRleCwgdGhpcy5tYXhMZXZlbCk7CiAgICAgICAgdGhpcy5tYXhWVGltZVJhbmdlID0gW3RSYW5nZS5zdGFydFQsIHRSYW5nZS5lbmRUXTsKICAgICAgfQogICAgICBpZiAodGhpcy5vcmRpbmFsTGV2ZWxDb3VudCA9PT0gMCkgewogICAgICAgIHRoaXMuYXZlcmFnZSA9IHAueUFycmF5WzNdOwogICAgICAgIHRoaXMuY3VycmVudFN1bSArPSBwLnlBcnJheVszXSAqIHBUUmFuZ2U7CiAgICAgICAgdGhpcy5jdXJyZW50UG9pbnROdW0gKz0gcFRSYW5nZTsKICAgICAgICB0aGlzLmN1cnJlbnRSYW5nZS5wdXNoKFtwVGltZVMsIHBUaW1lRV0pOwogICAgICAgIHRoaXMub3JkaW5hbExldmVsQ291bnQrKzsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBsZXQgbGV2ZWxEaWYgPSAyICoqIHRoaXMub3JkaW5hbExldmVsQ291bnQ7CiAgICAgICAgLy8gLy8gbGV0IG5ld0F2ZXJhZ2UgPSAodGhpcy5hdmVyYWdlICsgKDEgLyBsZXZlbERpZikgKiBwLnlBcnJheVszXSkgLyAoMSArICgxIC8gbGV2ZWxEaWYpKTsKICAgICAgICAvLyBsZXQgbmV3QXZlcmFnZSA9ICh0aGlzLmF2ZXJhZ2UgKiAobGV2ZWxEaWYgLSAxKSAqIDIgKyBwLnlBcnJheVszXSkgLyAobGV2ZWxEaWYgKiAyIC0gMSk7CiAgICAgICAgLy8gdGhpcy5hdmVyYWdlID0gbmV3QXZlcmFnZTsKICAgICAgICB0aGlzLmN1cnJlbnRTdW0gKz0gcC55QXJyYXlbM10gKiBwVFJhbmdlOwogICAgICAgIHRoaXMuY3VycmVudFBvaW50TnVtICs9IHBUUmFuZ2U7CiAgICAgICAgdGhpcy5hdmVyYWdlID0gdGhpcy5jdXJyZW50U3VtIC8gdGhpcy5jdXJyZW50UG9pbnROdW07CiAgICAgICAgdGhpcy5jdXJyZW50UmFuZ2UucHVzaChbcFRpbWVTLCBwVGltZUVdKTsKICAgICAgICB0aGlzLm9yZGluYWxMZXZlbENvdW50Kys7CiAgICAgIH0KICAgICAgLy8gaWYgKHAucGFyZW50ICYmIHAucGFyZW50Lm5vZGVUeXBlID09PSAnTEVGVE5VTEwnKSB7CiAgICAgIC8vICAgICB0aGlzLnN0YXJ0ViA9IHAueUFycmF5WzBdOwogICAgICAvLyB9CiAgICAgIC8vIGlmIChwLnBhcmVudCAmJiBwLnBhcmVudC5ub2RlVHlwZSA9PT0gJ1JJR0hUTlVMTCcpIHsKICAgICAgLy8gICAgIGlmICh0aGlzLmVuZFYhID4gcC55QXJyYXlbM10pIHsKICAgICAgLy8gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoImRkZGRkZGRkZGRkZCIpCiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICB0aGlzLmVuZFYgPSBwLnlBcnJheVszXTsKICAgICAgLy8gfQogICAgfQogICAgcmV0dXJuOwogIH0KICBjb250YWluQ29sdW1uUmFuZ2UyKHAsIHAyLCB0eXBlLCB0cmFuc2Zvcm1fc3ltYm9sKSB7CiAgICBpZiAocC5ub2RlVHlwZSA9PT0gIk5VTEwiKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmIChwLnlBcnJheVsxXSA9PT0gdW5kZWZpbmVkIHx8IHAueUFycmF5WzJdID09PSB1bmRlZmluZWQpIHsKICAgICAgZGVidWdnZXI7CiAgICAgIHRocm93IG5ldyBFcnJvcigiZXJyb3IgdmFsIik7CiAgICB9CiAgICBjb25zdCBwTCA9IHAubGV2ZWw7CiAgICBjb25zdCBwVFJhbmdlID0gMiAqKiB0aGlzLm1heExldmVsIC8gMiAqKiBwTDsKICAgIGNvbnN0IHBUaW1lUyA9IHAuaW5kZXggKiBwVFJhbmdlOwogICAgY29uc3QgcFRpbWVFID0gcFRSYW5nZSArIHBUaW1lUyAtIDE7CiAgICBpZiAodGhpcy50U3RhcnQgPT09IHBUaW1lUykgewogICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoImNhbm5vdCB1c2UgdGhpcyB2YWwiKQogICAgICAvLyB0aGlzLnN0YXJ0ViA9IHAueUFycmF5WzBdOwogICAgfQogICAgaWYgKHRoaXMudEVuZCA9PT0gcFRpbWVFKSB7CiAgICAgIC8vIHRocm93IG5ldyBFcnJvcigiY2Fubm90IHVzZSB0aGlzIHZhbCIpCiAgICAgIC8vIHRoaXMuZW5kViA9IDA7Ly9wLnlBcnJheVszXTsKICAgIH0KICAgIGlmICh0eXBlID09PSA2KSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKHBUaW1lRSkKICAgICAgLy8gY29uc29sZS5sb2codGhpcy5nbG9iYWxEYXRhTGVuKQogICAgICAvLyBjb25zb2xlLmVycm9yKCJ0eXBlIDYiKTsKICAgICAgLy90aHJvdyBuZXcgRXJyb3IoInR5cGUgOCIpCiAgICB9CiAgICBpZiAodHlwZSA9PT0gMSB8fCB0eXBlID09PSA3IHx8IHR5cGUgPT09IDggfHwgdHlwZSA9PT0gOSkgewogICAgICBpZiAocC55QXJyYXlbMV0gPCB0aGlzLnZSYW5nZVswXSkgewogICAgICAgIHRoaXMudlJhbmdlWzBdID0gcC55QXJyYXlbMV07CiAgICAgICAgY29uc3QgdFJhbmdlID0gZ2V0SW5kZXhUaW1lKHAubGV2ZWwsIHAuaW5kZXgsIHRoaXMubWF4TGV2ZWwpOwogICAgICAgIHRoaXMubWluVlRpbWVSYW5nZSA9IFt0UmFuZ2Uuc3RhcnRULCB0UmFuZ2UuZW5kVF07CiAgICAgIH0KICAgICAgaWYgKHAueUFycmF5WzJdID4gdGhpcy52UmFuZ2VbMV0pIHsKICAgICAgICB0aGlzLnZSYW5nZVsxXSA9IHAueUFycmF5WzJdOwogICAgICAgIGNvbnN0IHRSYW5nZSA9IGdldEluZGV4VGltZShwLmxldmVsLCBwLmluZGV4LCB0aGlzLm1heExldmVsKTsKICAgICAgICB0aGlzLm1heFZUaW1lUmFuZ2UgPSBbdFJhbmdlLnN0YXJ0VCwgdFJhbmdlLmVuZFRdOwogICAgICB9CiAgICAgIGlmICh0aGlzLm9yZGluYWxMZXZlbENvdW50ID09PSAwKSB7CiAgICAgICAgdGhpcy5hdmVyYWdlID0gcC55QXJyYXlbM107CiAgICAgICAgdGhpcy5jdXJyZW50U3VtICs9IHAueUFycmF5WzNdICogcFRSYW5nZTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAvLyBpZih0cmFuc2Zvcm1fc3ltYm9sID09PSAnKycpewogICAgICAgICAgdGhpcy5hdmVyYWdlICs9IHAyW2ldLnlBcnJheVszXTsKICAgICAgICAgIHRoaXMuY3VycmVudFN1bSArPSBwMltpXS55QXJyYXlbM10gKiBwVFJhbmdlOwogICAgICAgICAgLy8gfQogICAgICAgICAgLy8gZWxzZSBpZih0cmFuc2Zvcm1fc3ltYm9sID09PSAnLScpewogICAgICAgICAgLy8gICAgIHRoaXMuYXZlcmFnZSAtPSBwMltpXS55QXJyYXlbM107CiAgICAgICAgICAvLyAgICAgdGhpcy5jdXJyZW50U3VtIC09IHAyW2ldLnlBcnJheVszXSAqIHBUUmFuZ2U7CiAgICAgICAgICAvLyB9CiAgICAgICAgfQogICAgICAgIHRoaXMuY3VycmVudFBvaW50TnVtICs9IHBUUmFuZ2U7CiAgICAgICAgdGhpcy5jdXJyZW50UmFuZ2UucHVzaChbcFRpbWVTLCBwVGltZUVdKTsKICAgICAgICB0aGlzLm9yZGluYWxMZXZlbENvdW50Kys7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gbGV0IGxldmVsRGlmID0gMiAqKiB0aGlzLm9yZGluYWxMZXZlbENvdW50OwogICAgICAgIC8vIC8vIGxldCBuZXdBdmVyYWdlID0gKHRoaXMuYXZlcmFnZSArICgxIC8gbGV2ZWxEaWYpICogcC55QXJyYXlbM10pIC8gKDEgKyAoMSAvIGxldmVsRGlmKSk7CiAgICAgICAgLy8gbGV0IG5ld0F2ZXJhZ2UgPSAodGhpcy5hdmVyYWdlICogKGxldmVsRGlmIC0gMSkgKiAyICsgcC55QXJyYXlbM10pIC8gKGxldmVsRGlmICogMiAtIDEpOwogICAgICAgIC8vIHRoaXMuYXZlcmFnZSA9IG5ld0F2ZXJhZ2U7CiAgICAgICAgdGhpcy5jdXJyZW50U3VtICs9IHAueUFycmF5WzNdICogcFRSYW5nZTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAvLyBpZih0cmFuc2Zvcm1fc3ltYm9sID09PSAnKycpCiAgICAgICAgICB0aGlzLmN1cnJlbnRTdW0gKz0gcDJbaV0ueUFycmF5WzNdICogcFRSYW5nZTsKICAgICAgICAgIC8vIGVsc2UgaWYodHJhbnNmb3JtX3N5bWJvbCA9PT0gJy0nKQogICAgICAgICAgLy8gICAgIHRoaXMuY3VycmVudFN1bSAtPSBwMltpXS55QXJyYXlbM10gKiBwVFJhbmdlOwogICAgICAgIH0KICAgICAgICB0aGlzLmN1cnJlbnRQb2ludE51bSArPSBwVFJhbmdlOwogICAgICAgIHRoaXMuYXZlcmFnZSA9IHRoaXMuY3VycmVudFN1bSAvIHRoaXMuY3VycmVudFBvaW50TnVtOwogICAgICAgIHRoaXMuY3VycmVudFJhbmdlLnB1c2goW3BUaW1lUywgcFRpbWVFXSk7CiAgICAgICAgdGhpcy5vcmRpbmFsTGV2ZWxDb3VudCsrOwogICAgICB9CiAgICAgIC8vIGlmIChwLnBhcmVudCAmJiBwLnBhcmVudC5ub2RlVHlwZSA9PT0gJ0xFRlROVUxMJykgewogICAgICAvLyAgICAgdGhpcy5zdGFydFYgPSBwLnlBcnJheVswXTsKICAgICAgLy8gfQogICAgICAvLyBpZiAocC5wYXJlbnQgJiYgcC5wYXJlbnQubm9kZVR5cGUgPT09ICdSSUdIVE5VTEwnKSB7CiAgICAgIC8vICAgICBpZiAodGhpcy5lbmRWISA+IHAueUFycmF5WzNdKSB7CiAgICAgIC8vICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJkZGRkZGRkZGRkZGQiKQogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgdGhpcy5lbmRWID0gcC55QXJyYXlbM107CiAgICAgIC8vIH0KICAgIH0KICAgIHJldHVybjsKICB9CiAgLy8gYXN5bmMgY29tcHV0ZVRyYW5zZm9ybShwOiBUcmVuZFRyZWUsIHAyOkFycmF5PFRyZW5kVHJlZT4sIGRhdGFOYW1lOiBhbnksIGRhdGFOYW1lczogYW55LCBsZXZlbERhdGFNYW5hZ2VyOiBhbnksIG90aGVyRGF0YU1hbmFnZXI6IGFueSwgdHlwZTogbnVtYmVyLCBjdXJyZW50RmxhZ0luZm86IGFueSwgY3VycmVudEZsYWdJbmZvMjogYW55LCB0cmFuc2Zvcm1fc3ltYm9sOiBhbnkpIHsKICBhc3luYyBjb21wdXRlVHJhbnNmb3JtKHAsIHAyLCB0eXBlLCBjdXJyZW50RmxhZ0luZm8sIGN1cnJlbnRGbGFnSW5mbzIsIHRyYW5zZm9ybV9zeW1ib2wsIGNvdW50KSB7CiAgICAvLyBsZXQgcCA9IHBwLCBwMiA9IHBwMjsKICAgIGNvbnN0IHBwID0gcCwKICAgICAgcHAyID0gcDIuc2xpY2UoKTsKICAgIGlmIChwLm5vZGVUeXBlID09PSAiTlVMTCIpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKHAueUFycmF5WzFdID09PSB1bmRlZmluZWQgfHwgcC55QXJyYXlbMl0gPT09IHVuZGVmaW5lZCkgewogICAgICBkZWJ1Z2dlcjsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJlcnJvciB2YWwiKTsKICAgIH0KICAgIC8vIGNvbnN0IHBMID0gcC5sZXZlbDsKICAgIC8vIGNvbnN0IHBUUmFuZ2UgPSAoMiAqKiB0aGlzLm1heExldmVsKSAvICgyICoqIHBMKTsKICAgIC8vIGNvbnN0IHBUaW1lUyA9IHAuaW5kZXggKiBwVFJhbmdlOwogICAgLy8gY29uc3QgcFRpbWVFID0gcFRSYW5nZSArIHBUaW1lUyAtIDE7CiAgICAvLyBjb25zb2xlLmxvZygidHJhbnNmb3JtX3N5bWJvbDoiLHRyYW5zZm9ybV9zeW1ib2wpOwogICAgbGV0IHN5bWJvbCA9IHRyYW5zZm9ybV9zeW1ib2w7CiAgICBpZiAoKHR5cGUgPT09IDEgfHwgdHlwZSA9PT0gNyB8fCB0eXBlID09PSA4IHx8IHR5cGUgPT09IDkpICYmIChzeW1ib2wgPT09ICcrJyB8fCBzeW1ib2wgPT09ICdhdmcnKSkgewogICAgICAvLyBsZXQgcCA9IHBwLCBwMiA9IHBwMjsKICAgICAgbGV0IG1pbjEgPSBwLnlBcnJheVsxXTsKICAgICAgbGV0IG1pbjIgPSAwOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbWluMiArPSBwMltpXS55QXJyYXlbMV07CiAgICAgIH0KICAgICAgbGV0IG1heDEgPSBwLnlBcnJheVsyXTsKICAgICAgbGV0IG1heDIgPSAwOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbWF4MiArPSBwMltpXS55QXJyYXlbMl07CiAgICAgIH0KICAgICAgbGV0IG1pbiA9IG1pbjEgKyBtaW4yOwogICAgICBsZXQgbWF4ID0gbWF4MSArIG1heDI7CiAgICAgIGxldCB0ZW1wTWluOwogICAgICBsZXQgdGVtcE1heDsKICAgICAgbGV0IG1pbkluZGV4OwogICAgICBtaW5JbmRleCA9IFstMSwgSW5maW5pdHldOwogICAgICBsZXQgbWF4SW5kZXg7CiAgICAgIG1heEluZGV4ID0gWy0xLCAtSW5maW5pdHldOwogICAgICAvLyBjb25zb2xlLmxvZygiY291bnQ6IiwgY291bnQpOwogICAgICBsZXQgYWx0ZXJuYXRpdmVOb2RlcyA9IFtdOwogICAgICBsZXQgYWx0ZXJuYXRpdmVOb2RlczIgPSBbXTsKICAgICAgLy8gbGV0IHAgPSBwcCwgcDIgPSBwcDI7CiAgICAgIHdoaWxlIChtYXggPiAtSW5maW5pdHkpIHsKICAgICAgICBsZXQgdGVtcF9taW5MID0gMCwKICAgICAgICAgIHRlbXBfbWluUiA9IDA7CiAgICAgICAgLy8gY29uc3QgY29tYmluZWRVcmwgPSBgL2xpbmVfY2hhcnQvb25seUNoaWxkPyZwPSR7cH0mcDI9JHtwMn0mZGF0YU5hbWU9JHtkYXRhTmFtZX0mZGF0YU5hbWVzPSR7ZGF0YU5hbWVzfWA7CiAgICAgICAgLy8gY29uc3QgZGF0YSA9IGdldChjb21iaW5lZFVybCk7CiAgICAgICAgLy8gY29uc3QgZGlmQ2hpbGQgPSBhd2FpdCBkYXRhOwogICAgICAgIC8vIGxldCBuZWVkTG9hZENoaWxkTm9kZTogQXJyYXk8VHJlbmRUcmVlPiA9IFtdOwogICAgICAgIC8vIG5lZWRMb2FkQ2hpbGROb2RlLnB1c2gocCk7CiAgICAgICAgLy8gbGV0IGxvc2VkRGF0YUluZm8gPSBjb21wdXRlTG9zZWREYXRhUmFuZ2VWMShuZWVkTG9hZENoaWxkTm9kZSk7CiAgICAgICAgLy8gY29uc29sZS5sb2cobG9zZWREYXRhSW5mbyk7CiAgICAgICAgLy8gaWYgKGxvc2VkRGF0YUluZm8ubGVuZ3RoID4gMCkgewogICAgICAgIC8vICAgICBiYXRjaExvYWREYXRhRm9yUmFuZ2VMZXZlbDFNaW5NYXhNaXNzKGxvc2VkRGF0YUluZm8sIGxldmVsRGF0YU1hbmFnZXIpOyAgLy/lj5blvpfns7vmlbAKICAgICAgICAvLyAgICAgZm9yKGxldCBpPTA7IGk8b3RoZXJEYXRhTWFuYWdlci5sZW5ndGg7IGkrKykKICAgICAgICAvLyAgICAgICAgIGJhdGNoTG9hZERhdGFGb3JSYW5nZUxldmVsMU1pbk1heE1pc3MobG9zZWREYXRhSW5mbywgb3RoZXJEYXRhTWFuYWdlcltpXSk7CiAgICAgICAgLy8gfQogICAgICAgIC8vIGNvbnNvbGUubG9nKCJnZXQgY2hpbGQgZmluaXNoZWQiKTsKICAgICAgICBpZiAoIXAuX2xlZnRDaGlsZCAmJiAhcC5fcmlnaHRDaGlsZCkgewogICAgICAgICAgbGV0IG1pbkwgPSAwLAogICAgICAgICAgICBtaW5SID0gMDsKICAgICAgICAgIGxldCBub2RlRmxhZ0luZm8xID0gY3VycmVudEZsYWdJbmZvW3AuaW5kZXggKiAyICsgMV07CiAgICAgICAgICBpZiAobm9kZUZsYWdJbmZvMSA9PT0gMCkgewogICAgICAgICAgICBtaW5MICs9IHAueUFycmF5WzFdOwogICAgICAgICAgICBtaW5SICs9IHAueUFycmF5WzJdOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbWluTCArPSBwLnlBcnJheVsyXTsKICAgICAgICAgICAgbWluUiArPSBwLnlBcnJheVsxXTsKICAgICAgICAgIH0KICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3VycmVudEZsYWdJbmZvMi5sZW5ndGg7ICsraSkgewogICAgICAgICAgICBpZiAoY3VycmVudEZsYWdJbmZvMltpXVtwLmluZGV4ICogMiArIDFdID09PSAwKSB7CiAgICAgICAgICAgICAgbWluTCArPSBwMltpXS55QXJyYXlbMV07CiAgICAgICAgICAgICAgbWluUiArPSBwMltpXS55QXJyYXlbMl07CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgbWluTCArPSBwMltpXS55QXJyYXlbMl07CiAgICAgICAgICAgICAgbWluUiArPSBwMltpXS55QXJyYXlbMV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChtaW5MIDwgbWluUikgewogICAgICAgICAgICBtaW4gPSBtaW5MOwogICAgICAgICAgICBtaW5JbmRleCA9IFtwLmluZGV4ICogMiwgbWluXTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1pbiA9IG1pblI7CiAgICAgICAgICAgIG1pbkluZGV4ID0gW3AuaW5kZXggKiAyICsgMSwgbWluXTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChtaW4gPCB0aGlzLmFkZE1pblsxXSkgewogICAgICAgICAgICB0aGlzLmFkZE1pbiA9IG1pbkluZGV4OwogICAgICAgICAgfQogICAgICAgICAgLy8gbGV0IG5vZGVGbGFnSW5mbzIgPSBjdXJyZW50RmxhZ0luZm8yW3AuaW5kZXggKiAyICsgMV07CiAgICAgICAgICAvLyBpZihub2RlRmxhZ0luZm8xID09PSAwICYmIG5vZGVGbGFnSW5mbzIgPT09IDApewogICAgICAgICAgLy8gICAgIG1pbiA9IHAueUFycmF5WzFdICsgcDIueUFycmF5WzFdOwogICAgICAgICAgLy8gICAgIG1pbkluZGV4ID0gW3AuaW5kZXggKiAyLCBtaW5dOwogICAgICAgICAgLy8gfQogICAgICAgICAgLy8gZWxzZSBpZihub2RlRmxhZ0luZm8xID09PSAxICYmIG5vZGVGbGFnSW5mbzIgPT09IDEpewogICAgICAgICAgLy8gICAgIG1pbiA9IHAueUFycmF5WzFdICsgcDIueUFycmF5WzFdOwogICAgICAgICAgLy8gICAgIG1pbkluZGV4ID0gW3AuaW5kZXggKiAyICsgMSwgbWluXTsKICAgICAgICAgIC8vIH0KICAgICAgICAgIC8vIGVsc2UgaWYobm9kZUZsYWdJbmZvMSA9PT0gMCAmJiBub2RlRmxhZ0luZm8yID09PSAxKXsKICAgICAgICAgIC8vICAgICAvLyBtaW4gPSBNYXRoLm1pbihwLnlBcnJheVsxXSArIHAyLnlBcnJheVsyXSwgcC55QXJyYXlbMl0gKyBwMi55QXJyYXlbMV0pOwogICAgICAgICAgLy8gICAgIGlmKHAueUFycmF5WzFdICsgcDIueUFycmF5WzJdIDwgcC55QXJyYXlbMl0gKyBwMi55QXJyYXlbMV0pewogICAgICAgICAgLy8gICAgICAgICBtaW4gPSBwLnlBcnJheVsxXSArIHAyLnlBcnJheVsyXTsKICAgICAgICAgIC8vICAgICAgICAgbWluSW5kZXggPSBbcC5pbmRleCAqIDIsIHAueUFycmF5WzFdICsgcDIueUFycmF5WzJdXTsKICAgICAgICAgIC8vICAgICB9CiAgICAgICAgICAvLyAgICAgZWxzZXsKICAgICAgICAgIC8vICAgICAgICAgbWluID0gcC55QXJyYXlbMl0gKyBwMi55QXJyYXlbMV07CiAgICAgICAgICAvLyAgICAgICAgIG1pbkluZGV4ID0gW3AuaW5kZXggKiAyICsgMSwgcC55QXJyYXlbMl0gKyBwMi55QXJyYXlbMV1dOwogICAgICAgICAgLy8gICAgIH0KICAgICAgICAgIC8vIH0KICAgICAgICAgIC8vIGVsc2V7CiAgICAgICAgICAvLyAgICAgaWYocC55QXJyYXlbMV0gKyBwMi55QXJyYXlbMl0gPCBwLnlBcnJheVsyXSArIHAyLnlBcnJheVsxXSl7CiAgICAgICAgICAvLyAgICAgICAgIG1pbiA9IHAueUFycmF5WzFdICsgcDIueUFycmF5WzJdOwogICAgICAgICAgLy8gICAgICAgICBtaW5JbmRleCA9IFtwLmluZGV4ICogMiArIDEsIHAueUFycmF5WzFdICsgcDIueUFycmF5WzJdXTsKICAgICAgICAgIC8vICAgICB9CiAgICAgICAgICAvLyAgICAgZWxzZXsKICAgICAgICAgIC8vICAgICAgICAgbWluID0gcC55QXJyYXlbMl0gKyBwMi55QXJyYXlbMV07CiAgICAgICAgICAvLyAgICAgICAgIG1pbkluZGV4ID0gW3AuaW5kZXggKiAyLCBwLnlBcnJheVsyXSArIHAyLnlBcnJheVsxXV07CiAgICAgICAgICAvLyAgICAgfQogICAgICAgICAgLy8gfQogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGlmIChwLl9sZWZ0Q2hpbGQpIHsKICAgICAgICAgIHRlbXBfbWluTCA9IHAuX2xlZnRDaGlsZC55QXJyYXlbMV07CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIGlmIChwMltpXS5fbGVmdENoaWxkICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgdGVtcF9taW5MICs9IHAyW2ldLl9sZWZ0Q2hpbGQueUFycmF5WzFdOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChwLl9yaWdodENoaWxkKSB7CiAgICAgICAgICB0ZW1wX21pblIgPSBwLl9yaWdodENoaWxkLnlBcnJheVsxXTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcDIubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgaWYgKHAyW2ldLl9yaWdodENoaWxkICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgdGVtcF9taW5SICs9IHAyW2ldLl9yaWdodENoaWxkLnlBcnJheVsxXTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAodGVtcF9taW5MIDw9IHRlbXBfbWluUiAmJiBwLl9sZWZ0Q2hpbGQpIHsKICAgICAgICAgIGxldCB0ZW1wTm9kZSA9IFtdOwogICAgICAgICAgdGVtcE1pbiA9IHRlbXBfbWluTDsKICAgICAgICAgIHRlbXBOb2RlLnB1c2gocCk7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIHRlbXBOb2RlLnB1c2gocDJbaV0pOwogICAgICAgICAgfQogICAgICAgICAgdGVtcE5vZGUucHVzaChwLl9yaWdodENoaWxkKTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcDIubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgdGVtcE5vZGUucHVzaChwMltpXS5fcmlnaHRDaGlsZCk7CiAgICAgICAgICB9CiAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHRlbXBfbWluUik7CiAgICAgICAgICBhbHRlcm5hdGl2ZU5vZGVzLnB1c2godGVtcE5vZGUpOwogICAgICAgICAgcCA9IHAuX2xlZnRDaGlsZDsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcDIubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgcDJbaV0gPSBwMltpXS5fbGVmdENoaWxkOwogICAgICAgICAgfQogICAgICAgICAgY291bnQuY291bnQrKzsKICAgICAgICB9IGVsc2UgaWYgKHRlbXBfbWluTCA+IHRlbXBfbWluUiAmJiBwLl9yaWdodENoaWxkKSB7CiAgICAgICAgICBsZXQgdGVtcE5vZGUgPSBbXTsKICAgICAgICAgIHRlbXBNaW4gPSB0ZW1wX21pblI7CiAgICAgICAgICAvLyBhbHRlcm5hdGl2ZU5vZGVzLnB1c2goW3AsIHAyLCBwLl9sZWZ0Q2hpbGQsIHAyLl9sZWZ0Q2hpbGQsIHRlbXBfbWluTF0pOwogICAgICAgICAgdGVtcE5vZGUucHVzaChwKTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcDIubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgdGVtcE5vZGUucHVzaChwMltpXSk7CiAgICAgICAgICB9CiAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHAuX2xlZnRDaGlsZCk7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIHRlbXBOb2RlLnB1c2gocDJbaV0uX2xlZnRDaGlsZCk7CiAgICAgICAgICB9CiAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHRlbXBfbWluTCk7CiAgICAgICAgICBwID0gcC5fcmlnaHRDaGlsZDsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcDIubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgcDJbaV0gPSBwMltpXS5fcmlnaHRDaGlsZDsKICAgICAgICAgIH0KICAgICAgICAgIGFsdGVybmF0aXZlTm9kZXMucHVzaCh0ZW1wTm9kZSk7CiAgICAgICAgICBjb3VudC5jb3VudCsrOwogICAgICAgIH0KICAgICAgfQogICAgICAvLyBjb25zb2xlLmxvZygiVGhlIGJvdHRvbSBtaW4oKyk6IiwgbWluSW5kZXgpOwogICAgICBwID0gcHAsIHAyID0gcHAyOwogICAgICB3aGlsZSAobWF4ID4gLUluZmluaXR5KSB7CiAgICAgICAgbGV0IHRlbXBfbWF4TCA9IDAsCiAgICAgICAgICB0ZW1wX21heFIgPSAwOwogICAgICAgIC8vIGxldCBuZWVkTG9hZENoaWxkTm9kZTogQXJyYXk8VHJlbmRUcmVlPiA9IFtdOwogICAgICAgIC8vIG5lZWRMb2FkQ2hpbGROb2RlLnB1c2gocCk7CiAgICAgICAgLy8gbGV0IGxvc2VkRGF0YUluZm8gPSBjb21wdXRlTG9zZWREYXRhUmFuZ2VWMShuZWVkTG9hZENoaWxkTm9kZSk7CiAgICAgICAgLy8gY29uc29sZS5sb2cobG9zZWREYXRhSW5mbyk7CiAgICAgICAgLy8gaWYgKGxvc2VkRGF0YUluZm8ubGVuZ3RoID4gMCkgewogICAgICAgIC8vICAgICBiYXRjaExvYWREYXRhRm9yUmFuZ2VMZXZlbDFNaW5NYXhNaXNzKGxvc2VkRGF0YUluZm8sIGxldmVsRGF0YU1hbmFnZXIpOyAgLy/lj5blvpfns7vmlbAKICAgICAgICAvLyAgICAgZm9yKGxldCBpPTA7IGk8b3RoZXJEYXRhTWFuYWdlci5sZW5ndGg7IGkrKykKICAgICAgICAvLyAgICAgICAgIGJhdGNoTG9hZERhdGFGb3JSYW5nZUxldmVsMU1pbk1heE1pc3MobG9zZWREYXRhSW5mbywgb3RoZXJEYXRhTWFuYWdlcltpXSk7CiAgICAgICAgLy8gfQogICAgICAgIGlmICghcC5fbGVmdENoaWxkICYmICFwLl9yaWdodENoaWxkKSB7CiAgICAgICAgICBsZXQgbWF4TCA9IDAsCiAgICAgICAgICAgIG1heFIgPSAwOwogICAgICAgICAgbGV0IG5vZGVGbGFnSW5mbzEgPSBjdXJyZW50RmxhZ0luZm9bcC5pbmRleCAqIDIgKyAxXTsKICAgICAgICAgIGlmIChub2RlRmxhZ0luZm8xID09PSAwKSB7CiAgICAgICAgICAgIG1heEwgKz0gcC55QXJyYXlbMV07CiAgICAgICAgICAgIG1heFIgKz0gcC55QXJyYXlbMl07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtYXhMICs9IHAueUFycmF5WzJdOwogICAgICAgICAgICBtYXhSICs9IHAueUFycmF5WzFdOwogICAgICAgICAgfQogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjdXJyZW50RmxhZ0luZm8yLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIGlmIChjdXJyZW50RmxhZ0luZm8yW2ldW3AuaW5kZXggKiAyICsgMV0gPT09IDApIHsKICAgICAgICAgICAgICBtYXhMICs9IHAyW2ldLnlBcnJheVsxXTsKICAgICAgICAgICAgICBtYXhSICs9IHAyW2ldLnlBcnJheVsyXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBtYXhMICs9IHAyW2ldLnlBcnJheVsyXTsKICAgICAgICAgICAgICBtYXhSICs9IHAyW2ldLnlBcnJheVsxXTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKG1heEwgPiBtYXhSKSB7CiAgICAgICAgICAgIG1heCA9IG1heEw7CiAgICAgICAgICAgIG1heEluZGV4ID0gW3AuaW5kZXggKiAyLCBtYXhdOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbWF4ID0gbWF4UjsKICAgICAgICAgICAgbWF4SW5kZXggPSBbcC5pbmRleCAqIDIgKyAxLCBtYXhdOwogICAgICAgICAgfQogICAgICAgICAgaWYgKG1heCA+IHRoaXMuYWRkTWF4WzFdKSB7CiAgICAgICAgICAgIHRoaXMuYWRkTWF4ID0gbWF4SW5kZXg7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgaWYgKHAuX2xlZnRDaGlsZCkgewogICAgICAgICAgdGVtcF9tYXhMID0gcC5fbGVmdENoaWxkLnlBcnJheVsyXTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcDIubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgaWYgKHAyW2ldLl9sZWZ0Q2hpbGQgIT09IG51bGwpIHsKICAgICAgICAgICAgICB0ZW1wX21heEwgKz0gcDJbaV0uX2xlZnRDaGlsZC55QXJyYXlbMl07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHAuX3JpZ2h0Q2hpbGQpIHsKICAgICAgICAgIHRlbXBfbWF4UiA9IHAuX3JpZ2h0Q2hpbGQueUFycmF5WzJdOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwMi5sZW5ndGg7ICsraSkgewogICAgICAgICAgICBpZiAocDJbaV0uX3JpZ2h0Q2hpbGQgIT09IG51bGwpIHsKICAgICAgICAgICAgICB0ZW1wX21heFIgKz0gcDJbaV0uX3JpZ2h0Q2hpbGQueUFycmF5WzJdOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICh0ZW1wX21heEwgPD0gdGVtcF9tYXhSICYmIHAuX3JpZ2h0Q2hpbGQpIHsKICAgICAgICAgIGxldCB0ZW1wTm9kZSA9IFtdOwogICAgICAgICAgdGVtcE1heCA9IHRlbXBfbWF4UjsKICAgICAgICAgIHRlbXBOb2RlLnB1c2gocCk7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIHRlbXBOb2RlLnB1c2gocDJbaV0pOwogICAgICAgICAgfQogICAgICAgICAgdGVtcE5vZGUucHVzaChwLl9sZWZ0Q2hpbGQpOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwMi5sZW5ndGg7ICsraSkgewogICAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHAyW2ldLl9sZWZ0Q2hpbGQpOwogICAgICAgICAgfQogICAgICAgICAgdGVtcE5vZGUucHVzaCh0ZW1wX21heEwpOwogICAgICAgICAgYWx0ZXJuYXRpdmVOb2RlczIucHVzaCh0ZW1wTm9kZSk7CiAgICAgICAgICBwID0gcC5fcmlnaHRDaGlsZDsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcDIubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgcDJbaV0gPSBwMltpXS5fcmlnaHRDaGlsZDsKICAgICAgICAgIH0KICAgICAgICAgIGNvdW50LmNvdW50Kys7CiAgICAgICAgfSBlbHNlIGlmICh0ZW1wX21heEwgPiB0ZW1wX21heFIgJiYgcC5fbGVmdENoaWxkKSB7CiAgICAgICAgICBsZXQgdGVtcE5vZGUgPSBbXTsKICAgICAgICAgIHRlbXBNYXggPSB0ZW1wX21heEw7CiAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHApOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwMi5sZW5ndGg7ICsraSkgewogICAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHAyW2ldKTsKICAgICAgICAgIH0KICAgICAgICAgIHRlbXBOb2RlLnB1c2gocC5fcmlnaHRDaGlsZCk7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIHRlbXBOb2RlLnB1c2gocDJbaV0uX3JpZ2h0Q2hpbGQpOwogICAgICAgICAgfQogICAgICAgICAgdGVtcE5vZGUucHVzaCh0ZW1wX21heFIpOwogICAgICAgICAgYWx0ZXJuYXRpdmVOb2RlczIucHVzaCh0ZW1wTm9kZSk7CiAgICAgICAgICBwID0gcC5fbGVmdENoaWxkOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwMi5sZW5ndGg7ICsraSkgewogICAgICAgICAgICBwMltpXSA9IHAyW2ldLl9sZWZ0Q2hpbGQ7CiAgICAgICAgICB9CiAgICAgICAgICBjb3VudC5jb3VudCsrOwogICAgICAgIH0KICAgICAgfQogICAgICAvLyBjb25zb2xlLmxvZygiVGhlIGJvdHRvbSBtYXgoKyk6IiwgbWF4SW5kZXgpOwogICAgICAvLyBjb25zb2xlLmxvZygic3RvcmUuc3RhdGUuY29udHJvbFBhcmFtcy5zdG9wRWFybHk6Iiwgc3RvcmUuc3RhdGUuY29udHJvbFBhcmFtcy5zdG9wRWFybHkpOwogICAgICBpZiAoc3RvcmUuc3RhdGUuY29udHJvbFBhcmFtcy5zdG9wRWFybHkgPT09IHRydWUpIHsKICAgICAgICBhbHRlcm5hdGl2ZU5vZGVzID0gW107CiAgICAgICAgYWx0ZXJuYXRpdmVOb2RlczIgPSBbXTsKICAgICAgICAvLyByZXR1cm47CiAgICAgIH0KICAgICAgLy8gcCA9IHBwLCBwMiA9IHBwMzsKICAgICAgd2hpbGUgKGFsdGVybmF0aXZlTm9kZXMubGVuZ3RoID4gMCkgewogICAgICAgIC8vIGNvbnNvbGUubG9nKCJObyBzdG9wIGVhcmx5ISIpOwogICAgICAgIGxldCBwb3AgPSBhbHRlcm5hdGl2ZU5vZGVzLnBvcCgpOwogICAgICAgIC8vIGlmKHBvcCA9PT0gdW5kZWZpbmVkICkgY29udGludWU7CiAgICAgICAgLy8gY29uc29sZS5sb2coInBvcDoiLCBwb3ApOwogICAgICAgIC8vIGlmKE51bWJlcihwb3BbcG9wLmxlbmd0aC0xXSkgPiB0aGlzLmFkZE1pblsxXSkgY29udGludWU7CiAgICAgICAgLy8gbWluID0gdGhpcy51cGRhdGVNaW5WYWx1ZShwIVswXSwgbWluLCBhbHRlcm5hdGl2ZU5vZGVzKTsKICAgICAgICBsZXQgbGVuID0gcG9wLmxlbmd0aDsKICAgICAgICBsZXQgdGVtcF9taW5MID0gMCwKICAgICAgICAgIHRlbXBfbWluUiA9IDA7CiAgICAgICAgaWYgKCFwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0uX2xlZnRDaGlsZCAmJiAhcG9wW01hdGguZmxvb3IobGVuIC8gMildLl9yaWdodENoaWxkKSB7CiAgICAgICAgICBsZXQgbWluTCA9IDAsCiAgICAgICAgICAgIG1pblIgPSAwOwogICAgICAgICAgbGV0IG5vZGVGbGFnSW5mbzEgPSBjdXJyZW50RmxhZ0luZm9bcG9wW01hdGguZmxvb3IobGVuIC8gMildLmluZGV4ICogMiArIDFdOwogICAgICAgICAgaWYgKG5vZGVGbGFnSW5mbzEgPT09IDApIHsKICAgICAgICAgICAgbWluTCArPSBwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0ueUFycmF5WzFdOwogICAgICAgICAgICBtaW5SICs9IHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS55QXJyYXlbMl07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtaW5MICs9IHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS55QXJyYXlbMl07CiAgICAgICAgICAgIG1pblIgKz0gcG9wW01hdGguZmxvb3IobGVuIC8gMildLnlBcnJheVsxXTsKICAgICAgICAgIH0KICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3VycmVudEZsYWdJbmZvMi5sZW5ndGg7ICsraSkgewogICAgICAgICAgICBpZiAoY3VycmVudEZsYWdJbmZvMltpXVtwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0uaW5kZXggKiAyICsgMV0gPT09IDApIHsKICAgICAgICAgICAgICBtaW5MICs9IHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpICsgaSArIDFdLnlBcnJheVsxXTsKICAgICAgICAgICAgICBtaW5SICs9IHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpICsgaSArIDFdLnlBcnJheVsyXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBtaW5MICs9IHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpICsgaSArIDFdLnlBcnJheVsyXTsKICAgICAgICAgICAgICBtaW5SICs9IHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpICsgaSArIDFdLnlBcnJheVsxXTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKG1pbkwgPCBtaW5SKSB7CiAgICAgICAgICAgIG1pbiA9IG1pbkw7CiAgICAgICAgICAgIG1pbkluZGV4ID0gW3BvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS5pbmRleCAqIDIsIG1pbl07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtaW4gPSBtaW5SOwogICAgICAgICAgICBtaW5JbmRleCA9IFtwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0uaW5kZXggKiAyICsgMSwgbWluXTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChtaW4gPCB0aGlzLmFkZE1pblsxXSkgewogICAgICAgICAgICB0aGlzLmFkZE1pbiA9IG1pbkluZGV4OwogICAgICAgICAgfQogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQogICAgICAgIGlmIChwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0uX2xlZnRDaGlsZCkgewogICAgICAgICAgbGV0IGluZGV4ID0gTWF0aC5mbG9vcihsZW4gLyAyKTsKICAgICAgICAgIGZvciAobGV0IGkgPSBpbmRleDsgaSA8IGluZGV4ICogMjsgKytpKSB7CiAgICAgICAgICAgIHRlbXBfbWluTCArPSBwb3BbaV0uX2xlZnRDaGlsZC55QXJyYXlbMV07CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGVtcF9taW5MIDwgdGhpcy5hZGRNaW5bMV0pIHsKICAgICAgICAgICAgbGV0IHRlbXBOb2RlID0gW107CiAgICAgICAgICAgIGZvciAobGV0IGkgPSBpbmRleDsgaSA8IGluZGV4ICogMjsgKytpKSB7CiAgICAgICAgICAgICAgdGVtcE5vZGUucHVzaChwb3BbaV0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAobGV0IGkgPSBpbmRleDsgaSA8IGluZGV4ICogMjsgKytpKSB7CiAgICAgICAgICAgICAgdGVtcE5vZGUucHVzaChwb3BbaV0uX2xlZnRDaGlsZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGVtcE5vZGUucHVzaCh0ZW1wX21pbkwpOwogICAgICAgICAgICBhbHRlcm5hdGl2ZU5vZGVzLnB1c2godGVtcE5vZGUpOwogICAgICAgICAgICBjb3VudC5jb3VudCsrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAocG9wW01hdGguZmxvb3IobGVuIC8gMildLl9yaWdodENoaWxkKSB7CiAgICAgICAgICAvLyB0ZW1wX21pblIgPSAocG9wWzJdLl9yaWdodENoaWxkLnlBcnJheVsxXSArIHBvcFszXS5fcmlnaHRDaGlsZC55QXJyYXlbMV0pOwogICAgICAgICAgLy8gaWYodGVtcF9taW5SIDwgbWluKQogICAgICAgICAgLy8gICAgIGFsdGVybmF0aXZlTm9kZXMucHVzaChbcG9wWzJdLCBwb3BbM10sIHBvcFsyXS5fcmlnaHRDaGlsZCwgcG9wWzNdLl9yaWdodENoaWxkLCB0ZW1wX21pblJdKTsKICAgICAgICAgIGxldCBpbmRleCA9IE1hdGguZmxvb3IobGVuIC8gMik7CiAgICAgICAgICBmb3IgKGxldCBpID0gaW5kZXg7IGkgPCBpbmRleCAqIDI7ICsraSkgewogICAgICAgICAgICB0ZW1wX21pblIgKz0gcG9wW2ldLl9yaWdodENoaWxkLnlBcnJheVsxXTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0ZW1wX21pblIgPCB0aGlzLmFkZE1pblsxXSkgewogICAgICAgICAgICBsZXQgdGVtcE5vZGUgPSBbXTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4OyBpIDwgaW5kZXggKiAyOyArK2kpIHsKICAgICAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHBvcFtpXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4OyBpIDwgaW5kZXggKiAyOyArK2kpIHsKICAgICAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHBvcFtpXS5fcmlnaHRDaGlsZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGVtcE5vZGUucHVzaCh0ZW1wX21pblIpOwogICAgICAgICAgICBhbHRlcm5hdGl2ZU5vZGVzLnB1c2godGVtcE5vZGUpOwogICAgICAgICAgICBjb3VudC5jb3VudCsrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICAvLyBwID0gcHAsIHAyID0gcHA0OwogICAgICB3aGlsZSAoYWx0ZXJuYXRpdmVOb2RlczIubGVuZ3RoID4gMCkgewogICAgICAgIGxldCBwb3AgPSBhbHRlcm5hdGl2ZU5vZGVzMi5wb3AoKTsKICAgICAgICAvLyBpZihwb3AgPT09IHVuZGVmaW5lZCkgY29udGludWU7CiAgICAgICAgLy8gaWYoTnVtYmVyKHBvcFtwb3AubGVuZ3RoLTFdKSA8IHRoaXMuYWRkTWF4WzFdKSBjb250aW51ZTsKICAgICAgICBsZXQgbGVuID0gcG9wLmxlbmd0aDsKICAgICAgICBsZXQgdGVtcF9tYXhMID0gMCwKICAgICAgICAgIHRlbXBfbWF4UiA9IDA7CiAgICAgICAgaWYgKCFwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0uX2xlZnRDaGlsZCAmJiAhcG9wW01hdGguZmxvb3IobGVuIC8gMildLl9yaWdodENoaWxkKSB7CiAgICAgICAgICBsZXQgbWF4TCA9IDAsCiAgICAgICAgICAgIG1heFIgPSAwOwogICAgICAgICAgbGV0IG5vZGVGbGFnSW5mbzEgPSBjdXJyZW50RmxhZ0luZm9bcG9wW01hdGguZmxvb3IobGVuIC8gMildLmluZGV4ICogMiArIDFdOwogICAgICAgICAgaWYgKG5vZGVGbGFnSW5mbzEgPT09IDApIHsKICAgICAgICAgICAgbWF4TCArPSBwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0ueUFycmF5WzFdOwogICAgICAgICAgICBtYXhSICs9IHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS55QXJyYXlbMl07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtYXhMICs9IHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS55QXJyYXlbMl07CiAgICAgICAgICAgIG1heFIgKz0gcG9wW01hdGguZmxvb3IobGVuIC8gMildLnlBcnJheVsxXTsKICAgICAgICAgIH0KICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3VycmVudEZsYWdJbmZvMi5sZW5ndGg7ICsraSkgewogICAgICAgICAgICBpZiAoY3VycmVudEZsYWdJbmZvMltpXVtwLmluZGV4ICogMiArIDFdID09PSAwKSB7CiAgICAgICAgICAgICAgbWF4TCArPSBwb3BbTWF0aC5mbG9vcihsZW4gLyAyKSArIGkgKyAxXS55QXJyYXlbMV07CiAgICAgICAgICAgICAgbWF4UiArPSBwb3BbTWF0aC5mbG9vcihsZW4gLyAyKSArIGkgKyAxXS55QXJyYXlbMl07CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgbWF4TCArPSBwb3BbTWF0aC5mbG9vcihsZW4gLyAyKSArIGkgKyAxXS55QXJyYXlbMl07CiAgICAgICAgICAgICAgbWF4UiArPSBwb3BbTWF0aC5mbG9vcihsZW4gLyAyKSArIGkgKyAxXS55QXJyYXlbMV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChtYXhMID4gbWF4UikgewogICAgICAgICAgICBtYXggPSBtYXhMOwogICAgICAgICAgICBtYXhJbmRleCA9IFtwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0uaW5kZXggKiAyLCBtYXhdOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbWF4ID0gbWF4UjsKICAgICAgICAgICAgbWF4SW5kZXggPSBbcG9wW01hdGguZmxvb3IobGVuIC8gMildLmluZGV4ICogMiArIDEsIG1heF07CiAgICAgICAgICB9CiAgICAgICAgICBpZiAobWF4ID4gdGhpcy5hZGRNYXhbMV0pIHsKICAgICAgICAgICAgdGhpcy5hZGRNYXggPSBtYXhJbmRleDsKICAgICAgICAgIH0KICAgICAgICAgIC8vIGxldCBub2RlRmxhZ0luZm8xID0gY3VycmVudEZsYWdJbmZvWyhwb3BbMl0uaW5kZXgpICogMiArIDFdOwogICAgICAgICAgLy8gbGV0IG5vZGVGbGFnSW5mbzIgPSBjdXJyZW50RmxhZ0luZm8yWyhwb3BbMl0uaW5kZXgpICogMiArIDFdOwogICAgICAgICAgLy8gaWYobm9kZUZsYWdJbmZvMSA9PT0gMCAmJiBub2RlRmxhZ0luZm8yID09PSAwKXsKICAgICAgICAgIC8vICAgICAvLyBtaW4gPSBNYXRoLm1pbihwb3BbMl0ueUFycmF5WzFdICsgcG9wWzNdLnlBcnJheVsxXSwgbWluKTsKICAgICAgICAgIC8vICAgICBpZihwb3BbMl0ueUFycmF5WzJdICsgcG9wWzNdLnlBcnJheVsyXSA+IG1heCl7CiAgICAgICAgICAvLyAgICAgICAgIG1heCA9IHBvcFsyXS55QXJyYXlbMl0gKyBwb3BbM10ueUFycmF5WzJdOwogICAgICAgICAgLy8gICAgICAgICBtYXhJbmRleCA9IFtwb3BbMl0uaW5kZXggKiAyICsgMSwgbWF4XQogICAgICAgICAgLy8gICAgIH0KICAgICAgICAgIC8vIH0KICAgICAgICAgIC8vIGVsc2UgaWYobm9kZUZsYWdJbmZvMSA9PT0gMSAmJiBub2RlRmxhZ0luZm8yID09PSAxKXsKICAgICAgICAgIC8vICAgICAvLyBtaW4gPSBNYXRoLm1pbihwb3BbMl0ueUFycmF5WzFdICsgcG9wWzNdLnlBcnJheVsxXSwgbWluKTsKICAgICAgICAgIC8vICAgICBpZihwb3BbMl0ueUFycmF5WzFdICsgcG9wWzNdLnlBcnJheVsxXSA+IG1heCl7CiAgICAgICAgICAvLyAgICAgICAgIG1heCA9IHBvcFsyXS55QXJyYXlbMl0gKyBwb3BbM10ueUFycmF5WzJdOwogICAgICAgICAgLy8gICAgICAgICBtYXhJbmRleCA9IFtwb3BbMl0uaW5kZXggKiAyLCBtYXhdCiAgICAgICAgICAvLyAgICAgfQogICAgICAgICAgLy8gfQogICAgICAgICAgLy8gZWxzZSBpZihub2RlRmxhZ0luZm8xID09PSAwICYmIG5vZGVGbGFnSW5mbzIgPT09IDEpewogICAgICAgICAgLy8gICAgIC8vIG1pbiA9IE1hdGgubWluKE1hdGgubWluKHBvcFsyXS55QXJyYXlbMV0gKyBwb3BbM10ueUFycmF5WzJdLCBwb3BbMl0ueUFycmF5WzJdICsgcG9wWzNdLnlBcnJheVsxXSksIG1pbik7CiAgICAgICAgICAvLyAgICAgaWYocG9wWzJdLnlBcnJheVsxXSArIHBvcFszXS55QXJyYXlbMl0gPiBtYXgpewogICAgICAgICAgLy8gICAgICAgICBtYXggPSBwb3BbMl0ueUFycmF5WzFdICsgcG9wWzNdLnlBcnJheVsyXTsKICAgICAgICAgIC8vICAgICAgICAgbWF4SW5kZXggPSBbcG9wWzJdLmluZGV4ICogMiwgbWF4XQogICAgICAgICAgLy8gICAgIH0KICAgICAgICAgIC8vICAgICBlbHNlIGlmKHBvcFsyXS55QXJyYXlbMl0gKyBwb3BbM10ueUFycmF5WzFdID4gbWF4KXsKICAgICAgICAgIC8vICAgICAgICAgbWF4ID0gcG9wWzJdLnlBcnJheVsyXSArIHBvcFszXS55QXJyYXlbMV07CiAgICAgICAgICAvLyAgICAgICAgIG1heEluZGV4ID0gW3BvcFsyXS5pbmRleCAqIDIgKyAxLCBtYXhdCiAgICAgICAgICAvLyAgICAgfQogICAgICAgICAgLy8gfQogICAgICAgICAgLy8gZWxzZXsKICAgICAgICAgIC8vICAgICBpZihwb3BbMl0ueUFycmF5WzFdICsgcG9wWzNdLnlBcnJheVsyXSA+IG1heCl7CiAgICAgICAgICAvLyAgICAgICAgIG1heCA9IHBvcFsyXS55QXJyYXlbMV0gKyBwb3BbM10ueUFycmF5WzJdOwogICAgICAgICAgLy8gICAgICAgICBtYXhJbmRleCA9IFtwb3BbMl0uaW5kZXggKiAyICsgMSwgbWF4XQogICAgICAgICAgLy8gICAgIH0KICAgICAgICAgIC8vICAgICBlbHNlIGlmKHBvcFsyXS55QXJyYXlbMl0gKyBwb3BbM10ueUFycmF5WzFdID4gbWF4KXsKICAgICAgICAgIC8vICAgICAgICAgbWF4ID0gcG9wWzJdLnlBcnJheVsyXSArIHBvcFszXS55QXJyYXlbMV07CiAgICAgICAgICAvLyAgICAgICAgIG1heEluZGV4ID0gW3BvcFsyXS5pbmRleCAqIDIsIG1heF0KICAgICAgICAgIC8vICAgICB9CiAgICAgICAgICAvLyB9CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgICAgaWYgKHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS5fbGVmdENoaWxkKSB7CiAgICAgICAgICAvLyB0ZW1wX21heEwgPSAocG9wWzJdLl9sZWZ0Q2hpbGQueUFycmF5WzJdICsgcG9wWzNdLl9sZWZ0Q2hpbGQueUFycmF5WzJdKTsKICAgICAgICAgIC8vIGlmKHRlbXBfbWF4TCA+IG1heCkKICAgICAgICAgIC8vICAgICBhbHRlcm5hdGl2ZU5vZGVzMi5wdXNoKFtwb3BbMl0sIHBvcFszXSwgcG9wWzJdLl9sZWZ0Q2hpbGQsIHBvcFszXS5fbGVmdENoaWxkLCB0ZW1wX21heExdKTsKICAgICAgICAgIGxldCBpbmRleCA9IE1hdGguZmxvb3IobGVuIC8gMik7CiAgICAgICAgICBmb3IgKGxldCBpID0gaW5kZXg7IGkgPCBpbmRleCAqIDI7ICsraSkgewogICAgICAgICAgICB0ZW1wX21heEwgKz0gcG9wW2ldLl9sZWZ0Q2hpbGQueUFycmF5WzJdOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRlbXBfbWF4TCA+IHRoaXMuYWRkTWF4WzFdKSB7CiAgICAgICAgICAgIGxldCB0ZW1wTm9kZSA9IFtdOwogICAgICAgICAgICBmb3IgKGxldCBpID0gaW5kZXg7IGkgPCBpbmRleCAqIDI7ICsraSkgewogICAgICAgICAgICAgIHRlbXBOb2RlLnB1c2gocG9wW2ldKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGxldCBpID0gaW5kZXg7IGkgPCBpbmRleCAqIDI7ICsraSkgewogICAgICAgICAgICAgIHRlbXBOb2RlLnB1c2gocG9wW2ldLl9sZWZ0Q2hpbGQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRlbXBOb2RlLnB1c2godGVtcF9tYXhMKTsKICAgICAgICAgICAgYWx0ZXJuYXRpdmVOb2RlczIucHVzaCh0ZW1wTm9kZSk7CiAgICAgICAgICAgIGNvdW50LmNvdW50Kys7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0uX3JpZ2h0Q2hpbGQpIHsKICAgICAgICAgIC8vIHRlbXBfbWF4UiA9IChwb3BbMl0uX3JpZ2h0Q2hpbGQueUFycmF5WzJdICsgcG9wWzNdLl9yaWdodENoaWxkLnlBcnJheVsyXSk7CiAgICAgICAgICAvLyBpZih0ZW1wX21heFIgPiBtYXgpCiAgICAgICAgICAvLyAgICAgYWx0ZXJuYXRpdmVOb2RlczIucHVzaChbcG9wWzJdLCBwb3BbM10sIHBvcFsyXS5fcmlnaHRDaGlsZCwgcG9wWzNdLl9yaWdodENoaWxkLCB0ZW1wX21heFJdKTsKICAgICAgICAgIGxldCBpbmRleCA9IE1hdGguZmxvb3IobGVuIC8gMik7CiAgICAgICAgICBmb3IgKGxldCBpID0gaW5kZXg7IGkgPCBpbmRleCAqIDI7ICsraSkgewogICAgICAgICAgICB0ZW1wX21heFIgKz0gcG9wW2ldLl9yaWdodENoaWxkLnlBcnJheVsyXTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0ZW1wX21heFIgPiB0aGlzLmFkZE1heFsxXSkgewogICAgICAgICAgICBsZXQgdGVtcE5vZGUgPSBbXTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4OyBpIDwgaW5kZXggKiAyOyArK2kpIHsKICAgICAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHBvcFtpXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4OyBpIDwgaW5kZXggKiAyOyArK2kpIHsKICAgICAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHBvcFtpXS5fcmlnaHRDaGlsZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGVtcE5vZGUucHVzaCh0ZW1wX21heFIpOwogICAgICAgICAgICBhbHRlcm5hdGl2ZU5vZGVzMi5wdXNoKHRlbXBOb2RlKTsKICAgICAgICAgICAgY291bnQuY291bnQrKzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgLy8gY29uc29sZS5sb2coIlRoZSBmaW5hbCBtYXgoKyk6IiwgbWF4SW5kZXgpOyAgICAgICAgICAKICAgICAgLy8gY29uc29sZS5sb2coIlRoZSBmaW5hbCBtaW4oKyk6IiwgbWluSW5kZXgpOwogICAgICBpZiAobWluIDwgdGhpcy5hZGRNaW5bMV0pIHsKICAgICAgICB0aGlzLmFkZE1pbiA9IG1pbkluZGV4OwogICAgICB9CiAgICAgIGlmIChtYXggPiB0aGlzLmFkZE1heFsxXSkgewogICAgICAgIHRoaXMuYWRkTWF4ID0gbWF4SW5kZXg7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoKHR5cGUgPT09IDEgfHwgdHlwZSA9PT0gNyB8fCB0eXBlID09PSA4IHx8IHR5cGUgPT09IDkpICYmIHN5bWJvbCA9PT0gJy0nKSB7CiAgICAgIC8vIGxldCBwID0gcHAsIHAyID0gcHAyOwogICAgICBsZXQgbWluMSA9IHAueUFycmF5WzFdOwogICAgICBsZXQgbWluMiA9IDA7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcDIubGVuZ3RoOyBpKyspIHsKICAgICAgICBtaW4yICs9IHAyW2ldLnlBcnJheVsxXTsKICAgICAgfQogICAgICBsZXQgbWF4MSA9IHAueUFycmF5WzJdOwogICAgICBsZXQgbWF4MiA9IDA7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcDIubGVuZ3RoOyBpKyspIHsKICAgICAgICBtYXgyICs9IHAyW2ldLnlBcnJheVsyXTsKICAgICAgfQogICAgICBsZXQgbWluID0gbWluMSAtIG1heDI7CiAgICAgIGxldCBtYXggPSBtYXgyIC0gbWluMTsKICAgICAgbGV0IHRlbXBNaW47CiAgICAgIGxldCB0ZW1wTWF4OwogICAgICBsZXQgbWluSW5kZXg7CiAgICAgIG1pbkluZGV4ID0gWy0xLCBJbmZpbml0eV07CiAgICAgIGxldCBtYXhJbmRleDsKICAgICAgbWF4SW5kZXggPSBbLTEsIC1JbmZpbml0eV07CiAgICAgIGxldCBhbHRlcm5hdGl2ZU5vZGVzID0gW107CiAgICAgIGxldCBhbHRlcm5hdGl2ZU5vZGVzMiA9IFtdOwogICAgICB3aGlsZSAobWF4ID4gLUluZmluaXR5KSB7CiAgICAgICAgbGV0IHRlbXBfbWluTCA9IDAsCiAgICAgICAgICB0ZW1wX21pblIgPSAwOwogICAgICAgIGlmICghcC5fbGVmdENoaWxkICYmICFwLl9yaWdodENoaWxkKSB7CiAgICAgICAgICBsZXQgbWluTCA9IDAsCiAgICAgICAgICAgIG1pblIgPSAwOwogICAgICAgICAgbGV0IG5vZGVGbGFnSW5mbzEgPSBjdXJyZW50RmxhZ0luZm9bcC5pbmRleCAqIDIgKyAxXTsKICAgICAgICAgIGlmIChub2RlRmxhZ0luZm8xID09PSAwKSB7CiAgICAgICAgICAgIG1pbkwgKz0gcC55QXJyYXlbMV07CiAgICAgICAgICAgIG1pblIgKz0gcC55QXJyYXlbMl07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtaW5MICs9IHAueUFycmF5WzJdOwogICAgICAgICAgICBtaW5SICs9IHAueUFycmF5WzFdOwogICAgICAgICAgfQogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjdXJyZW50RmxhZ0luZm8yLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIGlmIChjdXJyZW50RmxhZ0luZm8yW2ldW3AuaW5kZXggKiAyICsgMV0gPT09IDApIHsKICAgICAgICAgICAgICBtaW5MIC09IHAyW2ldLnlBcnJheVsxXTsKICAgICAgICAgICAgICBtaW5SIC09IHAyW2ldLnlBcnJheVsyXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBtaW5MIC09IHAyW2ldLnlBcnJheVsyXTsKICAgICAgICAgICAgICBtaW5SIC09IHAyW2ldLnlBcnJheVsxXTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKG1pbkwgPCBtaW5SKSB7CiAgICAgICAgICAgIG1pbiA9IG1pbkw7CiAgICAgICAgICAgIG1pbkluZGV4ID0gW3AuaW5kZXggKiAyLCBtaW5dOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbWluID0gbWluUjsKICAgICAgICAgICAgbWluSW5kZXggPSBbcC5pbmRleCAqIDIgKyAxLCBtaW5dOwogICAgICAgICAgfQogICAgICAgICAgaWYgKG1pbiA8IHRoaXMuc3ViTWluWzFdKSB7CiAgICAgICAgICAgIHRoaXMuc3ViTWluID0gbWluSW5kZXg7CiAgICAgICAgICB9CiAgICAgICAgICAvLyBsZXQgbm9kZUZsYWdJbmZvMSA9IGN1cnJlbnRGbGFnSW5mb1twLmluZGV4ICogMiArIDFdOwogICAgICAgICAgLy8gbGV0IG5vZGVGbGFnSW5mbzIgPSBjdXJyZW50RmxhZ0luZm8yW3AuaW5kZXggKiAyICsgMV07CiAgICAgICAgICAvLyBpZihub2RlRmxhZ0luZm8xID09PSAwICYmIG5vZGVGbGFnSW5mbzIgPT09IDApewogICAgICAgICAgLy8gICAgIG1pbiA9IE1hdGgubWluKHAueUFycmF5WzFdIC0gcDIueUFycmF5WzFdLCBwLnlBcnJheVsyXSAtIHAyLnlBcnJheVsyXSk7CiAgICAgICAgICAvLyB9CiAgICAgICAgICAvLyBlbHNlIGlmKG5vZGVGbGFnSW5mbzEgPT09IDEgJiYgbm9kZUZsYWdJbmZvMiA9PT0gMSl7CiAgICAgICAgICAvLyAgICAgbWluID0gTWF0aC5taW4ocC55QXJyYXlbMV0gLSBwMi55QXJyYXlbMV0sIHAueUFycmF5WzJdIC0gcDIueUFycmF5WzJdKTsKICAgICAgICAgIC8vIH0KICAgICAgICAgIC8vIGVsc2V7CiAgICAgICAgICAvLyAgICAgbWluID0gTWF0aC5taW4ocC55QXJyYXlbMV0gLSBwMi55QXJyYXlbMl0sIHAueUFycmF5WzJdIC0gcDIueUFycmF5WzFdKTsKICAgICAgICAgIC8vIH0KICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICBpZiAocC5fbGVmdENoaWxkKSB7CiAgICAgICAgICAvLyB0ZW1wX21pbkwgPSAocC5fbGVmdENoaWxkLnlBcnJheVsxXSAtIHAyLl9sZWZ0Q2hpbGQueUFycmF5WzJdKTsKICAgICAgICAgIHRlbXBfbWluTCA9IHAuX2xlZnRDaGlsZC55QXJyYXlbMV07CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIGlmIChwMltpXS5fbGVmdENoaWxkICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgdGVtcF9taW5MIC09IHAyW2ldLl9sZWZ0Q2hpbGQueUFycmF5WzJdOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChwLl9yaWdodENoaWxkKSB7CiAgICAgICAgICAvLyB0ZW1wX21pblIgPSAocC5fcmlnaHRDaGlsZC55QXJyYXlbMV0gLSBwMi5fcmlnaHRDaGlsZC55QXJyYXlbMl0pOwogICAgICAgICAgdGVtcF9taW5SID0gcC5fcmlnaHRDaGlsZC55QXJyYXlbMV07CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIGlmIChwMltpXS5fcmlnaHRDaGlsZCAhPT0gbnVsbCkgewogICAgICAgICAgICAgIHRlbXBfbWluUiAtPSBwMltpXS5fcmlnaHRDaGlsZC55QXJyYXlbMl07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHRlbXBfbWluTCA8PSB0ZW1wX21pblIgJiYgcC5fbGVmdENoaWxkKSB7CiAgICAgICAgICAvLyB0ZW1wTWluID0gdGVtcF9taW5MOwogICAgICAgICAgLy8gYWx0ZXJuYXRpdmVOb2Rlcy5wdXNoKFtwLCBwMiwgcC5fcmlnaHRDaGlsZCwgcDIuX3JpZ2h0Q2hpbGQsIHRlbXBfbWluUl0pOwogICAgICAgICAgLy8gcCA9IHAuX2xlZnRDaGlsZDsKICAgICAgICAgIC8vIHAyID0gcDIuX2xlZnRDaGlsZDsKICAgICAgICAgIGxldCB0ZW1wTm9kZSA9IFtdOwogICAgICAgICAgdGVtcE1pbiA9IHRlbXBfbWluTDsKICAgICAgICAgIHRlbXBOb2RlLnB1c2gocCk7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIHRlbXBOb2RlLnB1c2gocDJbaV0pOwogICAgICAgICAgfQogICAgICAgICAgdGVtcE5vZGUucHVzaChwLl9yaWdodENoaWxkKTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcDIubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgdGVtcE5vZGUucHVzaChwMltpXS5fcmlnaHRDaGlsZCk7CiAgICAgICAgICB9CiAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHRlbXBfbWluUik7CiAgICAgICAgICBhbHRlcm5hdGl2ZU5vZGVzLnB1c2godGVtcE5vZGUpOwogICAgICAgICAgcCA9IHAuX2xlZnRDaGlsZDsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcDIubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgcDJbaV0gPSBwMltpXS5fbGVmdENoaWxkOwogICAgICAgICAgfQogICAgICAgICAgY291bnQuY291bnQrKzsKICAgICAgICB9IGVsc2UgaWYgKHRlbXBfbWluTCA+IHRlbXBfbWluUiAmJiBwLl9yaWdodENoaWxkKSB7CiAgICAgICAgICAvLyB0ZW1wTWluID0gdGVtcF9taW5SOwogICAgICAgICAgLy8gYWx0ZXJuYXRpdmVOb2Rlcy5wdXNoKFtwLCBwMiwgcC5fbGVmdENoaWxkLCBwMi5fbGVmdENoaWxkLCB0ZW1wX21pbkxdKTsKICAgICAgICAgIC8vIHAgPSBwLl9yaWdodENoaWxkOwogICAgICAgICAgLy8gcDIgPSBwMi5fcmlnaHRDaGlsZDsKICAgICAgICAgIGxldCB0ZW1wTm9kZSA9IFtdOwogICAgICAgICAgdGVtcE1pbiA9IHRlbXBfbWluUjsKICAgICAgICAgIC8vIGFsdGVybmF0aXZlTm9kZXMucHVzaChbcCwgcDIsIHAuX2xlZnRDaGlsZCwgcDIuX2xlZnRDaGlsZCwgdGVtcF9taW5MXSk7CiAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHApOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwMi5sZW5ndGg7ICsraSkgewogICAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHAyW2ldKTsKICAgICAgICAgIH0KICAgICAgICAgIHRlbXBOb2RlLnB1c2gocC5fbGVmdENoaWxkKTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcDIubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgdGVtcE5vZGUucHVzaChwMltpXS5fbGVmdENoaWxkKTsKICAgICAgICAgIH0KICAgICAgICAgIHRlbXBOb2RlLnB1c2godGVtcF9taW5MKTsKICAgICAgICAgIHAgPSBwLl9yaWdodENoaWxkOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwMi5sZW5ndGg7ICsraSkgewogICAgICAgICAgICBwMltpXSA9IHAyW2ldLl9yaWdodENoaWxkOwogICAgICAgICAgfQogICAgICAgICAgYWx0ZXJuYXRpdmVOb2Rlcy5wdXNoKHRlbXBOb2RlKTsKICAgICAgICAgIGNvdW50LmNvdW50Kys7CiAgICAgICAgfQogICAgICB9CiAgICAgIC8vIGNvbnNvbGUubG9nKCJUaGUgYm90dG9tIG1pbigtKToiLCBtaW5JbmRleCk7CiAgICAgIHAgPSBwcCwgcDIgPSBwcDI7CiAgICAgIHdoaWxlIChtYXggPiAtSW5maW5pdHkpIHsKICAgICAgICBsZXQgdGVtcF9tYXhMID0gMCwKICAgICAgICAgIHRlbXBfbWF4UiA9IDA7CiAgICAgICAgaWYgKCFwLl9sZWZ0Q2hpbGQgJiYgIXAuX3JpZ2h0Q2hpbGQpIHsKICAgICAgICAgIGxldCBtYXhMID0gMCwKICAgICAgICAgICAgbWF4UiA9IDA7CiAgICAgICAgICBsZXQgbm9kZUZsYWdJbmZvMSA9IGN1cnJlbnRGbGFnSW5mb1twLmluZGV4ICogMiArIDFdOwogICAgICAgICAgaWYgKG5vZGVGbGFnSW5mbzEgPT09IDApIHsKICAgICAgICAgICAgbWF4TCArPSBwLnlBcnJheVsxXTsKICAgICAgICAgICAgbWF4UiArPSBwLnlBcnJheVsyXTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1heEwgKz0gcC55QXJyYXlbMl07CiAgICAgICAgICAgIG1heFIgKz0gcC55QXJyYXlbMV07CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN1cnJlbnRGbGFnSW5mbzIubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgaWYgKGN1cnJlbnRGbGFnSW5mbzJbaV1bcC5pbmRleCAqIDIgKyAxXSA9PT0gMCkgewogICAgICAgICAgICAgIG1heEwgLT0gcDJbaV0ueUFycmF5WzFdOwogICAgICAgICAgICAgIG1heFIgLT0gcDJbaV0ueUFycmF5WzJdOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG1heEwgLT0gcDJbaV0ueUFycmF5WzJdOwogICAgICAgICAgICAgIG1heFIgLT0gcDJbaV0ueUFycmF5WzFdOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAobWF4TCA+IG1heFIpIHsKICAgICAgICAgICAgbWF4ID0gbWF4TDsKICAgICAgICAgICAgbWF4SW5kZXggPSBbcC5pbmRleCAqIDIsIG1heF07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtYXggPSBtYXhSOwogICAgICAgICAgICBtYXhJbmRleCA9IFtwLmluZGV4ICogMiArIDEsIG1heF07CiAgICAgICAgICB9CiAgICAgICAgICBpZiAobWF4ID4gdGhpcy5zdWJNYXhbMV0pIHsKICAgICAgICAgICAgdGhpcy5zdWJNYXggPSBtYXhJbmRleDsKICAgICAgICAgIH0KICAgICAgICAgIC8vIGxldCBub2RlRmxhZ0luZm8xID0gY3VycmVudEZsYWdJbmZvW3AuaW5kZXggKiAyICsgMV07CiAgICAgICAgICAvLyBsZXQgbm9kZUZsYWdJbmZvMiA9IGN1cnJlbnRGbGFnSW5mbzJbcC5pbmRleCAqIDIgKyAxXTsKICAgICAgICAgIC8vIGlmKG5vZGVGbGFnSW5mbzEgPT09IDAgJiYgbm9kZUZsYWdJbmZvMiA9PT0gMCl7CiAgICAgICAgICAvLyAgICAgbWF4ID0gTWF0aC5tYXgocC55QXJyYXlbMV0gLSBwMi55QXJyYXlbMV0sIHAueUFycmF5WzJdIC0gcDIueUFycmF5WzJdKTsKICAgICAgICAgIC8vIH0KICAgICAgICAgIC8vIGVsc2UgaWYobm9kZUZsYWdJbmZvMSA9PT0gMSAmJiBub2RlRmxhZ0luZm8yID09PSAxKXsKICAgICAgICAgIC8vICAgICBtYXggPSBNYXRoLm1heChwLnlBcnJheVsxXSAtIHAyLnlBcnJheVsxXSwgcC55QXJyYXlbMl0gLSBwMi55QXJyYXlbMl0pOwogICAgICAgICAgLy8gfQogICAgICAgICAgLy8gZWxzZXsKICAgICAgICAgIC8vICAgICBtYXggPSBNYXRoLm1heChwLnlBcnJheVsxXSAtIHAyLnlBcnJheVsyXSwgcC55QXJyYXlbMl0gLSBwMi55QXJyYXlbMV0pOwogICAgICAgICAgLy8gfQogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGlmIChwLl9sZWZ0Q2hpbGQpIHsKICAgICAgICAgIC8vIHRlbXBfbWF4TCA9IChwLl9sZWZ0Q2hpbGQueUFycmF5WzJdIC0gcDIuX2xlZnRDaGlsZC55QXJyYXlbMV0pOwogICAgICAgICAgdGVtcF9tYXhMID0gcC5fbGVmdENoaWxkLnlBcnJheVsyXTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcDIubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgaWYgKHAyW2ldLl9sZWZ0Q2hpbGQgIT09IG51bGwpIHsKICAgICAgICAgICAgICB0ZW1wX21heEwgLT0gcDJbaV0uX2xlZnRDaGlsZC55QXJyYXlbMV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHAuX3JpZ2h0Q2hpbGQpIHsKICAgICAgICAgIC8vIHRlbXBfbWF4UiA9IChwLl9yaWdodENoaWxkLnlBcnJheVsyXSAtIHAyLl9yaWdodENoaWxkLnlBcnJheVsxXSk7CiAgICAgICAgICB0ZW1wX21heFIgPSBwLl9yaWdodENoaWxkLnlBcnJheVsyXTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcDIubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgaWYgKHAyW2ldLl9yaWdodENoaWxkICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgdGVtcF9tYXhSIC09IHAyW2ldLl9yaWdodENoaWxkLnlBcnJheVsxXTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAodGVtcF9tYXhMIDw9IHRlbXBfbWF4UiAmJiBwLl9yaWdodENoaWxkKSB7CiAgICAgICAgICAvLyBhbHRlcm5hdGl2ZU5vZGVzLnB1c2goW3AsIHAyLCBwLl9yaWdodENoaWxkLCBwMi5fcmlnaHRDaGlsZCwgdGVtcF9tYXhMXSk7CiAgICAgICAgICAvLyBwID0gcC5fbGVmdENoaWxkOwogICAgICAgICAgLy8gcDIgPSBwMi5fbGVmdENoaWxkOwogICAgICAgICAgbGV0IHRlbXBOb2RlID0gW107CiAgICAgICAgICB0ZW1wTWF4ID0gdGVtcF9tYXhSOwogICAgICAgICAgdGVtcE5vZGUucHVzaChwKTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcDIubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgdGVtcE5vZGUucHVzaChwMltpXSk7CiAgICAgICAgICB9CiAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHAuX2xlZnRDaGlsZCk7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIHRlbXBOb2RlLnB1c2gocDJbaV0uX2xlZnRDaGlsZCk7CiAgICAgICAgICB9CiAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHRlbXBfbWF4TCk7CiAgICAgICAgICBhbHRlcm5hdGl2ZU5vZGVzMi5wdXNoKHRlbXBOb2RlKTsKICAgICAgICAgIHAgPSBwLl9yaWdodENoaWxkOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwMi5sZW5ndGg7ICsraSkgewogICAgICAgICAgICBwMltpXSA9IHAyW2ldLl9yaWdodENoaWxkOwogICAgICAgICAgfQogICAgICAgICAgY291bnQuY291bnQrKzsKICAgICAgICB9IGVsc2UgaWYgKHRlbXBfbWF4TCA+IHRlbXBfbWF4UiAmJiBwLl9sZWZ0Q2hpbGQpIHsKICAgICAgICAgIC8vIGFsdGVybmF0aXZlTm9kZXMucHVzaChbcCwgcDIsIHAuX2xlZnRDaGlsZCwgcDIuX2xlZnRDaGlsZCwgdGVtcF9tYXhSXSk7CiAgICAgICAgICAvLyBwID0gcC5fcmlnaHRDaGlsZDsKICAgICAgICAgIC8vIHAyID0gcDIuX3JpZ2h0Q2hpbGQ7CiAgICAgICAgICBsZXQgdGVtcE5vZGUgPSBbXTsKICAgICAgICAgIHRlbXBNYXggPSB0ZW1wX21heEw7CiAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHApOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwMi5sZW5ndGg7ICsraSkgewogICAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHAyW2ldKTsKICAgICAgICAgIH0KICAgICAgICAgIHRlbXBOb2RlLnB1c2gocC5fcmlnaHRDaGlsZCk7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIHRlbXBOb2RlLnB1c2gocDJbaV0uX3JpZ2h0Q2hpbGQpOwogICAgICAgICAgfQogICAgICAgICAgdGVtcE5vZGUucHVzaCh0ZW1wX21heFIpOwogICAgICAgICAgYWx0ZXJuYXRpdmVOb2RlczIucHVzaCh0ZW1wTm9kZSk7CiAgICAgICAgICBwID0gcC5fbGVmdENoaWxkOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwMi5sZW5ndGg7ICsraSkgewogICAgICAgICAgICBwMltpXSA9IHAyW2ldLl9sZWZ0Q2hpbGQ7CiAgICAgICAgICB9CiAgICAgICAgICBjb3VudC5jb3VudCsrOwogICAgICAgIH0KICAgICAgfQogICAgICAvLyBjb25zb2xlLmxvZygiVGhlIGJvdHRvbSBtYXgoLSk6IiwgbWF4SW5kZXgpOwogICAgICBpZiAoc3RvcmUuc3RhdGUuY29udHJvbFBhcmFtcy5zdG9wRWFybHkgPT09IHRydWUpIHsKICAgICAgICBhbHRlcm5hdGl2ZU5vZGVzID0gW107CiAgICAgICAgYWx0ZXJuYXRpdmVOb2RlczIgPSBbXTsKICAgICAgfQogICAgICBwID0gcHAsIHAyID0gcHAyOwogICAgICB3aGlsZSAoYWx0ZXJuYXRpdmVOb2Rlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2coImFsdGVybmF0aXZlTm9kZXM6IiwgYWx0ZXJuYXRpdmVOb2Rlcyk7CiAgICAgICAgbGV0IHBvcCA9IGFsdGVybmF0aXZlTm9kZXMucG9wKCk7CiAgICAgICAgaWYgKHBvcCA9PT0gdW5kZWZpbmVkKSBjb250aW51ZTsKICAgICAgICAvLyBpZihOdW1iZXIocG9wW3BvcC5sZW5ndGgtMV0pID4gdGhpcy5zdWJNaW5bMV0pIGNvbnRpbnVlOwogICAgICAgIC8vIGxldCBwOltUcmVuZFRyZWUsIG51bWJlcl0gPSBhbHRlcm5hdGl2ZU5vZGVzLnBvcCgpOwogICAgICAgIC8vIGNvbnNvbGUubG9nKCJwb3A6IiwgcG9wKTsKICAgICAgICAvLyBpZihOdW1iZXIocG9wW3BvcC5sZW5ndGgtMV0pID4gbWluKSBjb250aW51ZTsKICAgICAgICAvLyBtaW4gPSB0aGlzLnVwZGF0ZU1pblZhbHVlKHAhWzBdLCBtaW4sIGFsdGVybmF0aXZlTm9kZXMpOwogICAgICAgIGxldCB0ZW1wX21pbkwgPSAwLAogICAgICAgICAgdGVtcF9taW5SID0gMDsKICAgICAgICBsZXQgbGVuID0gcG9wLmxlbmd0aDsKICAgICAgICBpZiAoIXBvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS5fbGVmdENoaWxkICYmICFwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0uX3JpZ2h0Q2hpbGQpIHsKICAgICAgICAgIGxldCBtaW5MID0gMCwKICAgICAgICAgICAgbWluUiA9IDA7CiAgICAgICAgICBsZXQgbm9kZUZsYWdJbmZvMSA9IGN1cnJlbnRGbGFnSW5mb1twb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0uaW5kZXggKiAyICsgMV07CiAgICAgICAgICBpZiAobm9kZUZsYWdJbmZvMSA9PT0gMCkgewogICAgICAgICAgICBtaW5MICs9IHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS55QXJyYXlbMV07CiAgICAgICAgICAgIG1pblIgKz0gcG9wW01hdGguZmxvb3IobGVuIC8gMildLnlBcnJheVsyXTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1pbkwgKz0gcG9wW01hdGguZmxvb3IobGVuIC8gMildLnlBcnJheVsyXTsKICAgICAgICAgICAgbWluUiArPSBwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0ueUFycmF5WzFdOwogICAgICAgICAgfQogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjdXJyZW50RmxhZ0luZm8yLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIGlmIChjdXJyZW50RmxhZ0luZm8yW2ldW3BvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS5pbmRleCAqIDIgKyAxXSA9PT0gMCkgewogICAgICAgICAgICAgIG1pbkwgLT0gcG9wW01hdGguZmxvb3IobGVuIC8gMikgKyBpICsgMV0ueUFycmF5WzFdOwogICAgICAgICAgICAgIG1pblIgLT0gcG9wW01hdGguZmxvb3IobGVuIC8gMikgKyBpICsgMV0ueUFycmF5WzJdOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG1pbkwgLT0gcG9wW01hdGguZmxvb3IobGVuIC8gMikgKyBpICsgMV0ueUFycmF5WzJdOwogICAgICAgICAgICAgIG1pblIgLT0gcG9wW01hdGguZmxvb3IobGVuIC8gMikgKyBpICsgMV0ueUFycmF5WzFdOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAobWluTCA8IG1pblIpIHsKICAgICAgICAgICAgbWluID0gbWluTDsKICAgICAgICAgICAgbWluSW5kZXggPSBbcG9wW01hdGguZmxvb3IobGVuIC8gMildLmluZGV4ICogMiwgbWluXTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1pbiA9IG1pblI7CiAgICAgICAgICAgIG1pbkluZGV4ID0gW3BvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS5pbmRleCAqIDIgKyAxLCBtaW5dOwogICAgICAgICAgfQogICAgICAgICAgaWYgKG1pbiA8IHRoaXMuc3ViTWluWzFdKSB7CiAgICAgICAgICAgIHRoaXMuc3ViTWluID0gbWluSW5kZXg7CiAgICAgICAgICB9CiAgICAgICAgICAvLyBsZXQgbm9kZUZsYWdJbmZvMSA9IGN1cnJlbnRGbGFnSW5mb1socG9wWzJdLmluZGV4KSAqIDIgKyAxXTsKICAgICAgICAgIC8vIGxldCBub2RlRmxhZ0luZm8yID0gY3VycmVudEZsYWdJbmZvMlsocG9wWzJdLmluZGV4KSAqIDIgKyAxXTsKICAgICAgICAgIC8vIGlmKG5vZGVGbGFnSW5mbzEgPT09IDAgJiYgbm9kZUZsYWdJbmZvMiA9PT0gMCl7CiAgICAgICAgICAvLyAgICAgbWluID0gTWF0aC5taW4oTWF0aC5taW4ocG9wWzJdLnlBcnJheVsxXSAtIHBvcFszXS55QXJyYXlbMV0sIHBvcFsyXS55QXJyYXlbMl0gLSBwb3BbM10ueUFycmF5WzJdKSwgbWluKTsKICAgICAgICAgIC8vIH0KICAgICAgICAgIC8vIGVsc2UgaWYobm9kZUZsYWdJbmZvMSA9PT0gMSAmJiBub2RlRmxhZ0luZm8yID09PSAxKXsKICAgICAgICAgIC8vICAgICBtaW4gPSBNYXRoLm1pbihNYXRoLm1pbihwb3BbMl0ueUFycmF5WzFdIC0gcG9wWzNdLnlBcnJheVsxXSwgcG9wWzJdLnlBcnJheVsyXSAtIHBvcFszXS55QXJyYXlbMl0pLCBtaW4pOwogICAgICAgICAgLy8gfQogICAgICAgICAgLy8gZWxzZXsKICAgICAgICAgIC8vICAgICBtaW4gPSBNYXRoLm1pbihNYXRoLm1pbihwb3BbMl0ueUFycmF5WzFdIC0gcG9wWzNdLnlBcnJheVsyXSwgcG9wWzJdLnlBcnJheVsyXSAtIHBvcFszXS55QXJyYXlbMV0pLCBtaW4pOwogICAgICAgICAgLy8gfQogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQogICAgICAgIGlmIChwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0uX2xlZnRDaGlsZCkgewogICAgICAgICAgLy8gdGVtcF9taW5MID0gKHBvcFsyXS5fbGVmdENoaWxkLnlBcnJheVsxXSAtIHBvcFszXS5fbGVmdENoaWxkLnlBcnJheVsyXSk7CiAgICAgICAgICAvLyBpZih0ZW1wX21pbkwgPCBtaW4pCiAgICAgICAgICAvLyAgICAgYWx0ZXJuYXRpdmVOb2Rlcy5wdXNoKFtwb3BbMl0sIHBvcFszXSwgcG9wWzJdLl9sZWZ0Q2hpbGQsIHBvcFszXS5fbGVmdENoaWxkLCB0ZW1wX21pbkxdKTsKICAgICAgICAgIGxldCBpbmRleCA9IE1hdGguZmxvb3IobGVuIC8gMik7CiAgICAgICAgICB0ZW1wX21pbkwgPSBwb3BbaW5kZXhdLl9sZWZ0Q2hpbGQueUFycmF5WzFdOwogICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4ICsgMTsgaSA8IGluZGV4ICogMjsgKytpKSB7CiAgICAgICAgICAgIHRlbXBfbWluTCAtPSBwb3BbaV0uX2xlZnRDaGlsZC55QXJyYXlbMl07CiAgICAgICAgICB9CiAgICAgICAgICAvLyB0ZW1wX21pbkwgPSAocG9wWzJdLl9sZWZ0Q2hpbGQueUFycmF5WzFdICsgcG9wWzNdLl9sZWZ0Q2hpbGQueUFycmF5WzFdKTsKICAgICAgICAgIC8vIGlmKHRlbXBfbWluTCA8IG1pbil7CiAgICAgICAgICBsZXQgdGVtcE5vZGUgPSBbXTsKICAgICAgICAgIGZvciAobGV0IGkgPSBpbmRleDsgaSA8IGluZGV4ICogMjsgKytpKSB7CiAgICAgICAgICAgIHRlbXBOb2RlLnB1c2gocG9wW2ldKTsKICAgICAgICAgIH0KICAgICAgICAgIGZvciAobGV0IGkgPSBpbmRleDsgaSA8IGluZGV4ICogMjsgKytpKSB7CiAgICAgICAgICAgIHRlbXBOb2RlLnB1c2gocG9wW2ldLl9sZWZ0Q2hpbGQpOwogICAgICAgICAgfQogICAgICAgICAgdGVtcE5vZGUucHVzaCh0ZW1wX21pbkwpOwogICAgICAgICAgYWx0ZXJuYXRpdmVOb2Rlcy5wdXNoKHRlbXBOb2RlKTsKICAgICAgICAgIGNvdW50LmNvdW50Kys7CiAgICAgICAgICAvLyB9CiAgICAgICAgfQogICAgICAgIGlmIChwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0uX3JpZ2h0Q2hpbGQpIHsKICAgICAgICAgIC8vIHRlbXBfbWluUiA9IChwb3BbMl0uX3JpZ2h0Q2hpbGQueUFycmF5WzFdIC0gcG9wWzNdLl9yaWdodENoaWxkLnlBcnJheVsyXSk7CiAgICAgICAgICAvLyBpZih0ZW1wX21pblIgPCBtaW4pCiAgICAgICAgICAvLyAgICAgYWx0ZXJuYXRpdmVOb2Rlcy5wdXNoKFtwb3BbMl0sIHBvcFszXSwgcG9wWzJdLl9yaWdodENoaWxkLCBwb3BbM10uX3JpZ2h0Q2hpbGQsIHRlbXBfbWluUl0pOwogICAgICAgICAgbGV0IGluZGV4ID0gTWF0aC5mbG9vcihsZW4gLyAyKTsKICAgICAgICAgIHRlbXBfbWluUiA9IHBvcFtpbmRleF0uX3JpZ2h0Q2hpbGQueUFycmF5WzFdOwogICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4ICsgMTsgaSA8IGluZGV4ICogMjsgKytpKSB7CiAgICAgICAgICAgIHRlbXBfbWluUiAtPSBwb3BbaV0uX3JpZ2h0Q2hpbGQueUFycmF5WzJdOwogICAgICAgICAgfQogICAgICAgICAgLy8gdGVtcF9taW5MID0gKHBvcFsyXS5fbGVmdENoaWxkLnlBcnJheVsxXSArIHBvcFszXS5fbGVmdENoaWxkLnlBcnJheVsxXSk7CiAgICAgICAgICAvLyBpZih0ZW1wX21pblIgPCBtaW4pewogICAgICAgICAgbGV0IHRlbXBOb2RlID0gW107CiAgICAgICAgICBmb3IgKGxldCBpID0gaW5kZXg7IGkgPCBpbmRleCAqIDI7ICsraSkgewogICAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHBvcFtpXSk7CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKGxldCBpID0gaW5kZXg7IGkgPCBpbmRleCAqIDI7ICsraSkgewogICAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHBvcFtpXS5fcmlnaHRDaGlsZCk7CiAgICAgICAgICB9CiAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHRlbXBfbWluUik7CiAgICAgICAgICBhbHRlcm5hdGl2ZU5vZGVzLnB1c2godGVtcE5vZGUpOwogICAgICAgICAgY291bnQuY291bnQrKzsKICAgICAgICAgIC8vIH0KICAgICAgICB9CiAgICAgICAgLy8gY29uc29sZS5sb2coIlRoZSBmaW5hbCBtaW4oLSk6IiwgbWluKTsKICAgICAgICAvLyB0aGlzLnN1Yk1pbiA9IE1hdGgubWluKG1pbiwgdGhpcy5zdWJNaW4pOwogICAgICB9CiAgICAgIHAgPSBwcCwgcDIgPSBwcDI7CiAgICAgIHdoaWxlIChhbHRlcm5hdGl2ZU5vZGVzMi5sZW5ndGggPiAwKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2coImFsdGVybmF0aXZlTm9kZXMyOiIsIGFsdGVybmF0aXZlTm9kZXMyKTsKICAgICAgICBsZXQgcG9wID0gYWx0ZXJuYXRpdmVOb2RlczIucG9wKCk7CiAgICAgICAgaWYgKHBvcCA9PT0gdW5kZWZpbmVkKSBjb250aW51ZTsKICAgICAgICAvLyBpZihOdW1iZXIocG9wW3BvcC5sZW5ndGgtMV0pIDwgdGhpcy5zdWJNYXhbMV0pIGNvbnRpbnVlOwogICAgICAgIC8vIGNvbnNvbGUubG9nKCJwb3A6IiwgcG9wKTsKICAgICAgICAvLyBpZihOdW1iZXIocG9wW3BvcC5sZW5ndGgtMV0pIDwgbWF4KSBjb250aW51ZTsKICAgICAgICBsZXQgbGVuID0gcG9wLmxlbmd0aDsKICAgICAgICBsZXQgdGVtcF9tYXhMID0gMCwKICAgICAgICAgIHRlbXBfbWF4UiA9IDA7CiAgICAgICAgaWYgKCFwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0uX2xlZnRDaGlsZCAmJiAhcG9wW01hdGguZmxvb3IobGVuIC8gMildLl9yaWdodENoaWxkKSB7CiAgICAgICAgICBsZXQgbWF4TCA9IDAsCiAgICAgICAgICAgIG1heFIgPSAwOwogICAgICAgICAgbGV0IG5vZGVGbGFnSW5mbzEgPSBjdXJyZW50RmxhZ0luZm9bcG9wW01hdGguZmxvb3IobGVuIC8gMildLmluZGV4ICogMiArIDFdOwogICAgICAgICAgaWYgKG5vZGVGbGFnSW5mbzEgPT09IDApIHsKICAgICAgICAgICAgbWF4TCArPSBwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0ueUFycmF5WzFdOwogICAgICAgICAgICBtYXhSICs9IHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS55QXJyYXlbMl07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtYXhMICs9IHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS55QXJyYXlbMl07CiAgICAgICAgICAgIG1heFIgKz0gcG9wW01hdGguZmxvb3IobGVuIC8gMildLnlBcnJheVsxXTsKICAgICAgICAgIH0KICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3VycmVudEZsYWdJbmZvMi5sZW5ndGg7ICsraSkgewogICAgICAgICAgICBpZiAoY3VycmVudEZsYWdJbmZvMltpXVtwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0uaW5kZXggKiAyICsgMV0gPT09IDApIHsKICAgICAgICAgICAgICBtYXhMIC09IHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpICsgaSArIDFdLnlBcnJheVsxXTsKICAgICAgICAgICAgICBtYXhSIC09IHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpICsgaSArIDFdLnlBcnJheVsyXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBtYXhMIC09IHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpICsgaSArIDFdLnlBcnJheVsyXTsKICAgICAgICAgICAgICBtYXhSIC09IHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpICsgaSArIDFdLnlBcnJheVsxXTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKG1heEwgPiBtYXhSKSB7CiAgICAgICAgICAgIG1heCA9IG1heEw7CiAgICAgICAgICAgIG1heEluZGV4ID0gW3BvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS5pbmRleCAqIDIsIG1heF07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtYXggPSBtYXhSOwogICAgICAgICAgICBtYXhJbmRleCA9IFtwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0uaW5kZXggKiAyICsgMSwgbWF4XTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChtYXggPiB0aGlzLnN1Yk1heFsxXSkgewogICAgICAgICAgICB0aGlzLnN1Yk1heCA9IG1heEluZGV4OwogICAgICAgICAgfQogICAgICAgICAgLy8gbGV0IG5vZGVGbGFnSW5mbzEgPSBjdXJyZW50RmxhZ0luZm9bKHBvcFsyXS5pbmRleCkgKiAyICsgMV07CiAgICAgICAgICAvLyBsZXQgbm9kZUZsYWdJbmZvMiA9IGN1cnJlbnRGbGFnSW5mbzJbKHBvcFsyXS5pbmRleCkgKiAyICsgMV07CiAgICAgICAgICAvLyBpZihub2RlRmxhZ0luZm8xID09PSAwICYmIG5vZGVGbGFnSW5mbzIgPT09IDApewogICAgICAgICAgLy8gICAgIG1heCA9IE1hdGgubWF4KE1hdGgubWF4KHBvcFsyXS55QXJyYXlbMV0gLSBwb3BbM10ueUFycmF5WzFdLCBwb3BbMl0ueUFycmF5WzJdIC0gcG9wWzNdLnlBcnJheVsyXSksIG1heCk7CiAgICAgICAgICAvLyB9CiAgICAgICAgICAvLyBlbHNlIGlmKG5vZGVGbGFnSW5mbzEgPT09IDEgJiYgbm9kZUZsYWdJbmZvMiA9PT0gMSl7CiAgICAgICAgICAvLyAgICAgbWF4ID0gTWF0aC5tYXgoTWF0aC5tYXgocG9wWzJdLnlBcnJheVsxXSAtIHBvcFszXS55QXJyYXlbMV0sIHBvcFsyXS55QXJyYXlbMl0gLSBwb3BbM10ueUFycmF5WzJdKSwgbWF4KTsKICAgICAgICAgIC8vIH0KICAgICAgICAgIC8vIGVsc2V7CiAgICAgICAgICAvLyAgICAgbWF4ID0gTWF0aC5tYXgoTWF0aC5tYXgocG9wWzJdLnlBcnJheVsxXSAtIHBvcFszXS55QXJyYXlbMl0sIHBvcFsyXS55QXJyYXlbMl0gLSBwb3BbM10ueUFycmF5WzFdKSwgbWF4KTsKICAgICAgICAgIC8vIH0KICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KICAgICAgICBpZiAocG9wW01hdGguZmxvb3IobGVuIC8gMildLl9sZWZ0Q2hpbGQpIHsKICAgICAgICAgIC8vIHRlbXBfbWF4TCA9IChwb3BbMl0uX2xlZnRDaGlsZC55QXJyYXlbMl0gLSBwb3BbM10uX2xlZnRDaGlsZC55QXJyYXlbMV0pOwogICAgICAgICAgLy8gaWYodGVtcF9tYXhMID4gbWF4KQogICAgICAgICAgLy8gICAgIGFsdGVybmF0aXZlTm9kZXMucHVzaChbcG9wWzJdLCBwb3BbM10sIHBvcFsyXS5fbGVmdENoaWxkLCBwb3BbM10uX2xlZnRDaGlsZCwgdGVtcF9tYXhMXSk7CiAgICAgICAgICBsZXQgaW5kZXggPSBNYXRoLmZsb29yKGxlbiAvIDIpOwogICAgICAgICAgdGVtcF9tYXhMID0gcG9wW2luZGV4XS5fbGVmdENoaWxkLnlBcnJheVsyXTsKICAgICAgICAgIGZvciAobGV0IGkgPSBpbmRleCArIDE7IGkgPCBpbmRleCAqIDI7ICsraSkgewogICAgICAgICAgICB0ZW1wX21heEwgLT0gcG9wW2ldLl9sZWZ0Q2hpbGQueUFycmF5WzFdOwogICAgICAgICAgfQogICAgICAgICAgLy8gaWYodGVtcF9tYXhMID4gbWF4KXsKICAgICAgICAgIGxldCB0ZW1wTm9kZSA9IFtdOwogICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4OyBpIDwgaW5kZXggKiAyOyArK2kpIHsKICAgICAgICAgICAgdGVtcE5vZGUucHVzaChwb3BbaV0pOwogICAgICAgICAgfQogICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4OyBpIDwgaW5kZXggKiAyOyArK2kpIHsKICAgICAgICAgICAgdGVtcE5vZGUucHVzaChwb3BbaV0uX2xlZnRDaGlsZCk7CiAgICAgICAgICB9CiAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHRlbXBfbWF4TCk7CiAgICAgICAgICBhbHRlcm5hdGl2ZU5vZGVzMi5wdXNoKHRlbXBOb2RlKTsKICAgICAgICAgIGNvdW50LmNvdW50Kys7CiAgICAgICAgICAvLyB9CiAgICAgICAgfQogICAgICAgIGlmIChwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0uX3JpZ2h0Q2hpbGQpIHsKICAgICAgICAgIC8vIHRlbXBfbWF4UiA9IChwb3BbMl0uX3JpZ2h0Q2hpbGQueUFycmF5WzJdIC0gcG9wWzNdLl9yaWdodENoaWxkLnlBcnJheVsxXSk7CiAgICAgICAgICAvLyBpZih0ZW1wX21heFIgPiBtYXgpCiAgICAgICAgICAvLyAgICAgYWx0ZXJuYXRpdmVOb2Rlcy5wdXNoKFtwb3BbMl0sIHBvcFszXSwgcG9wWzJdLl9yaWdodENoaWxkLCBwb3BbM10uX3JpZ2h0Q2hpbGQsIHRlbXBfbWF4Ul0pOwogICAgICAgICAgbGV0IGluZGV4ID0gTWF0aC5mbG9vcihsZW4gLyAyKTsKICAgICAgICAgIHRlbXBfbWF4UiA9IHBvcFtpbmRleF0uX3JpZ2h0Q2hpbGQueUFycmF5WzJdOwogICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4OyBpIDwgaW5kZXggKiAyOyArK2kpIHsKICAgICAgICAgICAgdGVtcF9tYXhSIC09IHBvcFtpXS5fcmlnaHRDaGlsZC55QXJyYXlbMV07CiAgICAgICAgICB9CiAgICAgICAgICAvLyBpZih0ZW1wX21heFIgPiBtYXgpewogICAgICAgICAgbGV0IHRlbXBOb2RlID0gW107CiAgICAgICAgICBmb3IgKGxldCBpID0gaW5kZXg7IGkgPCBpbmRleCAqIDI7ICsraSkgewogICAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHBvcFtpXSk7CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKGxldCBpID0gaW5kZXg7IGkgPCBpbmRleCAqIDI7ICsraSkgewogICAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHBvcFtpXS5fcmlnaHRDaGlsZCk7CiAgICAgICAgICB9CiAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHRlbXBfbWF4Uik7CiAgICAgICAgICBhbHRlcm5hdGl2ZU5vZGVzMi5wdXNoKHRlbXBOb2RlKTsKICAgICAgICAgIGNvdW50LmNvdW50Kys7CiAgICAgICAgICAvLyB9CiAgICAgICAgfQogICAgICB9CiAgICAgIC8vIGNvbnNvbGUubG9nKCJUaGUgZmluYWwgbWluKC0pOiIsIG1pbkluZGV4KTsKICAgICAgLy8gY29uc29sZS5sb2coIlRoZSBmaW5hbCBtYXgoLSk6IiwgbWF4SW5kZXgpOyAKICAgICAgaWYgKG1pbiA8IHRoaXMuc3ViTWluWzFdKSB7CiAgICAgICAgdGhpcy5zdWJNaW4gPSBtaW5JbmRleDsKICAgICAgfQogICAgICBpZiAobWF4ID4gdGhpcy5zdWJNYXhbMV0pIHsKICAgICAgICB0aGlzLnN1Yk1heCA9IG1heEluZGV4OwogICAgICB9CiAgICB9IGVsc2UgaWYgKCh0eXBlID09PSAxIHx8IHR5cGUgPT09IDcgfHwgdHlwZSA9PT0gOCB8fCB0eXBlID09PSA5KSAmJiBzeW1ib2wgPT09ICcqJykgewogICAgICAvLyBsZXQgcCA9IHBwLCBwMiA9IHBwMjsKICAgICAgbGV0IG1pbjEgPSBwLnlBcnJheVsxXTsKICAgICAgbGV0IG1pbjIgPSAxOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbWluMiAqPSBwMltpXS55QXJyYXlbMV07CiAgICAgIH0KICAgICAgbGV0IG1heDEgPSBwLnlBcnJheVsyXTsKICAgICAgbGV0IG1heDIgPSAxOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgKytpKSB7CiAgICAgICAgbWF4MiAqPSBwMltpXS55QXJyYXlbMl07CiAgICAgIH0KICAgICAgbGV0IG1pbiA9IG1pbjEgKiBtaW4yOwogICAgICBsZXQgbWF4ID0gbWF4MSAqIG1heDI7CiAgICAgIGxldCBtaW5JbmRleDsKICAgICAgbWluSW5kZXggPSBbLTEsIEluZmluaXR5XTsKICAgICAgbGV0IG1heEluZGV4OwogICAgICBtYXhJbmRleCA9IFstMSwgLUluZmluaXR5XTsKICAgICAgbGV0IGFsdGVybmF0aXZlTm9kZXMgPSBbXTsKICAgICAgbGV0IGFsdGVybmF0aXZlTm9kZXMyID0gW107CiAgICAgIHdoaWxlIChtYXggPiAtSW5maW5pdHkpIHsKICAgICAgICBsZXQgdGVtcF9taW5MID0gMCwKICAgICAgICAgIHRlbXBfbWluUiA9IDA7CiAgICAgICAgaWYgKCFwLl9sZWZ0Q2hpbGQgJiYgIXAuX3JpZ2h0Q2hpbGQpIHsKICAgICAgICAgIGxldCBtaW5MID0gMCwKICAgICAgICAgICAgbWluUiA9IDA7CiAgICAgICAgICBsZXQgbm9kZUZsYWdJbmZvMSA9IGN1cnJlbnRGbGFnSW5mb1twLmluZGV4ICogMiArIDFdOwogICAgICAgICAgaWYgKG5vZGVGbGFnSW5mbzEgPT09IDApIHsKICAgICAgICAgICAgbWluTCArPSBwLnlBcnJheVsxXTsKICAgICAgICAgICAgbWluUiArPSBwLnlBcnJheVsyXTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1pbkwgKz0gcC55QXJyYXlbMl07CiAgICAgICAgICAgIG1pblIgKz0gcC55QXJyYXlbMV07CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN1cnJlbnRGbGFnSW5mbzIubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgaWYgKGN1cnJlbnRGbGFnSW5mbzJbaV1bcC5pbmRleCAqIDIgKyAxXSA9PT0gMCkgewogICAgICAgICAgICAgIG1pbkwgKj0gcDJbaV0ueUFycmF5WzFdOwogICAgICAgICAgICAgIG1pblIgKj0gcDJbaV0ueUFycmF5WzJdOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG1pbkwgKj0gcDJbaV0ueUFycmF5WzJdOwogICAgICAgICAgICAgIG1pblIgKj0gcDJbaV0ueUFycmF5WzFdOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAobWluTCA8IG1pblIpIHsKICAgICAgICAgICAgbWluID0gbWluTDsKICAgICAgICAgICAgbWluSW5kZXggPSBbcC5pbmRleCAqIDIsIG1pbl07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtaW4gPSBtaW5SOwogICAgICAgICAgICBtaW5JbmRleCA9IFtwLmluZGV4ICogMiArIDEsIG1pbl07CiAgICAgICAgICB9CiAgICAgICAgICBpZiAobWluIDwgdGhpcy5tdWx0aU1pblsxXSkgewogICAgICAgICAgICB0aGlzLm11bHRpTWluID0gbWluSW5kZXg7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgaWYgKHAuX2xlZnRDaGlsZCkgewogICAgICAgICAgLy8gdGVtcF9taW5MID0gTWF0aC5taW4ocC5fbGVmdENoaWxkLnlBcnJheVsxXSAqIHAyWzBdLl9sZWZ0Q2hpbGQhLnlBcnJheVsxXSwgcC5fbGVmdENoaWxkLnlBcnJheVsxXSAqIHAyWzBdLl9sZWZ0Q2hpbGQhLnlBcnJheVsyXSwgcC5fbGVmdENoaWxkLnlBcnJheVsyXSAqIHAyWzBdLl9sZWZ0Q2hpbGQhLnlBcnJheVsxXSwgcC5fbGVmdENoaWxkLnlBcnJheVsyXSAqIHAyWzBdLl9sZWZ0Q2hpbGQhLnlBcnJheVsyXSk7CiAgICAgICAgICBsZXQgdGVtcEFycmF5ID0gW107CiAgICAgICAgICB0ZW1wQXJyYXkucHVzaChwLl9sZWZ0Q2hpbGQueUFycmF5WzFdKTsKICAgICAgICAgIHRlbXBBcnJheS5wdXNoKHAuX2xlZnRDaGlsZC55QXJyYXlbMl0pOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwMi5sZW5ndGg7ICsraSkgewogICAgICAgICAgICBsZXQgbGVuID0gdGVtcEFycmF5Lmxlbmd0aDsKICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBsZW47ICsraikgewogICAgICAgICAgICAgIHRlbXBBcnJheS5wdXNoKHRlbXBBcnJheVtqXSAqIHAyW2ldLl9sZWZ0Q2hpbGQueUFycmF5WzFdKTsKICAgICAgICAgICAgICB0ZW1wQXJyYXkucHVzaCh0ZW1wQXJyYXlbal0gKiBwMltpXS5fbGVmdENoaWxkLnlBcnJheVsyXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBsZW47ICsraikgewogICAgICAgICAgICAgIHRlbXBBcnJheS5zaGlmdCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0ZW1wQXJyYXkpOwogICAgICAgICAgdGVtcF9taW5MID0gTWF0aC5taW4oLi4udGVtcEFycmF5KTsKICAgICAgICB9CiAgICAgICAgaWYgKHAuX3JpZ2h0Q2hpbGQpIHsKICAgICAgICAgIC8vIHRlbXBfbWluUiA9IE1hdGgubWluKHAuX3JpZ2h0Q2hpbGQueUFycmF5WzFdICogcDJbMF0uX3JpZ2h0Q2hpbGQhLnlBcnJheVsxXSwgcC5fcmlnaHRDaGlsZC55QXJyYXlbMV0gKiBwMlswXS5fcmlnaHRDaGlsZCEueUFycmF5WzJdLCBwLl9yaWdodENoaWxkLnlBcnJheVsyXSAqIHAyWzBdLl9yaWdodENoaWxkIS55QXJyYXlbMV0sIHAuX3JpZ2h0Q2hpbGQueUFycmF5WzJdICogcDJbMF0uX3JpZ2h0Q2hpbGQhLnlBcnJheVsyXSk7CiAgICAgICAgICBsZXQgdGVtcEFycmF5ID0gW107CiAgICAgICAgICB0ZW1wQXJyYXkucHVzaChwLl9yaWdodENoaWxkLnlBcnJheVsxXSk7CiAgICAgICAgICB0ZW1wQXJyYXkucHVzaChwLl9yaWdodENoaWxkLnlBcnJheVsyXSk7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIGxldCBsZW4gPSB0ZW1wQXJyYXkubGVuZ3RoOwogICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGxlbjsgKytqKSB7CiAgICAgICAgICAgICAgdGVtcEFycmF5LnB1c2godGVtcEFycmF5W2pdICogcDJbaV0uX3JpZ2h0Q2hpbGQueUFycmF5WzFdKTsKICAgICAgICAgICAgICB0ZW1wQXJyYXkucHVzaCh0ZW1wQXJyYXlbal0gKiBwMltpXS5fcmlnaHRDaGlsZC55QXJyYXlbMl0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbGVuOyArK2opIHsKICAgICAgICAgICAgICB0ZW1wQXJyYXkuc2hpZnQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgLy8gY29uc29sZS5sb2codGVtcEFycmF5KTsKICAgICAgICAgIHRlbXBfbWluUiA9IE1hdGgubWluKC4uLnRlbXBBcnJheSk7CiAgICAgICAgfQogICAgICAgIGlmICh0ZW1wX21pbkwgPD0gdGVtcF9taW5SICYmIHAuX2xlZnRDaGlsZCkgewogICAgICAgICAgbGV0IHRlbXBOb2RlID0gW107CiAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHApOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwMi5sZW5ndGg7ICsraSkgewogICAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHAyW2ldKTsKICAgICAgICAgIH0KICAgICAgICAgIHRlbXBOb2RlLnB1c2gocC5fcmlnaHRDaGlsZCk7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIHRlbXBOb2RlLnB1c2gocDJbaV0uX3JpZ2h0Q2hpbGQpOwogICAgICAgICAgfQogICAgICAgICAgdGVtcE5vZGUucHVzaCh0ZW1wX21pblIpOwogICAgICAgICAgYWx0ZXJuYXRpdmVOb2Rlcy5wdXNoKHRlbXBOb2RlKTsKICAgICAgICAgIHAgPSBwLl9sZWZ0Q2hpbGQ7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIHAyW2ldID0gcDJbaV0uX2xlZnRDaGlsZDsKICAgICAgICAgIH0KICAgICAgICAgIGNvdW50LmNvdW50Kys7CiAgICAgICAgfSBlbHNlIGlmICh0ZW1wX21pbkwgPiB0ZW1wX21pblIgJiYgcC5fcmlnaHRDaGlsZCkgewogICAgICAgICAgbGV0IHRlbXBOb2RlID0gW107CiAgICAgICAgICAvLyBhbHRlcm5hdGl2ZU5vZGVzLnB1c2goW3AsIHAyLCBwLl9sZWZ0Q2hpbGQsIHAyLl9sZWZ0Q2hpbGQsIHRlbXBfbWluTF0pOwogICAgICAgICAgdGVtcE5vZGUucHVzaChwKTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcDIubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgdGVtcE5vZGUucHVzaChwMltpXSk7CiAgICAgICAgICB9CiAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHAuX2xlZnRDaGlsZCk7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIHRlbXBOb2RlLnB1c2gocDJbaV0uX2xlZnRDaGlsZCk7CiAgICAgICAgICB9CiAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHRlbXBfbWluTCk7CiAgICAgICAgICBwID0gcC5fcmlnaHRDaGlsZDsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcDIubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgcDJbaV0gPSBwMltpXS5fcmlnaHRDaGlsZDsKICAgICAgICAgIH0KICAgICAgICAgIGFsdGVybmF0aXZlTm9kZXMucHVzaCh0ZW1wTm9kZSk7CiAgICAgICAgICBjb3VudC5jb3VudCsrOwogICAgICAgIH0KICAgICAgfQogICAgICAvLyBjb25zb2xlLmxvZygiVGhlIGJvdHRvbSBtaW4oKik6IiwgbWluSW5kZXgpOwogICAgICBwID0gcHAsIHAyID0gcHAyOwogICAgICB3aGlsZSAobWF4ID4gLUluZmluaXR5KSB7CiAgICAgICAgbGV0IHRlbXBfbWF4TCA9IDAsCiAgICAgICAgICB0ZW1wX21heFIgPSAwOwogICAgICAgIGlmICghcC5fbGVmdENoaWxkICYmICFwLl9yaWdodENoaWxkKSB7CiAgICAgICAgICBsZXQgbWF4TCA9IDAsCiAgICAgICAgICAgIG1heFIgPSAwOwogICAgICAgICAgbGV0IG5vZGVGbGFnSW5mbzEgPSBjdXJyZW50RmxhZ0luZm9bcC5pbmRleCAqIDIgKyAxXTsKICAgICAgICAgIGlmIChub2RlRmxhZ0luZm8xID09PSAwKSB7CiAgICAgICAgICAgIG1heEwgKz0gcC55QXJyYXlbMV07CiAgICAgICAgICAgIG1heFIgKz0gcC55QXJyYXlbMl07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtYXhMICs9IHAueUFycmF5WzJdOwogICAgICAgICAgICBtYXhSICs9IHAueUFycmF5WzFdOwogICAgICAgICAgfQogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjdXJyZW50RmxhZ0luZm8yLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIGlmIChjdXJyZW50RmxhZ0luZm8yW2ldW3AuaW5kZXggKiAyICsgMV0gPT09IDApIHsKICAgICAgICAgICAgICBtYXhMICo9IHAyW2ldLnlBcnJheVsxXTsKICAgICAgICAgICAgICBtYXhSICo9IHAyW2ldLnlBcnJheVsyXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBtYXhMICo9IHAyW2ldLnlBcnJheVsyXTsKICAgICAgICAgICAgICBtYXhSICo9IHAyW2ldLnlBcnJheVsxXTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKG1heEwgPiBtYXhSKSB7CiAgICAgICAgICAgIG1heCA9IG1heEw7CiAgICAgICAgICAgIG1heEluZGV4ID0gW3AuaW5kZXggKiAyLCBtYXhdOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbWF4ID0gbWF4UjsKICAgICAgICAgICAgbWF4SW5kZXggPSBbcC5pbmRleCAqIDIgKyAxLCBtYXhdOwogICAgICAgICAgfQogICAgICAgICAgaWYgKG1heCA+IHRoaXMubXVsdGlNYXhbMV0pIHsKICAgICAgICAgICAgdGhpcy5tdWx0aU1heCA9IG1heEluZGV4OwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGlmIChwLl9sZWZ0Q2hpbGQpIHsKICAgICAgICAgIC8vIHRlbXBfbWluTCA9IE1hdGgubWluKHAuX2xlZnRDaGlsZC55QXJyYXlbMV0gKiBwMlswXS5fbGVmdENoaWxkIS55QXJyYXlbMV0sIHAuX2xlZnRDaGlsZC55QXJyYXlbMV0gKiBwMlswXS5fbGVmdENoaWxkIS55QXJyYXlbMl0sIHAuX2xlZnRDaGlsZC55QXJyYXlbMl0gKiBwMlswXS5fbGVmdENoaWxkIS55QXJyYXlbMV0sIHAuX2xlZnRDaGlsZC55QXJyYXlbMl0gKiBwMlswXS5fbGVmdENoaWxkIS55QXJyYXlbMl0pOwogICAgICAgICAgbGV0IHRlbXBBcnJheSA9IFtdOwogICAgICAgICAgdGVtcEFycmF5LnB1c2gocC5fbGVmdENoaWxkLnlBcnJheVsxXSk7CiAgICAgICAgICB0ZW1wQXJyYXkucHVzaChwLl9sZWZ0Q2hpbGQueUFycmF5WzJdKTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcDIubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgbGV0IGxlbiA9IHRlbXBBcnJheS5sZW5ndGg7CiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbGVuOyArK2opIHsKICAgICAgICAgICAgICB0ZW1wQXJyYXkucHVzaCh0ZW1wQXJyYXlbal0gKiBwMltpXS5fbGVmdENoaWxkLnlBcnJheVsxXSk7CiAgICAgICAgICAgICAgdGVtcEFycmF5LnB1c2godGVtcEFycmF5W2pdICogcDJbaV0uX2xlZnRDaGlsZC55QXJyYXlbMl0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbGVuOyArK2opIHsKICAgICAgICAgICAgICB0ZW1wQXJyYXkuc2hpZnQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgLy8gY29uc29sZS5sb2codGVtcEFycmF5KTsKICAgICAgICAgIHRlbXBfbWF4TCA9IE1hdGgubWF4KC4uLnRlbXBBcnJheSk7CiAgICAgICAgfQogICAgICAgIGlmIChwLl9yaWdodENoaWxkKSB7CiAgICAgICAgICAvLyB0ZW1wX21pblIgPSBNYXRoLm1pbihwLl9yaWdodENoaWxkLnlBcnJheVsxXSAqIHAyWzBdLl9yaWdodENoaWxkIS55QXJyYXlbMV0sIHAuX3JpZ2h0Q2hpbGQueUFycmF5WzFdICogcDJbMF0uX3JpZ2h0Q2hpbGQhLnlBcnJheVsyXSwgcC5fcmlnaHRDaGlsZC55QXJyYXlbMl0gKiBwMlswXS5fcmlnaHRDaGlsZCEueUFycmF5WzFdLCBwLl9yaWdodENoaWxkLnlBcnJheVsyXSAqIHAyWzBdLl9yaWdodENoaWxkIS55QXJyYXlbMl0pOwogICAgICAgICAgbGV0IHRlbXBBcnJheSA9IFtdOwogICAgICAgICAgdGVtcEFycmF5LnB1c2gocC5fcmlnaHRDaGlsZC55QXJyYXlbMV0pOwogICAgICAgICAgdGVtcEFycmF5LnB1c2gocC5fcmlnaHRDaGlsZC55QXJyYXlbMl0pOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwMi5sZW5ndGg7ICsraSkgewogICAgICAgICAgICBsZXQgbGVuID0gdGVtcEFycmF5Lmxlbmd0aDsKICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBsZW47ICsraikgewogICAgICAgICAgICAgIHRlbXBBcnJheS5wdXNoKHRlbXBBcnJheVtqXSAqIHAyW2ldLl9yaWdodENoaWxkLnlBcnJheVsxXSk7CiAgICAgICAgICAgICAgdGVtcEFycmF5LnB1c2godGVtcEFycmF5W2pdICogcDJbaV0uX3JpZ2h0Q2hpbGQueUFycmF5WzJdKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGxlbjsgKytqKSB7CiAgICAgICAgICAgICAgdGVtcEFycmF5LnNoaWZ0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRlbXBBcnJheSk7CiAgICAgICAgICB0ZW1wX21heFIgPSBNYXRoLm1heCguLi50ZW1wQXJyYXkpOwogICAgICAgIH0KICAgICAgICBpZiAodGVtcF9tYXhMIDw9IHRlbXBfbWF4UiAmJiBwLl9yaWdodENoaWxkKSB7CiAgICAgICAgICBsZXQgdGVtcE5vZGUgPSBbXTsKICAgICAgICAgIHRlbXBOb2RlLnB1c2gocCk7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIHRlbXBOb2RlLnB1c2gocDJbaV0pOwogICAgICAgICAgfQogICAgICAgICAgdGVtcE5vZGUucHVzaChwLl9sZWZ0Q2hpbGQpOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwMi5sZW5ndGg7ICsraSkgewogICAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHAyW2ldLl9sZWZ0Q2hpbGQpOwogICAgICAgICAgfQogICAgICAgICAgdGVtcE5vZGUucHVzaCh0ZW1wX21heEwpOwogICAgICAgICAgYWx0ZXJuYXRpdmVOb2RlczIucHVzaCh0ZW1wTm9kZSk7CiAgICAgICAgICBwID0gcC5fcmlnaHRDaGlsZDsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcDIubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgcDJbaV0gPSBwMltpXS5fcmlnaHRDaGlsZDsKICAgICAgICAgIH0KICAgICAgICAgIGNvdW50LmNvdW50Kys7CiAgICAgICAgfSBlbHNlIGlmICh0ZW1wX21heEwgPiB0ZW1wX21heFIgJiYgcC5fbGVmdENoaWxkKSB7CiAgICAgICAgICBsZXQgdGVtcE5vZGUgPSBbXTsKICAgICAgICAgIC8vIGFsdGVybmF0aXZlTm9kZXMucHVzaChbcCwgcDIsIHAuX2xlZnRDaGlsZCwgcDIuX2xlZnRDaGlsZCwgdGVtcF9taW5MXSk7CiAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHApOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwMi5sZW5ndGg7ICsraSkgewogICAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHAyW2ldKTsKICAgICAgICAgIH0KICAgICAgICAgIHRlbXBOb2RlLnB1c2gocC5fcmlnaHRDaGlsZCk7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIHRlbXBOb2RlLnB1c2gocDJbaV0uX3JpZ2h0Q2hpbGQpOwogICAgICAgICAgfQogICAgICAgICAgdGVtcE5vZGUucHVzaCh0ZW1wX21heFIpOwogICAgICAgICAgYWx0ZXJuYXRpdmVOb2RlczIucHVzaCh0ZW1wTm9kZSk7CiAgICAgICAgICBwID0gcC5fbGVmdENoaWxkOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwMi5sZW5ndGg7ICsraSkgewogICAgICAgICAgICBwMltpXSA9IHAyW2ldLl9sZWZ0Q2hpbGQ7CiAgICAgICAgICB9CiAgICAgICAgICBjb3VudC5jb3VudCsrOwogICAgICAgIH0KICAgICAgfQogICAgICAvLyBjb25zb2xlLmxvZygiVGhlIGJvdHRvbSBtYXgoKik6IiwgbWF4SW5kZXgpOwogICAgICBpZiAoc3RvcmUuc3RhdGUuY29udHJvbFBhcmFtcy5zdG9wRWFybHkgPT09IHRydWUpIHsKICAgICAgICBhbHRlcm5hdGl2ZU5vZGVzID0gW107CiAgICAgICAgYWx0ZXJuYXRpdmVOb2RlczIgPSBbXTsKICAgICAgfQogICAgICBwID0gcHAsIHAyID0gcHAyOwogICAgICB3aGlsZSAoYWx0ZXJuYXRpdmVOb2Rlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgbGV0IHBvcCA9IGFsdGVybmF0aXZlTm9kZXMucG9wKCk7CiAgICAgICAgaWYgKHBvcCA9PT0gdW5kZWZpbmVkKSBjb250aW51ZTsKICAgICAgICAvLyBpZihOdW1iZXIocG9wW3BvcC5sZW5ndGgtMV0pID4gdGhpcy5tdWx0aU1pblsxXSkgY29udGludWU7CiAgICAgICAgLy8gaWYoTnVtYmVyKHBvcFtwb3AubGVuZ3RoLTFdKSA+IG1pbikgY29udGludWU7CiAgICAgICAgbGV0IGxlbiA9IHBvcC5sZW5ndGg7CiAgICAgICAgbGV0IHRlbXBfbWluTCA9IDAsCiAgICAgICAgICB0ZW1wX21pblIgPSAwOwogICAgICAgIGlmICghcG9wW01hdGguZmxvb3IobGVuIC8gMildLl9sZWZ0Q2hpbGQgJiYgIXBvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS5fcmlnaHRDaGlsZCkgewogICAgICAgICAgbGV0IG1pbkwgPSAwLAogICAgICAgICAgICBtaW5SID0gMDsKICAgICAgICAgIGxldCBub2RlRmxhZ0luZm8xID0gY3VycmVudEZsYWdJbmZvW3BvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS5pbmRleCAqIDIgKyAxXTsKICAgICAgICAgIGlmIChub2RlRmxhZ0luZm8xID09PSAwKSB7CiAgICAgICAgICAgIG1pbkwgKz0gcG9wW01hdGguZmxvb3IobGVuIC8gMildLnlBcnJheVsxXTsKICAgICAgICAgICAgbWluUiArPSBwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0ueUFycmF5WzJdOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbWluTCArPSBwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0ueUFycmF5WzJdOwogICAgICAgICAgICBtaW5SICs9IHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS55QXJyYXlbMV07CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN1cnJlbnRGbGFnSW5mbzIubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgaWYgKGN1cnJlbnRGbGFnSW5mbzJbaV1bcG9wW01hdGguZmxvb3IobGVuIC8gMildLmluZGV4ICogMiArIDFdID09PSAwKSB7CiAgICAgICAgICAgICAgbWluTCAqPSBwb3BbTWF0aC5mbG9vcihsZW4gLyAyKSArIGkgKyAxXS55QXJyYXlbMV07CiAgICAgICAgICAgICAgbWluUiAqPSBwb3BbTWF0aC5mbG9vcihsZW4gLyAyKSArIGkgKyAxXS55QXJyYXlbMl07CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgbWluTCAqPSBwb3BbTWF0aC5mbG9vcihsZW4gLyAyKSArIGkgKyAxXS55QXJyYXlbMl07CiAgICAgICAgICAgICAgbWluUiAqPSBwb3BbTWF0aC5mbG9vcihsZW4gLyAyKSArIGkgKyAxXS55QXJyYXlbMV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChtaW5MID4gbWluUikgewogICAgICAgICAgICBtaW4gPSBtaW5MOwogICAgICAgICAgICBtaW5JbmRleCA9IFtwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0uaW5kZXggKiAyLCBtaW5dOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbWluID0gbWluUjsKICAgICAgICAgICAgbWluSW5kZXggPSBbcG9wW01hdGguZmxvb3IobGVuIC8gMildLmluZGV4ICogMiArIDEsIG1pbl07CiAgICAgICAgICB9CiAgICAgICAgICBpZiAobWluIDwgdGhpcy5tdWx0aU1pblsxXSkgewogICAgICAgICAgICB0aGlzLm11bHRpTWluID0gbWluSW5kZXg7CiAgICAgICAgICB9CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgICAgaWYgKHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS5fbGVmdENoaWxkKSB7CiAgICAgICAgICBsZXQgaW5kZXggPSBNYXRoLmZsb29yKGxlbiAvIDIpOwogICAgICAgICAgbGV0IHRlbXBBcnJheSA9IFtdOwogICAgICAgICAgdGVtcEFycmF5LnB1c2gocG9wW2luZGV4XS5fbGVmdENoaWxkLnlBcnJheVsxXSk7CiAgICAgICAgICB0ZW1wQXJyYXkucHVzaChwb3BbaW5kZXhdLl9sZWZ0Q2hpbGQueUFycmF5WzJdKTsKICAgICAgICAgIGZvciAobGV0IGkgPSBpbmRleCArIDE7IGkgPCBpbmRleCAqIDI7ICsraSkgewogICAgICAgICAgICBsZXQgbGVuID0gdGVtcEFycmF5Lmxlbmd0aDsKICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBsZW47ICsraikgewogICAgICAgICAgICAgIHRlbXBBcnJheS5wdXNoKHRlbXBBcnJheVtqXSAqIHBvcFtpXS5fbGVmdENoaWxkLnlBcnJheVsxXSk7CiAgICAgICAgICAgICAgdGVtcEFycmF5LnB1c2godGVtcEFycmF5W2pdICogcG9wW2ldLl9sZWZ0Q2hpbGQueUFycmF5WzJdKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGxlbjsgKytqKSB7CiAgICAgICAgICAgICAgdGVtcEFycmF5LnNoaWZ0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRlbXBBcnJheSk7CiAgICAgICAgICB0ZW1wX21pbkwgPSBNYXRoLm1pbiguLi50ZW1wQXJyYXkpOwogICAgICAgICAgLy8gaWYodGVtcF9taW5MIDwgbWluIHx8IHRlbXBfbWluTCA+PSBtaW4pewogICAgICAgICAgbGV0IHRlbXBOb2RlID0gW107CiAgICAgICAgICBmb3IgKGxldCBpID0gaW5kZXg7IGkgPCBpbmRleCAqIDI7ICsraSkgewogICAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHBvcFtpXSk7CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKGxldCBpID0gaW5kZXg7IGkgPCBpbmRleCAqIDI7ICsraSkgewogICAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHBvcFtpXS5fbGVmdENoaWxkKTsKICAgICAgICAgIH0KICAgICAgICAgIHRlbXBOb2RlLnB1c2godGVtcF9taW5MKTsKICAgICAgICAgIGFsdGVybmF0aXZlTm9kZXMucHVzaCh0ZW1wTm9kZSk7CiAgICAgICAgICBjb3VudC5jb3VudCsrOwogICAgICAgICAgLy8gfQogICAgICAgIH0KICAgICAgICBpZiAocG9wW01hdGguZmxvb3IobGVuIC8gMildLl9yaWdodENoaWxkKSB7CiAgICAgICAgICBsZXQgaW5kZXggPSBNYXRoLmZsb29yKGxlbiAvIDIpOwogICAgICAgICAgbGV0IHRlbXBBcnJheSA9IFtdOwogICAgICAgICAgdGVtcEFycmF5LnB1c2gocG9wW2luZGV4XS5fcmlnaHRDaGlsZC55QXJyYXlbMV0pOwogICAgICAgICAgdGVtcEFycmF5LnB1c2gocG9wW2luZGV4XS5fcmlnaHRDaGlsZC55QXJyYXlbMl0pOwogICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4ICsgMTsgaSA8IGluZGV4ICogMjsgKytpKSB7CiAgICAgICAgICAgIGxldCBsZW4gPSB0ZW1wQXJyYXkubGVuZ3RoOwogICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGxlbjsgKytqKSB7CiAgICAgICAgICAgICAgdGVtcEFycmF5LnB1c2godGVtcEFycmF5W2pdICogcG9wW2ldLl9yaWdodENoaWxkLnlBcnJheVsxXSk7CiAgICAgICAgICAgICAgdGVtcEFycmF5LnB1c2godGVtcEFycmF5W2pdICogcG9wW2ldLl9yaWdodENoaWxkLnlBcnJheVsyXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBsZW47ICsraikgewogICAgICAgICAgICAgIHRlbXBBcnJheS5zaGlmdCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0ZW1wQXJyYXkpOwogICAgICAgICAgdGVtcF9taW5SID0gTWF0aC5taW4oLi4udGVtcEFycmF5KTsKICAgICAgICAgIC8vIGlmKHRlbXBfbWluUiA8IG1pbiB8fCB0ZW1wX21pblIgPj0gbWluKXsKICAgICAgICAgIGxldCB0ZW1wTm9kZSA9IFtdOwogICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4OyBpIDwgaW5kZXggKiAyOyArK2kpIHsKICAgICAgICAgICAgdGVtcE5vZGUucHVzaChwb3BbaV0pOwogICAgICAgICAgfQogICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4OyBpIDwgaW5kZXggKiAyOyArK2kpIHsKICAgICAgICAgICAgdGVtcE5vZGUucHVzaChwb3BbaV0uX3JpZ2h0Q2hpbGQpOwogICAgICAgICAgfQogICAgICAgICAgdGVtcE5vZGUucHVzaCh0ZW1wX21pblIpOwogICAgICAgICAgYWx0ZXJuYXRpdmVOb2Rlcy5wdXNoKHRlbXBOb2RlKTsKICAgICAgICAgIGNvdW50LmNvdW50Kys7CiAgICAgICAgICAvLyB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHAgPSBwcCwgcDIgPSBwcDI7CiAgICAgIHdoaWxlIChhbHRlcm5hdGl2ZU5vZGVzMi5sZW5ndGggPiAwKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2coImFsdGVybmF0aXZlTm9kZXMyOiIsIGFsdGVybmF0aXZlTm9kZXMyKTsKICAgICAgICBsZXQgcG9wID0gYWx0ZXJuYXRpdmVOb2RlczIucG9wKCk7CiAgICAgICAgaWYgKHBvcCA9PT0gdW5kZWZpbmVkKSBjb250aW51ZTsKICAgICAgICAvLyBpZihOdW1iZXIocG9wW3BvcC5sZW5ndGgtMV0pIDwgdGhpcy5tdWx0aU1heFsxXSkgY29udGludWU7CiAgICAgICAgLy8gY29uc29sZS5sb2coInBvcDoiLCBwb3ApOwogICAgICAgIC8vIGlmKE51bWJlcihwb3BbcG9wLmxlbmd0aC0xXSkgPCBtYXgpIGNvbnRpbnVlOwogICAgICAgIGxldCBsZW4gPSBwb3AubGVuZ3RoOwogICAgICAgIGxldCB0ZW1wX21heEwgPSAwLAogICAgICAgICAgdGVtcF9tYXhSID0gMDsKICAgICAgICBpZiAoIXBvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS5fbGVmdENoaWxkICYmICFwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0uX3JpZ2h0Q2hpbGQpIHsKICAgICAgICAgIGxldCBtYXhMID0gMCwKICAgICAgICAgICAgbWF4UiA9IDA7CiAgICAgICAgICBsZXQgbm9kZUZsYWdJbmZvMSA9IGN1cnJlbnRGbGFnSW5mb1twb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0uaW5kZXggKiAyICsgMV07CiAgICAgICAgICBpZiAobm9kZUZsYWdJbmZvMSA9PT0gMCkgewogICAgICAgICAgICBtYXhMICs9IHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS55QXJyYXlbMV07CiAgICAgICAgICAgIG1heFIgKz0gcG9wW01hdGguZmxvb3IobGVuIC8gMildLnlBcnJheVsyXTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1heEwgKz0gcG9wW01hdGguZmxvb3IobGVuIC8gMildLnlBcnJheVsyXTsKICAgICAgICAgICAgbWF4UiArPSBwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0ueUFycmF5WzFdOwogICAgICAgICAgfQogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjdXJyZW50RmxhZ0luZm8yLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIGlmIChjdXJyZW50RmxhZ0luZm8yW2ldW3BvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS5pbmRleCAqIDIgKyAxXSA9PT0gMCkgewogICAgICAgICAgICAgIG1heEwgKj0gcG9wW01hdGguZmxvb3IobGVuIC8gMikgKyBpICsgMV0ueUFycmF5WzFdOwogICAgICAgICAgICAgIG1heFIgKj0gcG9wW01hdGguZmxvb3IobGVuIC8gMikgKyBpICsgMV0ueUFycmF5WzJdOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG1heEwgKj0gcG9wW01hdGguZmxvb3IobGVuIC8gMikgKyBpICsgMV0ueUFycmF5WzJdOwogICAgICAgICAgICAgIG1heFIgKj0gcG9wW01hdGguZmxvb3IobGVuIC8gMikgKyBpICsgMV0ueUFycmF5WzFdOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAobWF4TCA+IG1heFIpIHsKICAgICAgICAgICAgbWF4ID0gbWF4TDsKICAgICAgICAgICAgbWF4SW5kZXggPSBbcG9wW01hdGguZmxvb3IobGVuIC8gMildLmluZGV4ICogMiwgbWF4XTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1heCA9IG1heFI7CiAgICAgICAgICAgIG1heEluZGV4ID0gW3BvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS5pbmRleCAqIDIgKyAxLCBtYXhdOwogICAgICAgICAgfQogICAgICAgICAgaWYgKG1heCA+IHRoaXMubXVsdGlNYXhbMV0pIHsKICAgICAgICAgICAgdGhpcy5tdWx0aU1heCA9IG1heEluZGV4OwogICAgICAgICAgfQogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQogICAgICAgIGlmIChwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0uX2xlZnRDaGlsZCkgewogICAgICAgICAgbGV0IGluZGV4ID0gTWF0aC5mbG9vcihsZW4gLyAyKTsKICAgICAgICAgIGxldCB0ZW1wQXJyYXkgPSBbXTsKICAgICAgICAgIHRlbXBBcnJheS5wdXNoKHBvcFtpbmRleF0uX2xlZnRDaGlsZC55QXJyYXlbMV0pOwogICAgICAgICAgdGVtcEFycmF5LnB1c2gocG9wW2luZGV4XS5fbGVmdENoaWxkLnlBcnJheVsyXSk7CiAgICAgICAgICBmb3IgKGxldCBpID0gaW5kZXggKyAxOyBpIDwgaW5kZXggKiAyOyArK2kpIHsKICAgICAgICAgICAgbGV0IGxlbiA9IHRlbXBBcnJheS5sZW5ndGg7CiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbGVuOyArK2opIHsKICAgICAgICAgICAgICB0ZW1wQXJyYXkucHVzaCh0ZW1wQXJyYXlbal0gKiBwb3BbaV0uX2xlZnRDaGlsZC55QXJyYXlbMV0pOwogICAgICAgICAgICAgIHRlbXBBcnJheS5wdXNoKHRlbXBBcnJheVtqXSAqIHBvcFtpXS5fbGVmdENoaWxkLnlBcnJheVsyXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBsZW47ICsraikgewogICAgICAgICAgICAgIHRlbXBBcnJheS5zaGlmdCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0ZW1wQXJyYXkpOwogICAgICAgICAgdGVtcF9tYXhMID0gTWF0aC5tYXgoLi4udGVtcEFycmF5KTsKICAgICAgICAgIC8vIGlmKHRlbXBfbWF4TCA+IG1heCB8fCB0ZW1wX21heEwgPD0gbWF4KXsKICAgICAgICAgIGxldCB0ZW1wTm9kZSA9IFtdOwogICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4OyBpIDwgaW5kZXggKiAyOyArK2kpIHsKICAgICAgICAgICAgdGVtcE5vZGUucHVzaChwb3BbaV0pOwogICAgICAgICAgfQogICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4OyBpIDwgaW5kZXggKiAyOyArK2kpIHsKICAgICAgICAgICAgdGVtcE5vZGUucHVzaChwb3BbaV0uX2xlZnRDaGlsZCk7CiAgICAgICAgICB9CiAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHRlbXBfbWF4TCk7CiAgICAgICAgICBhbHRlcm5hdGl2ZU5vZGVzMi5wdXNoKHRlbXBOb2RlKTsKICAgICAgICAgIGNvdW50LmNvdW50Kys7CiAgICAgICAgICAvLyB9CiAgICAgICAgfQogICAgICAgIGlmIChwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0uX3JpZ2h0Q2hpbGQpIHsKICAgICAgICAgIGxldCBpbmRleCA9IE1hdGguZmxvb3IobGVuIC8gMik7CiAgICAgICAgICBsZXQgdGVtcEFycmF5ID0gW107CiAgICAgICAgICB0ZW1wQXJyYXkucHVzaChwb3BbaW5kZXhdLl9yaWdodENoaWxkLnlBcnJheVsxXSk7CiAgICAgICAgICB0ZW1wQXJyYXkucHVzaChwb3BbaW5kZXhdLl9yaWdodENoaWxkLnlBcnJheVsyXSk7CiAgICAgICAgICBmb3IgKGxldCBpID0gaW5kZXggKyAxOyBpIDwgaW5kZXggKiAyOyArK2kpIHsKICAgICAgICAgICAgbGV0IGxlbiA9IHRlbXBBcnJheS5sZW5ndGg7CiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbGVuOyArK2opIHsKICAgICAgICAgICAgICB0ZW1wQXJyYXkucHVzaCh0ZW1wQXJyYXlbal0gKiBwb3BbaV0uX3JpZ2h0Q2hpbGQueUFycmF5WzFdKTsKICAgICAgICAgICAgICB0ZW1wQXJyYXkucHVzaCh0ZW1wQXJyYXlbal0gKiBwb3BbaV0uX3JpZ2h0Q2hpbGQueUFycmF5WzJdKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGxlbjsgKytqKSB7CiAgICAgICAgICAgICAgdGVtcEFycmF5LnNoaWZ0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRlbXBBcnJheSk7CiAgICAgICAgICB0ZW1wX21heFIgPSBNYXRoLm1heCguLi50ZW1wQXJyYXkpOwogICAgICAgICAgLy8gaWYodGVtcF9tYXhSID4gbWF4IHx8IHRlbXBfbWF4UiA8PSBtYXgpewogICAgICAgICAgbGV0IHRlbXBOb2RlID0gW107CiAgICAgICAgICBmb3IgKGxldCBpID0gaW5kZXg7IGkgPCBpbmRleCAqIDI7ICsraSkgewogICAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHBvcFtpXSk7CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKGxldCBpID0gaW5kZXg7IGkgPCBpbmRleCAqIDI7ICsraSkgewogICAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHBvcFtpXS5fcmlnaHRDaGlsZCk7CiAgICAgICAgICB9CiAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHRlbXBfbWF4Uik7CiAgICAgICAgICBhbHRlcm5hdGl2ZU5vZGVzMi5wdXNoKHRlbXBOb2RlKTsKICAgICAgICAgIGNvdW50LmNvdW50Kys7CiAgICAgICAgICAvLyB9CiAgICAgICAgfQogICAgICB9CiAgICAgIC8vIGNvbnNvbGUubG9nKCJUaGUgZmluYWwgbWluKCopOiIsIG1pbkluZGV4KTsKICAgICAgLy8gY29uc29sZS5sb2coIlRoZSBmaW5hbCBtYXgoKik6IiwgbWF4SW5kZXgpOwogICAgICBpZiAobWluIDwgdGhpcy5tdWx0aU1pblsxXSkgewogICAgICAgIHRoaXMubXVsdGlNaW4gPSBtaW5JbmRleDsKICAgICAgfQogICAgICBpZiAobWF4ID4gdGhpcy5tdWx0aU1heFsxXSkgewogICAgICAgIHRoaXMubXVsdGlNYXggPSBtYXhJbmRleDsKICAgICAgfQogICAgfSBlbHNlIGlmICgodHlwZSA9PT0gMSB8fCB0eXBlID09PSA3IHx8IHR5cGUgPT09IDggfHwgdHlwZSA9PT0gOSkgJiYgc3ltYm9sID09PSAnLycpIHsKICAgICAgLy8gbGV0IHAgPSBwcCwgcDIgPSBwcDI7CiAgICAgIGxldCBtaW4xID0gcC55QXJyYXlbMV07CiAgICAgIGxldCBtaW4yID0gMTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwMi5sZW5ndGg7IGkrKykgewogICAgICAgIG1pbjIgKj0gcDJbaV0ueUFycmF5WzFdOwogICAgICB9CiAgICAgIGxldCBtYXgxID0gcC55QXJyYXlbMl07CiAgICAgIGxldCBtYXgyID0gMTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwMi5sZW5ndGg7ICsraSkgewogICAgICAgIG1heDIgKj0gcDJbaV0ueUFycmF5WzJdOwogICAgICB9CiAgICAgIGxldCBtaW4gPSBtaW4xIC8gbWF4MjsKICAgICAgbGV0IG1heCA9IG1heDEgLyBtaW4yOwogICAgICBsZXQgbWluSW5kZXg7CiAgICAgIG1pbkluZGV4ID0gWy0xLCBJbmZpbml0eV07CiAgICAgIGxldCBtYXhJbmRleDsKICAgICAgbWF4SW5kZXggPSBbLTEsIC1JbmZpbml0eV07CiAgICAgIGxldCBhbHRlcm5hdGl2ZU5vZGVzID0gW107CiAgICAgIGxldCBhbHRlcm5hdGl2ZU5vZGVzMiA9IFtdOwogICAgICB3aGlsZSAobWF4ID4gLUluZmluaXR5KSB7CiAgICAgICAgbGV0IHRlbXBfbWluTCA9IDAsCiAgICAgICAgICB0ZW1wX21pblIgPSAwOwogICAgICAgIGlmICghcC5fbGVmdENoaWxkICYmICFwLl9yaWdodENoaWxkKSB7CiAgICAgICAgICBsZXQgbWluTCA9IDAsCiAgICAgICAgICAgIG1pblIgPSAwOwogICAgICAgICAgbGV0IG5vZGVGbGFnSW5mbzEgPSBjdXJyZW50RmxhZ0luZm9bcC5pbmRleCAqIDIgKyAxXTsKICAgICAgICAgIGlmIChub2RlRmxhZ0luZm8xID09PSAwKSB7CiAgICAgICAgICAgIG1pbkwgKz0gcC55QXJyYXlbMV07CiAgICAgICAgICAgIG1pblIgKz0gcC55QXJyYXlbMl07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtaW5MICs9IHAueUFycmF5WzJdOwogICAgICAgICAgICBtaW5SICs9IHAueUFycmF5WzFdOwogICAgICAgICAgfQogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjdXJyZW50RmxhZ0luZm8yLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIGlmIChjdXJyZW50RmxhZ0luZm8yW2ldW3AuaW5kZXggKiAyICsgMV0gPT09IDApIHsKICAgICAgICAgICAgICBtaW5MIC89IHAyW2ldLnlBcnJheVsxXTsKICAgICAgICAgICAgICBtaW5SIC89IHAyW2ldLnlBcnJheVsyXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBtaW5MIC89IHAyW2ldLnlBcnJheVsyXTsKICAgICAgICAgICAgICBtaW5SIC89IHAyW2ldLnlBcnJheVsxXTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKG1pbkwgPCBtaW5SKSB7CiAgICAgICAgICAgIG1pbiA9IG1pbkw7CiAgICAgICAgICAgIG1pbkluZGV4ID0gW3AuaW5kZXggKiAyLCBtaW5dOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbWluID0gbWluUjsKICAgICAgICAgICAgbWluSW5kZXggPSBbcC5pbmRleCAqIDIgKyAxLCBtaW5dOwogICAgICAgICAgfQogICAgICAgICAgaWYgKG1pbiA8IHRoaXMuZGl2TWluWzFdKSB7CiAgICAgICAgICAgIHRoaXMuZGl2TWluID0gbWluSW5kZXg7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgaWYgKHAuX2xlZnRDaGlsZCkgewogICAgICAgICAgLy8gdGVtcF9taW5MID0gTWF0aC5taW4ocC5fbGVmdENoaWxkLnlBcnJheVsxXSAqIHAyWzBdLl9sZWZ0Q2hpbGQhLnlBcnJheVsxXSwgcC5fbGVmdENoaWxkLnlBcnJheVsxXSAqIHAyWzBdLl9sZWZ0Q2hpbGQhLnlBcnJheVsyXSwgcC5fbGVmdENoaWxkLnlBcnJheVsyXSAqIHAyWzBdLl9sZWZ0Q2hpbGQhLnlBcnJheVsxXSwgcC5fbGVmdENoaWxkLnlBcnJheVsyXSAqIHAyWzBdLl9sZWZ0Q2hpbGQhLnlBcnJheVsyXSk7CiAgICAgICAgICB0ZW1wX21pbkwgPSBwLl9sZWZ0Q2hpbGQueUFycmF5WzFdOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwMi5sZW5ndGg7ICsraSkgewogICAgICAgICAgICBpZiAocDJbaV0uX2xlZnRDaGlsZCAhPT0gbnVsbCkgewogICAgICAgICAgICAgIHRlbXBfbWluTCAvPSBwMltpXS5fbGVmdENoaWxkLnlBcnJheVsyXTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAocC5fcmlnaHRDaGlsZCkgewogICAgICAgICAgLy8gdGVtcF9taW5SID0gTWF0aC5taW4ocC5fcmlnaHRDaGlsZC55QXJyYXlbMV0gKiBwMlswXS5fcmlnaHRDaGlsZCEueUFycmF5WzFdLCBwLl9yaWdodENoaWxkLnlBcnJheVsxXSAqIHAyWzBdLl9yaWdodENoaWxkIS55QXJyYXlbMl0sIHAuX3JpZ2h0Q2hpbGQueUFycmF5WzJdICogcDJbMF0uX3JpZ2h0Q2hpbGQhLnlBcnJheVsxXSwgcC5fcmlnaHRDaGlsZC55QXJyYXlbMl0gKiBwMlswXS5fcmlnaHRDaGlsZCEueUFycmF5WzJdKTsKICAgICAgICAgIHRlbXBfbWluTCA9IHAuX3JpZ2h0Q2hpbGQueUFycmF5WzFdOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwMi5sZW5ndGg7ICsraSkgewogICAgICAgICAgICBpZiAocDJbaV0uX3JpZ2h0Q2hpbGQgIT09IG51bGwpIHsKICAgICAgICAgICAgICB0ZW1wX21pbkwgLz0gcDJbaV0uX2xlZnRDaGlsZC55QXJyYXlbMl07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHRlbXBfbWluTCA8PSB0ZW1wX21pblIgJiYgcC5fbGVmdENoaWxkKSB7CiAgICAgICAgICBsZXQgdGVtcE5vZGUgPSBbXTsKICAgICAgICAgIHRlbXBOb2RlLnB1c2gocCk7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIHRlbXBOb2RlLnB1c2gocDJbaV0pOwogICAgICAgICAgfQogICAgICAgICAgdGVtcE5vZGUucHVzaChwLl9yaWdodENoaWxkKTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcDIubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgdGVtcE5vZGUucHVzaChwMltpXS5fcmlnaHRDaGlsZCk7CiAgICAgICAgICB9CiAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHRlbXBfbWluUik7CiAgICAgICAgICBhbHRlcm5hdGl2ZU5vZGVzLnB1c2godGVtcE5vZGUpOwogICAgICAgICAgcCA9IHAuX2xlZnRDaGlsZDsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcDIubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgcDJbaV0gPSBwMltpXS5fbGVmdENoaWxkOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodGVtcF9taW5MID4gdGVtcF9taW5SICYmIHAuX3JpZ2h0Q2hpbGQpIHsKICAgICAgICAgIGxldCB0ZW1wTm9kZSA9IFtdOwogICAgICAgICAgLy8gYWx0ZXJuYXRpdmVOb2Rlcy5wdXNoKFtwLCBwMiwgcC5fbGVmdENoaWxkLCBwMi5fbGVmdENoaWxkLCB0ZW1wX21pbkxdKTsKICAgICAgICAgIHRlbXBOb2RlLnB1c2gocCk7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIHRlbXBOb2RlLnB1c2gocDJbaV0pOwogICAgICAgICAgfQogICAgICAgICAgdGVtcE5vZGUucHVzaChwLl9sZWZ0Q2hpbGQpOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwMi5sZW5ndGg7ICsraSkgewogICAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHAyW2ldLl9sZWZ0Q2hpbGQpOwogICAgICAgICAgfQogICAgICAgICAgdGVtcE5vZGUucHVzaCh0ZW1wX21pbkwpOwogICAgICAgICAgcCA9IHAuX3JpZ2h0Q2hpbGQ7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIHAyW2ldID0gcDJbaV0uX3JpZ2h0Q2hpbGQ7CiAgICAgICAgICB9CiAgICAgICAgICBhbHRlcm5hdGl2ZU5vZGVzLnB1c2godGVtcE5vZGUpOwogICAgICAgIH0KICAgICAgfQogICAgICAvLyBjb25zb2xlLmxvZygiVGhlIGJvdHRvbSBtaW4oKik6IiwgbWluSW5kZXgpOwogICAgICBwID0gcHAsIHAyID0gcHAyOwogICAgICB3aGlsZSAobWF4ID4gLUluZmluaXR5KSB7CiAgICAgICAgbGV0IHRlbXBfbWF4TCA9IDAsCiAgICAgICAgICB0ZW1wX21heFIgPSAwOwogICAgICAgIGlmICghcC5fbGVmdENoaWxkICYmICFwLl9yaWdodENoaWxkKSB7CiAgICAgICAgICBsZXQgbWF4TCA9IDAsCiAgICAgICAgICAgIG1heFIgPSAwOwogICAgICAgICAgbGV0IG5vZGVGbGFnSW5mbzEgPSBjdXJyZW50RmxhZ0luZm9bcC5pbmRleCAqIDIgKyAxXTsKICAgICAgICAgIGlmIChub2RlRmxhZ0luZm8xID09PSAwKSB7CiAgICAgICAgICAgIG1heEwgKz0gcC55QXJyYXlbMV07CiAgICAgICAgICAgIG1heFIgKz0gcC55QXJyYXlbMl07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtYXhMICs9IHAueUFycmF5WzJdOwogICAgICAgICAgICBtYXhSICs9IHAueUFycmF5WzFdOwogICAgICAgICAgfQogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjdXJyZW50RmxhZ0luZm8yLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIGlmIChjdXJyZW50RmxhZ0luZm8yW2ldW3AuaW5kZXggKiAyICsgMV0gPT09IDApIHsKICAgICAgICAgICAgICBtYXhMIC89IHAyW2ldLnlBcnJheVsxXTsKICAgICAgICAgICAgICBtYXhSIC89IHAyW2ldLnlBcnJheVsyXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBtYXhMIC89IHAyW2ldLnlBcnJheVsyXTsKICAgICAgICAgICAgICBtYXhSIC89IHAyW2ldLnlBcnJheVsxXTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKG1heEwgPiBtYXhSKSB7CiAgICAgICAgICAgIG1heCA9IG1heEw7CiAgICAgICAgICAgIG1heEluZGV4ID0gW3AuaW5kZXggKiAyLCBtYXhdOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbWF4ID0gbWF4UjsKICAgICAgICAgICAgbWF4SW5kZXggPSBbcC5pbmRleCAqIDIgKyAxLCBtYXhdOwogICAgICAgICAgfQogICAgICAgICAgaWYgKG1heCA+IHRoaXMuZGl2TWF4WzFdKSB7CiAgICAgICAgICAgIHRoaXMuZGl2TWF4ID0gbWF4SW5kZXg7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgaWYgKHAuX2xlZnRDaGlsZCkgewogICAgICAgICAgLy8gdGVtcF9taW5MID0gTWF0aC5taW4ocC5fbGVmdENoaWxkLnlBcnJheVsxXSAqIHAyWzBdLl9sZWZ0Q2hpbGQhLnlBcnJheVsxXSwgcC5fbGVmdENoaWxkLnlBcnJheVsxXSAqIHAyWzBdLl9sZWZ0Q2hpbGQhLnlBcnJheVsyXSwgcC5fbGVmdENoaWxkLnlBcnJheVsyXSAqIHAyWzBdLl9sZWZ0Q2hpbGQhLnlBcnJheVsxXSwgcC5fbGVmdENoaWxkLnlBcnJheVsyXSAqIHAyWzBdLl9sZWZ0Q2hpbGQhLnlBcnJheVsyXSk7CiAgICAgICAgICB0ZW1wX21heEwgPSBwLl9sZWZ0Q2hpbGQueUFycmF5WzJdOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwMi5sZW5ndGg7ICsraSkgewogICAgICAgICAgICBpZiAocDJbaV0uX2xlZnRDaGlsZCAhPT0gbnVsbCkgewogICAgICAgICAgICAgIHRlbXBfbWF4TCAvPSBwMltpXS5fbGVmdENoaWxkLnlBcnJheVsxXTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAocC5fcmlnaHRDaGlsZCkgewogICAgICAgICAgLy8gdGVtcF9taW5SID0gTWF0aC5taW4ocC5fcmlnaHRDaGlsZC55QXJyYXlbMV0gKiBwMlswXS5fcmlnaHRDaGlsZCEueUFycmF5WzFdLCBwLl9yaWdodENoaWxkLnlBcnJheVsxXSAqIHAyWzBdLl9yaWdodENoaWxkIS55QXJyYXlbMl0sIHAuX3JpZ2h0Q2hpbGQueUFycmF5WzJdICogcDJbMF0uX3JpZ2h0Q2hpbGQhLnlBcnJheVsxXSwgcC5fcmlnaHRDaGlsZC55QXJyYXlbMl0gKiBwMlswXS5fcmlnaHRDaGlsZCEueUFycmF5WzJdKTsKICAgICAgICAgIHRlbXBfbWF4TCA9IHAuX3JpZ2h0Q2hpbGQueUFycmF5WzJdOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwMi5sZW5ndGg7ICsraSkgewogICAgICAgICAgICBpZiAocDJbaV0uX2xlZnRDaGlsZCAhPT0gbnVsbCkgewogICAgICAgICAgICAgIHRlbXBfbWF4TCAvPSBwMltpXS5fbGVmdENoaWxkLnlBcnJheVsxXTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAodGVtcF9tYXhMIDw9IHRlbXBfbWF4UiAmJiBwLl9yaWdodENoaWxkKSB7CiAgICAgICAgICBsZXQgdGVtcE5vZGUgPSBbXTsKICAgICAgICAgIHRlbXBOb2RlLnB1c2gocCk7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIHRlbXBOb2RlLnB1c2gocDJbaV0pOwogICAgICAgICAgfQogICAgICAgICAgdGVtcE5vZGUucHVzaChwLl9sZWZ0Q2hpbGQpOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwMi5sZW5ndGg7ICsraSkgewogICAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHAyW2ldLl9sZWZ0Q2hpbGQpOwogICAgICAgICAgfQogICAgICAgICAgdGVtcE5vZGUucHVzaCh0ZW1wX21heEwpOwogICAgICAgICAgYWx0ZXJuYXRpdmVOb2RlczIucHVzaCh0ZW1wTm9kZSk7CiAgICAgICAgICBwID0gcC5fcmlnaHRDaGlsZDsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcDIubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgcDJbaV0gPSBwMltpXS5fcmlnaHRDaGlsZDsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHRlbXBfbWF4TCA+IHRlbXBfbWF4UiAmJiBwLl9sZWZ0Q2hpbGQpIHsKICAgICAgICAgIGxldCB0ZW1wTm9kZSA9IFtdOwogICAgICAgICAgLy8gYWx0ZXJuYXRpdmVOb2Rlcy5wdXNoKFtwLCBwMiwgcC5fbGVmdENoaWxkLCBwMi5fbGVmdENoaWxkLCB0ZW1wX21pbkxdKTsKICAgICAgICAgIHRlbXBOb2RlLnB1c2gocCk7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIHRlbXBOb2RlLnB1c2gocDJbaV0pOwogICAgICAgICAgfQogICAgICAgICAgdGVtcE5vZGUucHVzaChwLl9yaWdodENoaWxkKTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcDIubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgdGVtcE5vZGUucHVzaChwMltpXS5fcmlnaHRDaGlsZCk7CiAgICAgICAgICB9CiAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHRlbXBfbWF4Uik7CiAgICAgICAgICBhbHRlcm5hdGl2ZU5vZGVzMi5wdXNoKHRlbXBOb2RlKTsKICAgICAgICAgIHAgPSBwLl9sZWZ0Q2hpbGQ7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIHAyW2ldID0gcDJbaV0uX2xlZnRDaGlsZDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgLy8gY29uc29sZS5sb2coIlRoZSBib3R0b20gbWF4KCopOiIsIG1heEluZGV4KTsKICAgICAgaWYgKHN0b3JlLnN0YXRlLmNvbnRyb2xQYXJhbXMuc3RvcEVhcmx5ID09PSB0cnVlKSB7CiAgICAgICAgYWx0ZXJuYXRpdmVOb2RlcyA9IFtdOwogICAgICAgIGFsdGVybmF0aXZlTm9kZXMyID0gW107CiAgICAgIH0KICAgICAgcCA9IHBwLCBwMiA9IHBwMjsKICAgICAgd2hpbGUgKGFsdGVybmF0aXZlTm9kZXMubGVuZ3RoID4gMCkgewogICAgICAgIGxldCBwb3AgPSBhbHRlcm5hdGl2ZU5vZGVzLnBvcCgpOwogICAgICAgIGlmIChwb3AgPT09IHVuZGVmaW5lZCkgY29udGludWU7CiAgICAgICAgLy8gaWYoTnVtYmVyKHBvcFtwb3AubGVuZ3RoLTFdKSA+IHRoaXMuZGl2TWluWzFdKSBjb250aW51ZTsKICAgICAgICAvLyBpZihOdW1iZXIocG9wW3BvcC5sZW5ndGgtMV0pID4gbWluKSBjb250aW51ZTsKICAgICAgICBsZXQgbGVuID0gcG9wLmxlbmd0aDsKICAgICAgICBsZXQgdGVtcF9taW5MID0gMCwKICAgICAgICAgIHRlbXBfbWluUiA9IDA7CiAgICAgICAgaWYgKCFwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0uX2xlZnRDaGlsZCAmJiAhcG9wW01hdGguZmxvb3IobGVuIC8gMildLl9yaWdodENoaWxkKSB7CiAgICAgICAgICBsZXQgbWluTCA9IDAsCiAgICAgICAgICAgIG1pblIgPSAwOwogICAgICAgICAgbGV0IG5vZGVGbGFnSW5mbzEgPSBjdXJyZW50RmxhZ0luZm9bcG9wW01hdGguZmxvb3IobGVuIC8gMildLmluZGV4ICogMiArIDFdOwogICAgICAgICAgaWYgKG5vZGVGbGFnSW5mbzEgPT09IDApIHsKICAgICAgICAgICAgbWluTCArPSBwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0ueUFycmF5WzFdOwogICAgICAgICAgICBtaW5SICs9IHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS55QXJyYXlbMl07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtaW5MICs9IHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS55QXJyYXlbMl07CiAgICAgICAgICAgIG1pblIgKz0gcG9wW01hdGguZmxvb3IobGVuIC8gMildLnlBcnJheVsxXTsKICAgICAgICAgIH0KICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3VycmVudEZsYWdJbmZvMi5sZW5ndGg7ICsraSkgewogICAgICAgICAgICBpZiAoY3VycmVudEZsYWdJbmZvMltpXVtwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0uaW5kZXggKiAyICsgMV0gPT09IDApIHsKICAgICAgICAgICAgICBtaW5MIC89IHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpICsgaSArIDFdLnlBcnJheVsxXTsKICAgICAgICAgICAgICBtaW5SIC89IHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpICsgaSArIDFdLnlBcnJheVsyXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBtaW5MIC89IHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpICsgaSArIDFdLnlBcnJheVsyXTsKICAgICAgICAgICAgICBtaW5SIC89IHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpICsgaSArIDFdLnlBcnJheVsxXTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKG1pbkwgPiBtaW5SKSB7CiAgICAgICAgICAgIG1pbiA9IG1pbkw7CiAgICAgICAgICAgIG1pbkluZGV4ID0gW3BvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS5pbmRleCAqIDIsIG1pbl07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtaW4gPSBtaW5SOwogICAgICAgICAgICBtaW5JbmRleCA9IFtwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0uaW5kZXggKiAyICsgMSwgbWluXTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChtaW4gPCB0aGlzLmRpdk1pblsxXSkgewogICAgICAgICAgICB0aGlzLmRpdk1pbiA9IG1pbkluZGV4OwogICAgICAgICAgfQogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQogICAgICAgIGlmIChwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0uX2xlZnRDaGlsZCkgewogICAgICAgICAgbGV0IGluZGV4ID0gTWF0aC5mbG9vcihsZW4gLyAyKTsKICAgICAgICAgIHRlbXBfbWluTCA9IHBvcFtpbmRleF0uX2xlZnRDaGlsZC55QXJyYXlbMV07CiAgICAgICAgICBmb3IgKGxldCBpID0gaW5kZXggKyAxOyBpIDwgaW5kZXggKiAyOyArK2kpIHsKICAgICAgICAgICAgdGVtcF9taW5MIC89IHBvcFtpXS5fbGVmdENoaWxkLnlBcnJheVsyXTsKICAgICAgICAgIH0KICAgICAgICAgIC8vIHRlbXBfbWluTCA9IChwb3BbMl0uX2xlZnRDaGlsZC55QXJyYXlbMV0gKyBwb3BbM10uX2xlZnRDaGlsZC55QXJyYXlbMV0pOwogICAgICAgICAgLy8gaWYodGVtcF9taW5MIDwgbWluKXsKICAgICAgICAgIGxldCB0ZW1wTm9kZSA9IFtdOwogICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4OyBpIDwgaW5kZXggKiAyOyArK2kpIHsKICAgICAgICAgICAgdGVtcE5vZGUucHVzaChwb3BbaV0pOwogICAgICAgICAgfQogICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4OyBpIDwgaW5kZXggKiAyOyArK2kpIHsKICAgICAgICAgICAgdGVtcE5vZGUucHVzaChwb3BbaV0uX2xlZnRDaGlsZCk7CiAgICAgICAgICB9CiAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHRlbXBfbWluTCk7CiAgICAgICAgICBhbHRlcm5hdGl2ZU5vZGVzLnB1c2godGVtcE5vZGUpOwogICAgICAgICAgY291bnQuY291bnQrKzsKICAgICAgICAgIC8vIH0KICAgICAgICB9CiAgICAgICAgaWYgKHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS5fcmlnaHRDaGlsZCkgewogICAgICAgICAgbGV0IGluZGV4ID0gTWF0aC5mbG9vcihsZW4gLyAyKTsKICAgICAgICAgIHRlbXBfbWluTCA9IHBvcFtpbmRleF0uX3JpZ2h0Q2hpbGQueUFycmF5WzFdOwogICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4ICsgMTsgaSA8IGluZGV4ICogMjsgKytpKSB7CiAgICAgICAgICAgIHRlbXBfbWluTCAvPSBwb3BbaV0uX3JpZ2h0Q2hpbGQueUFycmF5WzJdOwogICAgICAgICAgfQogICAgICAgICAgLy8gdGVtcF9taW5MID0gKHBvcFsyXS5fbGVmdENoaWxkLnlBcnJheVsxXSArIHBvcFszXS5fbGVmdENoaWxkLnlBcnJheVsxXSk7CiAgICAgICAgICAvLyBpZih0ZW1wX21pbkwgPCBtaW4pewogICAgICAgICAgbGV0IHRlbXBOb2RlID0gW107CiAgICAgICAgICBmb3IgKGxldCBpID0gaW5kZXg7IGkgPCBpbmRleCAqIDI7ICsraSkgewogICAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHBvcFtpXSk7CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKGxldCBpID0gaW5kZXg7IGkgPCBpbmRleCAqIDI7ICsraSkgewogICAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHBvcFtpXS5fcmlnaHRDaGlsZCk7CiAgICAgICAgICB9CiAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHRlbXBfbWluTCk7CiAgICAgICAgICBhbHRlcm5hdGl2ZU5vZGVzLnB1c2godGVtcE5vZGUpOwogICAgICAgICAgY291bnQuY291bnQrKzsKICAgICAgICAgIC8vIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgcCA9IHBwLCBwMiA9IHBwMjsKICAgICAgd2hpbGUgKGFsdGVybmF0aXZlTm9kZXMyLmxlbmd0aCA+IDApIHsKICAgICAgICAvLyBjb25zb2xlLmxvZygiYWx0ZXJuYXRpdmVOb2RlczI6IiwgYWx0ZXJuYXRpdmVOb2RlczIpOwogICAgICAgIGxldCBwb3AgPSBhbHRlcm5hdGl2ZU5vZGVzMi5wb3AoKTsKICAgICAgICBpZiAocG9wID09PSB1bmRlZmluZWQpIGNvbnRpbnVlOwogICAgICAgIC8vIGlmKE51bWJlcihwb3BbcG9wLmxlbmd0aC0xXSkgPCB0aGlzLmRpdk1heFsxXSkgY29udGludWU7CiAgICAgICAgLy8gY29uc29sZS5sb2coInBvcDoiLCBwb3ApOwogICAgICAgIC8vIGlmKE51bWJlcihwb3BbcG9wLmxlbmd0aC0xXSkgPCBtYXgpIGNvbnRpbnVlOwogICAgICAgIGxldCBsZW4gPSBwb3AubGVuZ3RoOwogICAgICAgIGxldCB0ZW1wX21heEwgPSAwLAogICAgICAgICAgdGVtcF9tYXhSID0gMDsKICAgICAgICBpZiAoIXBvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS5fbGVmdENoaWxkICYmICFwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0uX3JpZ2h0Q2hpbGQpIHsKICAgICAgICAgIGxldCBtYXhMID0gMCwKICAgICAgICAgICAgbWF4UiA9IDA7CiAgICAgICAgICBsZXQgbm9kZUZsYWdJbmZvMSA9IGN1cnJlbnRGbGFnSW5mb1twb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0uaW5kZXggKiAyICsgMV07CiAgICAgICAgICBpZiAobm9kZUZsYWdJbmZvMSA9PT0gMCkgewogICAgICAgICAgICBtYXhMICs9IHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS55QXJyYXlbMV07CiAgICAgICAgICAgIG1heFIgKz0gcG9wW01hdGguZmxvb3IobGVuIC8gMildLnlBcnJheVsyXTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1heEwgKz0gcG9wW01hdGguZmxvb3IobGVuIC8gMildLnlBcnJheVsyXTsKICAgICAgICAgICAgbWF4UiArPSBwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0ueUFycmF5WzFdOwogICAgICAgICAgfQogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjdXJyZW50RmxhZ0luZm8yLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIGlmIChjdXJyZW50RmxhZ0luZm8yW2ldW3BvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS5pbmRleCAqIDIgKyAxXSA9PT0gMCkgewogICAgICAgICAgICAgIG1heEwgLz0gcG9wW01hdGguZmxvb3IobGVuIC8gMikgKyBpICsgMV0ueUFycmF5WzFdOwogICAgICAgICAgICAgIG1heFIgLz0gcG9wW01hdGguZmxvb3IobGVuIC8gMikgKyBpICsgMV0ueUFycmF5WzJdOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG1heEwgLz0gcG9wW01hdGguZmxvb3IobGVuIC8gMikgKyBpICsgMV0ueUFycmF5WzJdOwogICAgICAgICAgICAgIG1heFIgLz0gcG9wW01hdGguZmxvb3IobGVuIC8gMikgKyBpICsgMV0ueUFycmF5WzFdOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAobWF4TCA+IG1heFIpIHsKICAgICAgICAgICAgbWF4ID0gbWF4TDsKICAgICAgICAgICAgbWF4SW5kZXggPSBbcG9wW01hdGguZmxvb3IobGVuIC8gMildLmluZGV4ICogMiwgbWF4XTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1heCA9IG1heFI7CiAgICAgICAgICAgIG1heEluZGV4ID0gW3BvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS5pbmRleCAqIDIgKyAxLCBtYXhdOwogICAgICAgICAgfQogICAgICAgICAgaWYgKG1heCA+IHRoaXMuZGl2TWF4WzFdKSB7CiAgICAgICAgICAgIHRoaXMuZGl2TWF4ID0gbWF4SW5kZXg7CiAgICAgICAgICB9CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgICAgaWYgKHBvcFtNYXRoLmZsb29yKGxlbiAvIDIpXS5fbGVmdENoaWxkKSB7CiAgICAgICAgICBsZXQgaW5kZXggPSBNYXRoLmZsb29yKGxlbiAvIDIpOwogICAgICAgICAgdGVtcF9tYXhMID0gcG9wW2luZGV4XS5fbGVmdENoaWxkLnlBcnJheVsyXTsKICAgICAgICAgIGZvciAobGV0IGkgPSBpbmRleCArIDE7IGkgPCBpbmRleCAqIDI7ICsraSkgewogICAgICAgICAgICB0ZW1wX21heEwgLz0gcG9wW2ldLl9sZWZ0Q2hpbGQueUFycmF5WzFdOwogICAgICAgICAgfQogICAgICAgICAgLy8gaWYodGVtcF9tYXhMID4gbWF4KXsKICAgICAgICAgIGxldCB0ZW1wTm9kZSA9IFtdOwogICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4OyBpIDwgaW5kZXggKiAyOyArK2kpIHsKICAgICAgICAgICAgdGVtcE5vZGUucHVzaChwb3BbaV0pOwogICAgICAgICAgfQogICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4OyBpIDwgaW5kZXggKiAyOyArK2kpIHsKICAgICAgICAgICAgdGVtcE5vZGUucHVzaChwb3BbaV0uX2xlZnRDaGlsZCk7CiAgICAgICAgICB9CiAgICAgICAgICB0ZW1wTm9kZS5wdXNoKHRlbXBfbWF4TCk7CiAgICAgICAgICBhbHRlcm5hdGl2ZU5vZGVzMi5wdXNoKHRlbXBOb2RlKTsKICAgICAgICAgIGNvdW50LmNvdW50Kys7CiAgICAgICAgICAvLyB9CiAgICAgICAgfQogICAgICAgIGlmIChwb3BbTWF0aC5mbG9vcihsZW4gLyAyKV0uX3JpZ2h0Q2hpbGQpIHsKICAgICAgICAgIGxldCBpbmRleCA9IE1hdGguZmxvb3IobGVuIC8gMik7CiAgICAgICAgICB0ZW1wX21heEwgPSBwb3BbaW5kZXhdLl9yaWdodENoaWxkLnlBcnJheVsyXTsKICAgICAgICAgIGZvciAobGV0IGkgPSBpbmRleCArIDE7IGkgPCBpbmRleCAqIDI7ICsraSkgewogICAgICAgICAgICB0ZW1wX21heEwgLz0gcG9wW2ldLl9yaWdodENoaWxkLnlBcnJheVsxXTsKICAgICAgICAgIH0KICAgICAgICAgIC8vIGlmKHRlbXBfbWF4TCA+IG1heCl7CiAgICAgICAgICBsZXQgdGVtcE5vZGUgPSBbXTsKICAgICAgICAgIGZvciAobGV0IGkgPSBpbmRleDsgaSA8IGluZGV4ICogMjsgKytpKSB7CiAgICAgICAgICAgIHRlbXBOb2RlLnB1c2gocG9wW2ldKTsKICAgICAgICAgIH0KICAgICAgICAgIGZvciAobGV0IGkgPSBpbmRleDsgaSA8IGluZGV4ICogMjsgKytpKSB7CiAgICAgICAgICAgIHRlbXBOb2RlLnB1c2gocG9wW2ldLl9yaWdodENoaWxkKTsKICAgICAgICAgIH0KICAgICAgICAgIHRlbXBOb2RlLnB1c2godGVtcF9tYXhMKTsKICAgICAgICAgIGFsdGVybmF0aXZlTm9kZXMyLnB1c2godGVtcE5vZGUpOwogICAgICAgICAgY291bnQuY291bnQrKzsKICAgICAgICAgIC8vIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgLy8gY29uc29sZS5sb2coIlRoZSBmaW5hbCBtaW4oLyk6IiwgbWluSW5kZXgpOwogICAgICAvLyBjb25zb2xlLmxvZygiVGhlIGZpbmFsIG1heCgvKToiLCBtYXhJbmRleCk7CiAgICAgIGlmIChtaW4gPCB0aGlzLmRpdk1pblsxXSkgewogICAgICAgIHRoaXMuZGl2TWluID0gbWluSW5kZXg7CiAgICAgIH0KICAgICAgaWYgKG1heCA+IHRoaXMuZGl2TWF4WzFdKSB7CiAgICAgICAgdGhpcy5kaXZNYXggPSBtYXhJbmRleDsKICAgICAgfQogICAgfQogIH0KICBhZGRMYXN0VmFsKHYsIHApIHsKICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgdGhpcy5lbmRWID0gdjsKICAgIGxldCBpbmRleCA9IHAuaW5kZXggKiAyOwogICAgbGV0IHJhbmdlQXJyYXkgPSB0aGlzLmN1cnJlbnRSYW5nZTsKICAgIGxldCBtYXggPSAwOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCByYW5nZUFycmF5Lmxlbmd0aDsgKytpKSB7CiAgICAgIGlmIChyYW5nZUFycmF5W2ldWzFdID4gbWF4KSBtYXggPSByYW5nZUFycmF5W2ldWzFdOwogICAgfQogICAgaWYgKGluZGV4ID4gbWF4ICYmIGluZGV4ID09PSBtYXggKyAxKSB7CiAgICAgIHRoaXMuY3VycmVudFJhbmdlLnB1c2goW2luZGV4XSk7CiAgICB9CiAgICB0aGlzLmN1cnJlbnRTdW0gKz0gdjsKICAgIHRoaXMuY3VycmVudFBvaW50TnVtICs9IDE7CiAgICB0aGlzLmF2ZXJhZ2UgPSB0aGlzLmN1cnJlbnRTdW0gLyB0aGlzLmN1cnJlbnRQb2ludE51bTsKICB9CiAgYWRkRmlyc3RWYWwodiwgcCkgewogICAgaWYgKHYgPT09IHVuZGVmaW5lZCkgewogICAgICByZXR1cm47CiAgICB9CiAgICB0aGlzLnN0YXJ0ViA9IHY7CiAgICBsZXQgaW5kZXggPSBwLmluZGV4ICogMiArIDE7CiAgICBsZXQgcmFuZ2VBcnJheSA9IHRoaXMuY3VycmVudFJhbmdlOwogICAgbGV0IG1pbiA9IHJhbmdlQXJyYXlbMF1bMF07CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhbmdlQXJyYXkubGVuZ3RoOyArK2kpIHsKICAgICAgaWYgKHJhbmdlQXJyYXlbaV1bMF0gPCBtaW4pIG1pbiA9IHJhbmdlQXJyYXlbaV1bMF07CiAgICB9CiAgICBpZiAobWluID4gaW5kZXggJiYgaW5kZXggPT09IG1pbiAtIDEpIHsKICAgICAgdGhpcy5jdXJyZW50UmFuZ2UucHVzaChbaW5kZXhdKTsKICAgIH0KICAgIHRoaXMuY3VycmVudFN1bSArPSB2OwogICAgdGhpcy5jdXJyZW50UG9pbnROdW0gKz0gMTsKICAgIHRoaXMuYXZlcmFnZSA9IHRoaXMuY3VycmVudFN1bSAvIHRoaXMuY3VycmVudFBvaW50TnVtOwogIH0KICBmb3JjZU1lcmdlKHZhbCwgaW5kZXgpIHsKICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoInVuZGVmaW5lIik7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICh2YWwgPCB0aGlzLnZSYW5nZVswXSkgewogICAgICB0aGlzLnZSYW5nZVswXSA9IHZhbDsKICAgIH0KICAgIGlmICh2YWwgPiB0aGlzLnZSYW5nZVsxXSkgewogICAgICB0aGlzLnZSYW5nZVsxXSA9IHZhbDsKICAgIH0KICB9CiAgbWVyZ2VMYXN0KGssIGIpIHsKICAgIGNvbnN0IHZhbCA9IGsgKiB0aGlzLnRFbmQgKyBiOwogICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigidW5kZWZpbmUiKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKHZhbCA+IHRoaXMudlJhbmdlWzFdKSB7CiAgICAgIHRoaXMudlJhbmdlWzFdID0gdmFsOwogICAgfQogICAgaWYgKHZhbCA8IHRoaXMudlJhbmdlWzBdKSB7CiAgICAgIHRoaXMudlJhbmdlWzBdID0gdmFsOwogICAgfQogICAgdGhpcy5lbmRWID0gdmFsOwogIH0KICBtZXJnZUZpcnN0KGssIGIpIHsKICAgIGNvbnN0IHZhbCA9IGsgKiB0aGlzLnRTdGFydCArIGI7CiAgICBpZiAodmFsID09PSB1bmRlZmluZWQpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJ1bmRlZmluZSIpOwogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAodmFsID4gdGhpcy52UmFuZ2VbMV0pIHsKICAgICAgdGhpcy52UmFuZ2VbMV0gPSB2YWw7CiAgICB9CiAgICBpZiAodmFsIDwgdGhpcy52UmFuZ2VbMF0pIHsKICAgICAgdGhpcy52UmFuZ2VbMF0gPSB2YWw7CiAgICB9CiAgICB0aGlzLnN0YXJ0ViA9IHZhbDsKICB9CiAgY2hlY2tJc01pcygpIHsKICAgIGlmICh0aGlzLnZSYW5nZVswXSA9PT0gSW5maW5pdHkgfHwgdGhpcy52UmFuZ2VbMV0gPT09IC1JbmZpbml0eSkgewogICAgICB0aGlzLmlzTWlzID0gdHJ1ZTsKICAgIH0KICAgIHJldHVybiB0aGlzLmlzTWlzOwogIH0KfQ=="},{"version":3,"names":["getIndexTime","store","axios","get","url","data","NoUniformColObj","constructor","col","tStart","tEnd","level","width","globalDataLen","maxLevel","dataName","isMis","startV","undefined","endV","average","currentSum","currentPointNum","currentRange","ordinalLevelCount","minVTimeRange","maxVTimeRange","vRange","Infinity","semanticTStart","semanticTEnd","startIndex","endIndex","index","positionInfo","startX","endX","minX","maxX","shapeMinMax","shapeMinT","shapeMaxT","minNodes","maxNodes","realStart","sementicInterval","addMin","addMax","subMin","subMax","multiMin","multiMax","divMin","divMax","multiAve","rebuild","setRealStartAndInterval","start","interval","setTStart","t","setTEnd","setSemanticTStart","Math","floor","setSemanticTEnd","getEndRange","getStartRange","isContain","p","pL","pTRange","pTimeS","pTimeE","yArray","tRange","startT","endT","console","log","Error","isMissContain","gapFlag","containColumnRange","type","nodeType","push","containColumnRange2","p2","transform_symbol","i","length","computeTransform","currentFlagInfo","currentFlagInfo2","count","pp","pp2","slice","symbol","min1","min2","max1","max2","min","max","tempMin","tempMax","minIndex","maxIndex","alternativeNodes","alternativeNodes2","temp_minL","temp_minR","_leftChild","_rightChild","minL","minR","nodeFlagInfo1","tempNode","temp_maxL","temp_maxR","maxL","maxR","state","controlParams","stopEarly","pop","len","tempArray","j","shift","addLastVal","v","rangeArray","addFirstVal","forceMerge","val","mergeLast","k","b","mergeFirst","checkIsMis"],"sources":["/ai/didi01/zhanglingyu/om3-extend/om3-client/node_modules/eslint-loader/index.js??ref--14-0!/ai/didi01/zhanglingyu/om3-extend/om3-client/src/model/non-uniform-col-obj.ts"],"sourcesContent":["import TrendTree from \"@/helper/tend-query-tree\";\nimport { getIndexTime } from \"@/helper/format-data\";\nimport { utcYear } from \"d3\";\nimport store, {GlobalState} from \"@/store\";\nimport axios from \"axios\";\nimport { Commit, ActionContext, ActionHandler } from 'vuex';\nimport { canCut, checkSetType, computeLosedDataRange, computeLosedDataRangeV1, computeTimeSE, deleteSavedNodeIndex, computeSemanticColumn, convertWaveletToRawTableName, computeLosedDataRangeV1ForRawMinMax, computeTimeSE1 } from \"@/helper/util\";\nimport { loadDataForRangeLevel, batchLoadDataForRangeLevelRawMinMax, batchLoadDataForRangeLevel, batchLoadDataForRangeLevel1, batchLoadDataForRangeLevel2MinMaxMiss, batchLoadDataForRangeLevel1MinMaxMiss, batchLoadDataForRangeLevel1WS, batchLoadDataForRangeLevelForMinMaxMiss } from \"../api/build_tree\"\n\nasync function get(url: string) {\n\n    url = 'postgres' + url;\n\n    //const loading = openLoading();\n    const { data } = await axios.get(url);\n    //loading.close();\n    return data;\n}\n\nexport default class NoUniformColObj {\n    col: number;\n    tStart: number;\n    tEnd: number;\n    semanticTStart: number;\n    semanticTEnd: number;\n    level: number;\n    startIndex: number;\n    endIndex: number;\n    index: number;\n    startV: number | undefined;\n    endV: number | undefined;\n    average: number;\n    currentSum: number;\n    currentPointNum: number;\n    currentRange: Array<Array<number>>;\n    ordinalLevelCount: number;\n    vRange: Array<number>;\n    width: number;\n    globalDataLen: number;\n    positionInfo: {\n        startX: number,\n        endX: number,\n        minX: number,\n        maxX: number;\n    }\n    minVTimeRange: Array<number>\n    maxVTimeRange: Array<number>\n    maxLevel: number;\n    dataName?: string;\n    isMis: boolean;\n    shapeMinMax: Array<number>;\n    shapeMinT: Array<Array<number>>;\n    shapeMaxT: Array<Array<number>>;\n    minNodes: Array<TrendTree>;\n    maxNodes: Array<TrendTree>;\n    realStart: number;\n    sementicInterval: number;\n    addMin: [number, number];\n    addMax: [number, number];\n    subMin: [number, number];\n    subMax: [number, number];\n    multiMin: [number, number];\n    multiMax: [number, number];\n    divMin: [number, number];\n    divMax: [number, number];\n    multiAve: number;\n\n    constructor(col: number, tStart: number, tEnd: number, level: number, width: number, globalDataLen: number, maxLevel: number, dataName?: string) {\n        this.isMis = false;\n        this.startV = undefined;\n        this.endV = undefined;\n        this.average = 0;\n        this.currentSum = 0;\n        this.currentPointNum = 0;\n        this.currentRange = [];\n        this.ordinalLevelCount = 0;\n        this.minVTimeRange = [0, 0];\n        this.maxVTimeRange = [0, 0];\n        this.vRange = [Infinity, -Infinity];\n        this.width = width;\n        this.col = col;\n        this.tStart = tStart;\n        this.tEnd = tEnd;\n        this.semanticTStart = tStart;\n        this.semanticTEnd = tEnd;\n        this.level = level;\n        this.startIndex = 0;\n        this.endIndex = 0;\n        this.index = 0;\n       \n        this.globalDataLen = globalDataLen;\n        this.maxLevel = maxLevel\n        this.positionInfo = {\n            startX: 0,\n            endX: 0,\n            minX: 0,\n            maxX: 0\n        }\n       \n        this.dataName = dataName;\n        this.shapeMinMax = [Infinity, -Infinity];\n        this.shapeMinT = [];\n        this.shapeMaxT = [];\n        this.minNodes = [];\n        this.maxNodes = [];\n        this.realStart = 0;\n        this.sementicInterval = 0;\n        this.addMin = [-1, Infinity];\n        this.addMax = [-1, -Infinity];\n        this.subMin = [-1, Infinity];\n        this.subMax = [-1, -Infinity];\n        this.multiMin = [-1, Infinity];\n        this.multiMax = [-1, -Infinity];\n        this.divMin = [-1, Infinity];\n        this.divMax = [-1, -Infinity];\n        this.multiAve = 0;\n    }\n    rebuild(col: number, tStart: number, tEnd: number, level: number, width: number, globalDataLen: number, maxLevel: number, dataName?: string) {\n        this.width = width;\n        this.col = col;\n        this.tStart = tStart;\n        this.tEnd = tEnd;\n        this.level = level;\n        this.startIndex = 0;\n        this.endIndex = 0;\n        this.index = 0;\n        this.startV = undefined;\n        this.endV = undefined;\n        this.average = 0;\n        this.currentSum = 0;\n        this.currentPointNum = 0;\n        this.currentRange = [];\n        this.ordinalLevelCount = 0;\n        this.vRange[0] = Infinity;\n        this.vRange[1] = -Infinity;\n        this.globalDataLen = globalDataLen;\n        this.maxLevel = maxLevel\n        this.positionInfo.startX = 0;\n        this.positionInfo.endX = 0;\n        this.positionInfo.minX = 0;\n        this.positionInfo.maxX = 0;\n        this.minVTimeRange[0] = 0;\n        this.minVTimeRange[1] = 0;\n        this.maxVTimeRange[0] = 0;\n        this.maxVTimeRange[1] = 0;\n        this.dataName = dataName;\n        this.addMin = [-1, Infinity];\n        this.addMax = [-1, -Infinity];\n        this.subMin = [-1, Infinity];\n        this.subMax = [-1, -Infinity];\n        this.multiMin = [-1, Infinity];\n        this.multiMax = [-1, -Infinity];\n        this.divMin = [-1, Infinity];\n        this.divMax = [-1, -Infinity];\n        this.multiAve = 0;\n    }\n    setRealStartAndInterval(start: number, interval: number) {\n        this.realStart = start;\n        this.sementicInterval = interval;\n    }\n\n    setTStart(t: number) {\n        this.tStart = t;\n    }\n    setTEnd(t: number) {\n        this.tEnd = t;\n    }\n\n    setSemanticTStart(t: number) {\n        this.semanticTStart = t;\n        this.tStart = Math.floor((this.semanticTStart - this.realStart) / this.sementicInterval);\n    }\n    setSemanticTEnd(t: number) {\n        this.semanticTEnd = t;\n        this.tEnd = Math.floor((this.semanticTEnd - this.realStart) / this.sementicInterval) - 1;\n    }\n    getEndRange() {\n        const index = Math.floor(this.tEnd / 2);\n        if (index % 2 === 0) {\n            return [index, index + 1];\n        } else {\n            return [index - 1, index];\n        }\n    }\n    getStartRange() {\n        const index = Math.floor(this.tStart / 2);\n        if (index % 2 === 0) {\n            return [index, index + 1];\n        } else {\n            return [index - 1, index];\n        }\n    }\n    // 1   2    3  4  5 \n    isContain(p: TrendTree) {\n        const pL = p.level;\n        const pTRange = (2 ** this.maxLevel) / (2 ** pL);\n        const pTimeS = p.index * pTRange;\n        const pTimeE = pTRange + pTimeS - 1;\n        if (this.tStart === pTimeS) {\n            this.startV = p.yArray[0];\n        }\n        if (this.tEnd === pTimeE) {\n            this.endV = p.yArray[3];\n        }\n        if (pTimeE >= this.globalDataLen) {\n            if (pTimeS <= this.tEnd) {\n                if (p.yArray[1] < this.vRange[0]) {\n                    this.vRange[0] = p.yArray[1];\n                    const tRange = getIndexTime(p.level, p.index, this.maxLevel);\n                    this.minVTimeRange = [tRange.startT, tRange.endT];\n                }\n                if (p.yArray[2] > this.vRange[1]) {\n                    this.vRange[1] = p.yArray[2];\n                    const tRange = getIndexTime(p.level, p.index, this.maxLevel);\n                    this.maxVTimeRange = [tRange.startT, tRange.endT];\n                }\n            }\n            return 6;\n        }\n        if (pTimeS >= this.tStart && pTimeE <= this.tEnd) {\n            if (p.yArray[1] < this.vRange[0]) {\n                this.vRange[0] = p.yArray[1];\n                const tRange = getIndexTime(p.level, p.index, this.maxLevel);\n                this.minVTimeRange = [tRange.startT, tRange.endT];\n            }\n            if (p.yArray[2] > this.vRange[1]) {\n                this.vRange[1] = p.yArray[2];\n                const tRange = getIndexTime(p.level, p.index, this.maxLevel);\n                this.maxVTimeRange = [tRange.startT, tRange.endT];\n            }\n            return 1;\n        } else if (pTimeS <= this.tEnd && pTimeE > this.tEnd) {\n            return 2;\n        } else if (pTimeS > this.tEnd) {\n            return 3\n        } else if (pTimeE < this.tStart) {\n            // debugger\n            return 4;\n        } else if (pTimeE >= this.tStart) {\n            //debugger\n            return 5\n        } else {\n            console.log(p, this)\n            throw new Error(\"time out of range\")\n        }\n    }\n    isMissContain(p: TrendTree) {\n        const pL = p.level;\n        const pTRange = (2 ** this.maxLevel) / (2 ** pL);\n        const pTimeS = p.index * pTRange;\n        const pTimeE = pTRange + pTimeS - 1;\n\n        if (pTimeE >= this.globalDataLen) {\n            return 6;\n        }\n        if (pTimeS >= this.tStart && pTimeE <= this.tEnd) {\n            if(pTimeS==this.tStart&&pTimeE==this.tEnd){\n                return 7;\n            }else if(pTimeS===this.tStart){\n                return 8;\n            }else if(pTimeE===this.tEnd){\n                return 9;\n            }else if(p.gapFlag!=='NO'){\n                return 10\n            }\n            //console.log(pTimeS,pTimeE,this.tStart,this.tEnd)\n            return 1;\n        } else if (pTimeS <= this.tEnd && pTimeE > this.tEnd) {\n            return 2;\n        } else if (pTimeS > this.tEnd) {\n            return 3\n        } else if (pTimeE < this.tStart) {\n            return 4;\n        } else if (pTimeE >= this.tStart) {\n            return 5\n        } else {\n            console.log(p, this)\n            throw new Error(\"time out of range\")\n        }\n    }\n    containColumnRange(p: TrendTree, type: number) {\n        if (p.nodeType === \"NULL\") {\n            return\n        }\n        if ( p.yArray[1] === undefined || p.yArray[2] === undefined) {\n            debugger\n            throw new Error(\"error val\")\n        }\n        const pL = p.level;\n        const pTRange = (2 ** this.maxLevel) / (2 ** pL);\n        const pTimeS = p.index * pTRange;\n        const pTimeE = pTRange + pTimeS - 1;\n        if (this.tStart === pTimeS) {\n            // throw new Error(\"cannot use this val\")\n            // this.startV = p.yArray[0];\n        }\n        if (this.tEnd === pTimeE) {\n            // throw new Error(\"cannot use this val\")\n            // this.endV = 0;//p.yArray[3];\n        }\n        if (type === 6) {\n            // console.log(pTimeE)\n            // console.log(this.globalDataLen)\n            // console.error(\"type 6\");\n            //throw new Error(\"type 8\")\n        }\n        if (type === 1||type===7||type===8||type===9) {\n            if (p.yArray[1] < this.vRange[0]) {\n                this.vRange[0] = p.yArray[1];\n                const tRange = getIndexTime(p.level, p.index, this.maxLevel);\n                this.minVTimeRange = [tRange.startT, tRange.endT];\n            }\n            if (p.yArray[2] > this.vRange[1]) {\n                this.vRange[1] = p.yArray[2];\n                const tRange = getIndexTime(p.level, p.index, this.maxLevel);\n                this.maxVTimeRange = [tRange.startT, tRange.endT];\n            }\n            if(this.ordinalLevelCount === 0){\n                this.average = p.yArray[3];\n                this.currentSum += p.yArray[3] * pTRange;\n                this.currentPointNum += pTRange;\n                this.currentRange.push([pTimeS, pTimeE]);\n                this.ordinalLevelCount++;\n            }\n            else{\n                // let levelDif = 2 ** this.ordinalLevelCount;\n                // // let newAverage = (this.average + (1 / levelDif) * p.yArray[3]) / (1 + (1 / levelDif));\n                // let newAverage = (this.average * (levelDif - 1) * 2 + p.yArray[3]) / (levelDif * 2 - 1);\n                // this.average = newAverage;\n                this.currentSum += p.yArray[3] * pTRange;\n                this.currentPointNum += pTRange;\n                this.average = this.currentSum / this.currentPointNum;\n                this.currentRange.push([pTimeS, pTimeE]);\n                this.ordinalLevelCount++;\n            }\n            // if (p.parent && p.parent.nodeType === 'LEFTNULL') {\n            //     this.startV = p.yArray[0];\n            // }\n            // if (p.parent && p.parent.nodeType === 'RIGHTNULL') {\n            //     if (this.endV! > p.yArray[3]) {\n            //         throw new Error(\"dddddddddddd\")\n            //     }\n            //     this.endV = p.yArray[3];\n            // }\n        }\n        return;\n    }\n    containColumnRange2(p: TrendTree, p2: Array<TrendTree>, type: number, transform_symbol: any) {\n        if (p.nodeType === \"NULL\") {\n            return\n        }\n        if ( p.yArray[1] === undefined || p.yArray[2] === undefined) {\n            debugger\n            throw new Error(\"error val\")\n        }\n        const pL = p.level;\n        const pTRange = (2 ** this.maxLevel) / (2 ** pL);\n        const pTimeS = p.index * pTRange;\n        const pTimeE = pTRange + pTimeS - 1;\n        if (this.tStart === pTimeS) {\n            // throw new Error(\"cannot use this val\")\n            // this.startV = p.yArray[0];\n        }\n        if (this.tEnd === pTimeE) {\n            // throw new Error(\"cannot use this val\")\n            // this.endV = 0;//p.yArray[3];\n        }\n        if (type === 6) {\n            // console.log(pTimeE)\n            // console.log(this.globalDataLen)\n            // console.error(\"type 6\");\n            //throw new Error(\"type 8\")\n        }\n        if (type === 1||type===7||type===8||type===9) {\n            if (p.yArray[1] < this.vRange[0]) {\n                this.vRange[0] = p.yArray[1];\n                const tRange = getIndexTime(p.level, p.index, this.maxLevel);\n                this.minVTimeRange = [tRange.startT, tRange.endT];\n            }\n            if (p.yArray[2] > this.vRange[1]) {\n                this.vRange[1] = p.yArray[2];\n                const tRange = getIndexTime(p.level, p.index, this.maxLevel);\n                this.maxVTimeRange = [tRange.startT, tRange.endT];\n            }\n            if(this.ordinalLevelCount === 0){\n                this.average = p.yArray[3];\n                this.currentSum += p.yArray[3] * pTRange;\n                for(let i=0;i<p2.length;i++){\n                    // if(transform_symbol === '+'){\n                        this.average += p2[i].yArray[3];\n                        this.currentSum += p2[i].yArray[3] * pTRange;\n                    // }\n                    // else if(transform_symbol === '-'){\n                    //     this.average -= p2[i].yArray[3];\n                    //     this.currentSum -= p2[i].yArray[3] * pTRange;\n                    // }\n                }\n                this.currentPointNum += pTRange;\n                this.currentRange.push([pTimeS, pTimeE]);\n                this.ordinalLevelCount++;\n            }\n            else{\n                // let levelDif = 2 ** this.ordinalLevelCount;\n                // // let newAverage = (this.average + (1 / levelDif) * p.yArray[3]) / (1 + (1 / levelDif));\n                // let newAverage = (this.average * (levelDif - 1) * 2 + p.yArray[3]) / (levelDif * 2 - 1);\n                // this.average = newAverage;\n                this.currentSum += p.yArray[3] * pTRange;\n                for(let i=0;i<p2.length;i++){\n                    // if(transform_symbol === '+')\n                        this.currentSum += p2[i].yArray[3] * pTRange;\n                    // else if(transform_symbol === '-')\n                    //     this.currentSum -= p2[i].yArray[3] * pTRange;\n                }\n                this.currentPointNum += pTRange;\n                this.average = this.currentSum / this.currentPointNum;\n                this.currentRange.push([pTimeS, pTimeE]);\n                this.ordinalLevelCount++;\n            }\n            // if (p.parent && p.parent.nodeType === 'LEFTNULL') {\n            //     this.startV = p.yArray[0];\n            // }\n            // if (p.parent && p.parent.nodeType === 'RIGHTNULL') {\n            //     if (this.endV! > p.yArray[3]) {\n            //         throw new Error(\"dddddddddddd\")\n            //     }\n            //     this.endV = p.yArray[3];\n            // }\n        }\n        return;\n    }\n    // async computeTransform(p: TrendTree, p2:Array<TrendTree>, dataName: any, dataNames: any, levelDataManager: any, otherDataManager: any, type: number, currentFlagInfo: any, currentFlagInfo2: any, transform_symbol: any) {\n    async computeTransform(p: TrendTree, p2:Array <TrendTree>, type: number, currentFlagInfo: any, currentFlagInfo2: any, transform_symbol: any, count?: any) {\n        // let p = pp, p2 = pp2;\n        const pp = p, pp2 = p2.slice();\n        if (p.nodeType === \"NULL\") {\n            return\n        }\n        if ( p.yArray[1] === undefined || p.yArray[2] === undefined) {\n            debugger\n            throw new Error(\"error val\")\n        }\n        // const pL = p.level;\n        // const pTRange = (2 ** this.maxLevel) / (2 ** pL);\n        // const pTimeS = p.index * pTRange;\n        // const pTimeE = pTRange + pTimeS - 1;\n        // console.log(\"transform_symbol:\",transform_symbol);\n        let symbol = transform_symbol;\n        if((type === 1 || type === 7 || type ===8 || type === 9) && (symbol === '+' || symbol === 'avg')){\n            // let p = pp, p2 = pp2;\n            let min1 = p.yArray[1];\n            let min2 = 0;\n            for(let i=0;i<p2.length;i++){\n                min2 += p2[i].yArray[1];\n            } \n            let max1 = p.yArray[2];\n            let max2 = 0;\n            for(let i=0;i<p2.length;i++){\n                max2 += p2[i].yArray[2];\n            }\n\n            let min = (min1 + min2);\n            let max = (max1 + max2);\n            let tempMin;\n            let tempMax;\n            let minIndex: [number, number];\n            minIndex = [-1, Infinity];\n            let maxIndex: [number, number];\n            maxIndex = [-1, -Infinity];\n            // console.log(\"count:\", count);\n            let alternativeNodes = [];\n            let alternativeNodes2 = [];\n            // let p = pp, p2 = pp2;\n            while(max > -Infinity){\n                let temp_minL = 0, temp_minR = 0;\n                // const combinedUrl = `/line_chart/onlyChild?&p=${p}&p2=${p2}&dataName=${dataName}&dataNames=${dataNames}`;\n                // const data = get(combinedUrl);\n                // const difChild = await data;\n\n                // let needLoadChildNode: Array<TrendTree> = [];\n                // needLoadChildNode.push(p);\n                // let losedDataInfo = computeLosedDataRangeV1(needLoadChildNode);\n                // console.log(losedDataInfo);\n                // if (losedDataInfo.length > 0) {\n                //     batchLoadDataForRangeLevel1MinMaxMiss(losedDataInfo, levelDataManager);  //\n                //     for(let i=0; i<otherDataManager.length; i++)\n                //         batchLoadDataForRangeLevel1MinMaxMiss(losedDataInfo, otherDataManager[i]);\n                // }\n                // console.log(\"get child finished\");\n                if(!p._leftChild && !p._rightChild){\n                        let minL = 0, minR = 0;\n                        let nodeFlagInfo1 = currentFlagInfo[p.index * 2 + 1];\n                        if(nodeFlagInfo1 === 0){\n                            minL += p.yArray[1];\n                            minR += p.yArray[2];\n                        } \n                        else{\n                            minL += p.yArray[2];\n                            minR += p.yArray[1];\n                        }\n                        for(let i=0; i<currentFlagInfo2.length;++i){\n                            if(currentFlagInfo2[i][p.index * 2 + 1] === 0){\n                                minL += p2[i].yArray[1];\n                                minR += p2[i].yArray[2];\n                            }\n                            else{\n                                minL += p2[i].yArray[2];\n                                minR += p2[i].yArray[1];\n                            }\n                        }\n                        if(minL < minR){\n                            min = minL;\n                            minIndex = [p.index * 2, min];\n                        }\n                        else{\n                            min = minR;\n                            minIndex = [p.index * 2 + 1, min];\n                        }\n                        if(min < this.addMin[1]){\n                            this.addMin = minIndex;\n                        }\n                        // let nodeFlagInfo2 = currentFlagInfo2[p.index * 2 + 1];\n                        // if(nodeFlagInfo1 === 0 && nodeFlagInfo2 === 0){\n                        //     min = p.yArray[1] + p2.yArray[1];\n                        //     minIndex = [p.index * 2, min];\n                        // }\n                        // else if(nodeFlagInfo1 === 1 && nodeFlagInfo2 === 1){\n                        //     min = p.yArray[1] + p2.yArray[1];\n                        //     minIndex = [p.index * 2 + 1, min];\n                        // }\n                        // else if(nodeFlagInfo1 === 0 && nodeFlagInfo2 === 1){\n                        //     // min = Math.min(p.yArray[1] + p2.yArray[2], p.yArray[2] + p2.yArray[1]);\n                        //     if(p.yArray[1] + p2.yArray[2] < p.yArray[2] + p2.yArray[1]){\n                        //         min = p.yArray[1] + p2.yArray[2];\n                        //         minIndex = [p.index * 2, p.yArray[1] + p2.yArray[2]];\n                        //     }\n                        //     else{\n                        //         min = p.yArray[2] + p2.yArray[1];\n                        //         minIndex = [p.index * 2 + 1, p.yArray[2] + p2.yArray[1]];\n                        //     }\n                        // }\n                        // else{\n                        //     if(p.yArray[1] + p2.yArray[2] < p.yArray[2] + p2.yArray[1]){\n                        //         min = p.yArray[1] + p2.yArray[2];\n                        //         minIndex = [p.index * 2 + 1, p.yArray[1] + p2.yArray[2]];\n                        //     }\n                        //     else{\n                        //         min = p.yArray[2] + p2.yArray[1];\n                        //         minIndex = [p.index * 2, p.yArray[2] + p2.yArray[1]];\n                        //     }\n                        // }\n                        break;\n                }\n                if(p._leftChild){\n                    temp_minL = p._leftChild.yArray[1];\n                    for(let i=0;i<p2.length;++i){\n                        if(p2[i]._leftChild !== null){\n                            temp_minL += p2[i]._leftChild!.yArray[1];\n                        }\n                    }\n                }\n                if(p._rightChild){\n                    temp_minR = p._rightChild.yArray[1];\n                    for(let i=0;i<p2.length;++i){\n                        if(p2[i]._rightChild !== null){\n                            temp_minR += p2[i]._rightChild!.yArray[1];\n                        }\n                    }\n                }\n                if(temp_minL <= temp_minR && p._leftChild){\n                    let tempNode = [];\n                    tempMin = temp_minL;\n                    tempNode.push(p);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]);\n                    }\n                    tempNode.push(p._rightChild);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]._rightChild);\n                    }\n                    tempNode.push(temp_minR);\n                    alternativeNodes.push(tempNode);\n                    p = p._leftChild;\n                    for(let i=0;i<p2.length;++i){\n                        p2[i] = p2[i]._leftChild!;\n                    }\n                    count.count++;\n                }\n                else if(temp_minL > temp_minR && p._rightChild){\n                    let tempNode = [];\n                    tempMin = temp_minR;\n                    // alternativeNodes.push([p, p2, p._leftChild, p2._leftChild, temp_minL]);\n                    tempNode.push(p);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]);\n                    }\n                    tempNode.push(p._leftChild);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]._leftChild);\n                    }\n                    tempNode.push(temp_minL);\n                    p = p._rightChild;\n                    for(let i=0;i<p2.length;++i){\n                        p2[i] = p2[i]._rightChild!;\n                    }\n                    alternativeNodes.push(tempNode);\n                    count.count++;\n                }\n            }\n            // console.log(\"The bottom min(+):\", minIndex);\n            p = pp, p2 = pp2;\n            while(max > -Infinity){\n                let temp_maxL = 0, temp_maxR = 0;\n                // let needLoadChildNode: Array<TrendTree> = [];\n                // needLoadChildNode.push(p);\n                // let losedDataInfo = computeLosedDataRangeV1(needLoadChildNode);\n                // console.log(losedDataInfo);\n                // if (losedDataInfo.length > 0) {\n                //     batchLoadDataForRangeLevel1MinMaxMiss(losedDataInfo, levelDataManager);  //\n                //     for(let i=0; i<otherDataManager.length; i++)\n                //         batchLoadDataForRangeLevel1MinMaxMiss(losedDataInfo, otherDataManager[i]);\n                // }\n                if(!p._leftChild && !p._rightChild){\n                    let maxL = 0, maxR = 0;\n                    let nodeFlagInfo1 = currentFlagInfo[p.index * 2 + 1];\n                    if(nodeFlagInfo1 === 0){\n                        maxL += p.yArray[1];\n                        maxR += p.yArray[2];\n                    } \n                    else{\n                        maxL += p.yArray[2];\n                        maxR += p.yArray[1];\n                    }\n                    for(let i=0; i<currentFlagInfo2.length;++i){\n                        if(currentFlagInfo2[i][p.index * 2 + 1] === 0){\n                            maxL += p2[i].yArray[1];\n                            maxR += p2[i].yArray[2];\n                        }\n                        else{\n                            maxL += p2[i].yArray[2];\n                            maxR += p2[i].yArray[1];\n                        }\n                    }\n                    if(maxL > maxR){\n                        max = maxL;\n                        maxIndex = [p.index * 2, max];\n                    }\n                    else{\n                        max = maxR;\n                        maxIndex = [p.index * 2 + 1, max];\n                    }\n                    if(max > this.addMax[1]){\n                        this.addMax = maxIndex;\n                    }\n                    break;\n                }\n                if(p._leftChild){\n                    temp_maxL = p._leftChild.yArray[2];\n                    for(let i=0;i<p2.length;++i){\n                        if(p2[i]._leftChild !== null){\n                            temp_maxL += p2[i]._leftChild!.yArray[2];\n                        }\n                    }\n                }\n                if(p._rightChild){\n                    temp_maxR = p._rightChild.yArray[2];\n                    for(let i=0;i<p2.length;++i){\n                        if(p2[i]._rightChild !== null){\n                            temp_maxR += p2[i]._rightChild!.yArray[2];\n                        }\n                    }\n                }\n                if(temp_maxL <= temp_maxR && p._rightChild){\n                    let tempNode = [];\n                    tempMax = temp_maxR;\n                    tempNode.push(p);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]);\n                    }\n                    tempNode.push(p._leftChild);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]._leftChild);\n                    }\n                    tempNode.push(temp_maxL);\n                    alternativeNodes2.push(tempNode);\n                    p = p._rightChild!;\n                    for(let i=0;i<p2.length;++i){\n                        p2[i] = p2[i]._rightChild!;\n                    }\n                    count.count++;\n                }\n                else if(temp_maxL > temp_maxR && p._leftChild){\n                    let tempNode = [];\n                    tempMax = temp_maxL;\n                    tempNode.push(p);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]);\n                    }\n                    tempNode.push(p._rightChild);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]._rightChild);\n                    }\n                    tempNode.push(temp_maxR);\n                    alternativeNodes2.push(tempNode);\n                    p = p._leftChild!;\n                    for(let i=0;i<p2.length;++i){\n                        p2[i] = p2[i]._leftChild!;\n                    }\n                    count.count++;\n                }\n            }\n            // console.log(\"The bottom max(+):\", maxIndex);\n            // console.log(\"store.state.controlParams.stopEarly:\", store.state.controlParams.stopEarly);\n            if(store.state.controlParams.stopEarly === true){\n                alternativeNodes = [];\n                alternativeNodes2 = [];\n                // return;\n            }\n            // p = pp, p2 = pp3;\n            while(alternativeNodes.length > 0){\n                // console.log(\"No stop early!\");\n                let pop:any = alternativeNodes.pop();\n                // if(pop === undefined ) continue;\n                // console.log(\"pop:\", pop);\n                // if(Number(pop[pop.length-1]) > this.addMin[1]) continue;\n                // min = this.updateMinValue(p![0], min, alternativeNodes);\n                let len = pop.length;\n                let temp_minL = 0, temp_minR = 0;\n                if(!pop[Math.floor(len/2)]._leftChild && !pop[Math.floor(len/2)]._rightChild){\n                    let minL = 0, minR = 0;\n                    let nodeFlagInfo1 = currentFlagInfo[pop[Math.floor(len/2)].index * 2 + 1];\n                    if(nodeFlagInfo1 === 0){\n                        minL += pop[Math.floor(len/2)].yArray[1];\n                        minR += pop[Math.floor(len/2)].yArray[2];\n                    } \n                    else{\n                        minL += pop[Math.floor(len/2)].yArray[2];\n                        minR += pop[Math.floor(len/2)].yArray[1];\n                    }\n                    for(let i=0; i<currentFlagInfo2.length;++i){\n                        if(currentFlagInfo2[i][pop[Math.floor(len/2)].index * 2 + 1] === 0){\n                            minL += pop[Math.floor(len/2)+i+1].yArray[1];\n                            minR += pop[Math.floor(len/2)+i+1].yArray[2];\n                        }\n                        else{\n                            minL += pop[Math.floor(len/2)+i+1].yArray[2];\n                            minR += pop[Math.floor(len/2)+i+1].yArray[1];\n                        }\n                    }\n                    if(minL < minR){\n                        min = minL;\n                        minIndex = [pop[Math.floor(len/2)].index * 2, min];\n                    }\n                    else{\n                        min = minR;\n                        minIndex = [pop[Math.floor(len/2)].index * 2 + 1, min];\n                    }\n                    if(min < this.addMin[1]){\n                        this.addMin = minIndex;\n                    }\n                    continue;\n                }\n                if(pop[Math.floor(len/2)]._leftChild){\n                    let index = Math.floor(len / 2);\n                    for(let i = index; i < index * 2; ++i){\n                        temp_minL += pop[i]._leftChild.yArray[1];\n                    }\n                    if(temp_minL < this.addMin[1]){\n                        let tempNode = [];\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]);\n                        }\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]._leftChild);\n                        }\n                        tempNode.push(temp_minL);\n                        alternativeNodes.push(tempNode);\n                        count.count++;\n                    }\n                }\n                if(pop[Math.floor(len/2)]._rightChild){\n                    // temp_minR = (pop[2]._rightChild.yArray[1] + pop[3]._rightChild.yArray[1]);\n                    // if(temp_minR < min)\n                    //     alternativeNodes.push([pop[2], pop[3], pop[2]._rightChild, pop[3]._rightChild, temp_minR]);\n                    let index = Math.floor(len / 2);\n                    for(let i = index; i < index * 2; ++i){\n                        temp_minR += pop[i]._rightChild.yArray[1];\n                    }\n                    if(temp_minR < this.addMin[1]){\n                        let tempNode = [];\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]);\n                        }\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]._rightChild);\n                        }\n                        tempNode.push(temp_minR);\n                        alternativeNodes.push(tempNode);\n                        count.count++;\n                    }\n                }\n            }\n            // p = pp, p2 = pp4;\n            while(alternativeNodes2.length > 0){\n                let pop:any = alternativeNodes2.pop();\n                // if(pop === undefined) continue;\n                // if(Number(pop[pop.length-1]) < this.addMax[1]) continue;\n                let len = pop.length;\n                let temp_maxL = 0, temp_maxR = 0;\n                if(!pop[Math.floor(len/2)]._leftChild && !pop[Math.floor(len/2)]._rightChild){\n                    let maxL = 0, maxR = 0;\n                    let nodeFlagInfo1 = currentFlagInfo[pop[Math.floor(len/2)].index * 2 + 1];\n                    if(nodeFlagInfo1 === 0){\n                        maxL += pop[Math.floor(len/2)].yArray[1];\n                        maxR += pop[Math.floor(len/2)].yArray[2];\n                    } \n                    else{\n                        maxL += pop[Math.floor(len/2)].yArray[2];\n                        maxR += pop[Math.floor(len/2)].yArray[1];\n                    }\n                    for(let i=0; i<currentFlagInfo2.length;++i){\n                        if(currentFlagInfo2[i][p.index * 2 + 1] === 0){\n                            maxL += pop[Math.floor(len/2)+i+1].yArray[1];\n                            maxR += pop[Math.floor(len/2)+i+1].yArray[2];\n                        }\n                        else{\n                            maxL += pop[Math.floor(len/2)+i+1].yArray[2];\n                            maxR += pop[Math.floor(len/2)+i+1].yArray[1];\n                        }\n                    }\n                    if(maxL > maxR){\n                        max = maxL;\n                        maxIndex = [pop[Math.floor(len/2)].index * 2, max];\n                    }\n                    else{\n                        max = maxR;\n                        maxIndex = [pop[Math.floor(len/2)].index * 2 + 1, max];\n                    }\n                    if(max > this.addMax[1]){\n                        this.addMax = maxIndex;\n                    }\n                    // let nodeFlagInfo1 = currentFlagInfo[(pop[2].index) * 2 + 1];\n                    // let nodeFlagInfo2 = currentFlagInfo2[(pop[2].index) * 2 + 1];\n                    // if(nodeFlagInfo1 === 0 && nodeFlagInfo2 === 0){\n                    //     // min = Math.min(pop[2].yArray[1] + pop[3].yArray[1], min);\n                    //     if(pop[2].yArray[2] + pop[3].yArray[2] > max){\n                    //         max = pop[2].yArray[2] + pop[3].yArray[2];\n                    //         maxIndex = [pop[2].index * 2 + 1, max]\n                    //     }\n                    // }\n                    // else if(nodeFlagInfo1 === 1 && nodeFlagInfo2 === 1){\n                    //     // min = Math.min(pop[2].yArray[1] + pop[3].yArray[1], min);\n                    //     if(pop[2].yArray[1] + pop[3].yArray[1] > max){\n                    //         max = pop[2].yArray[2] + pop[3].yArray[2];\n                    //         maxIndex = [pop[2].index * 2, max]\n                    //     }\n                    // }\n                    // else if(nodeFlagInfo1 === 0 && nodeFlagInfo2 === 1){\n                    //     // min = Math.min(Math.min(pop[2].yArray[1] + pop[3].yArray[2], pop[2].yArray[2] + pop[3].yArray[1]), min);\n                    //     if(pop[2].yArray[1] + pop[3].yArray[2] > max){\n                    //         max = pop[2].yArray[1] + pop[3].yArray[2];\n                    //         maxIndex = [pop[2].index * 2, max]\n                    //     }\n                    //     else if(pop[2].yArray[2] + pop[3].yArray[1] > max){\n                    //         max = pop[2].yArray[2] + pop[3].yArray[1];\n                    //         maxIndex = [pop[2].index * 2 + 1, max]\n                    //     }\n                    // }\n                    // else{\n                    //     if(pop[2].yArray[1] + pop[3].yArray[2] > max){\n                    //         max = pop[2].yArray[1] + pop[3].yArray[2];\n                    //         maxIndex = [pop[2].index * 2 + 1, max]\n                    //     }\n                    //     else if(pop[2].yArray[2] + pop[3].yArray[1] > max){\n                    //         max = pop[2].yArray[2] + pop[3].yArray[1];\n                    //         maxIndex = [pop[2].index * 2, max]\n                    //     }\n                    // }\n                    continue;\n                }\n                if(pop[Math.floor(len/2)]._leftChild){\n                    // temp_maxL = (pop[2]._leftChild.yArray[2] + pop[3]._leftChild.yArray[2]);\n                    // if(temp_maxL > max)\n                    //     alternativeNodes2.push([pop[2], pop[3], pop[2]._leftChild, pop[3]._leftChild, temp_maxL]);\n                    let index = Math.floor(len / 2);\n                    for(let i = index; i < index * 2; ++i){\n                        temp_maxL += pop[i]._leftChild.yArray[2];\n                    }\n                    if(temp_maxL > this.addMax[1]){\n                        let tempNode = [];\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]);\n                        }\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]._leftChild);\n                        }\n                        tempNode.push(temp_maxL);\n                        alternativeNodes2.push(tempNode);\n                        count.count++;\n                    }\n                }\n                if(pop[Math.floor(len/2)]._rightChild){\n                    // temp_maxR = (pop[2]._rightChild.yArray[2] + pop[3]._rightChild.yArray[2]);\n                    // if(temp_maxR > max)\n                    //     alternativeNodes2.push([pop[2], pop[3], pop[2]._rightChild, pop[3]._rightChild, temp_maxR]);\n                    let index = Math.floor(len / 2);\n                    for(let i = index; i < index * 2; ++i){\n                        temp_maxR += pop[i]._rightChild.yArray[2];\n                    }\n                    if(temp_maxR > this.addMax[1]){\n                        let tempNode = [];\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]);\n                        }\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]._rightChild);\n                        }\n                        tempNode.push(temp_maxR);\n                        alternativeNodes2.push(tempNode);\n                        count.count++;\n                    }\n                }\n            }\n            // console.log(\"The final max(+):\", maxIndex);          \n            // console.log(\"The final min(+):\", minIndex);\n            if(min < this.addMin[1]){\n                this.addMin = minIndex;\n            }\n            if(max > this.addMax[1]){\n                this.addMax = maxIndex;\n            }\n        }\n        else if((type === 1 || type === 7 || type ===8 || type === 9) && symbol === '-'){\n            // let p = pp, p2 = pp2;\n            let min1 = p.yArray[1];\n            let min2 = 0;\n            for(let i=0;i<p2.length;i++){\n                min2 += p2[i].yArray[1];\n            }  \n            let max1 = p.yArray[2];\n            let max2 = 0;\n            for(let i=0;i<p2.length;i++){\n                max2 += p2[i].yArray[2];\n            }\n\n            let min = (min1 - max2);\n            let max = (max2 - min1);\n            let tempMin;\n            let tempMax;\n            let minIndex: [number, number];\n            minIndex = [-1, Infinity];\n            let maxIndex: [number, number];\n            maxIndex = [-1, -Infinity];\n\n            let alternativeNodes = [];\n            let alternativeNodes2 = [];\n            while(max > -Infinity){\n                let temp_minL = 0, temp_minR = 0;\n                if(!p._leftChild && !p._rightChild){\n                    let minL = 0, minR = 0;\n                    let nodeFlagInfo1 = currentFlagInfo[p.index * 2 + 1];\n                    if(nodeFlagInfo1 === 0){\n                        minL += p.yArray[1];\n                        minR += p.yArray[2];\n                    } \n                    else{\n                        minL += p.yArray[2];\n                        minR += p.yArray[1];\n                    }\n                    for(let i=0; i<currentFlagInfo2.length;++i){\n                        if(currentFlagInfo2[i][p.index * 2 + 1] === 0){\n                            minL -= p2[i].yArray[1];\n                            minR -= p2[i].yArray[2];\n                        }\n                        else{\n                            minL -= p2[i].yArray[2];\n                            minR -= p2[i].yArray[1];\n                        }\n                    }\n                    if(minL < minR){\n                        min = minL;\n                        minIndex = [p.index * 2, min];\n                    }\n                    else{\n                        min = minR;\n                        minIndex = [p.index * 2 + 1, min];\n                    }\n                    if(min < this.subMin[1]){\n                        this.subMin = minIndex;\n                    }\n                    // let nodeFlagInfo1 = currentFlagInfo[p.index * 2 + 1];\n                    // let nodeFlagInfo2 = currentFlagInfo2[p.index * 2 + 1];\n                    // if(nodeFlagInfo1 === 0 && nodeFlagInfo2 === 0){\n                    //     min = Math.min(p.yArray[1] - p2.yArray[1], p.yArray[2] - p2.yArray[2]);\n                    // }\n                    // else if(nodeFlagInfo1 === 1 && nodeFlagInfo2 === 1){\n                    //     min = Math.min(p.yArray[1] - p2.yArray[1], p.yArray[2] - p2.yArray[2]);\n                    // }\n                    // else{\n                    //     min = Math.min(p.yArray[1] - p2.yArray[2], p.yArray[2] - p2.yArray[1]);\n                    // }\n                    break;\n                }\n                if(p._leftChild){\n                    // temp_minL = (p._leftChild.yArray[1] - p2._leftChild.yArray[2]);\n                    temp_minL = p._leftChild.yArray[1];\n                    for(let i=0;i<p2.length;++i){\n                        if(p2[i]._leftChild !== null){\n                            temp_minL -= p2[i]._leftChild!.yArray[2];\n                        }\n                    }\n                }\n                if(p._rightChild){\n                    // temp_minR = (p._rightChild.yArray[1] - p2._rightChild.yArray[2]);\n                    temp_minR = p._rightChild.yArray[1];\n                    for(let i=0;i<p2.length;++i){\n                        if(p2[i]._rightChild !== null){\n                            temp_minR -= p2[i]._rightChild!.yArray[2];\n                        }\n                    }\n                }\n                if(temp_minL <= temp_minR && p._leftChild){\n                    // tempMin = temp_minL;\n                    // alternativeNodes.push([p, p2, p._rightChild, p2._rightChild, temp_minR]);\n                    // p = p._leftChild;\n                    // p2 = p2._leftChild;\n                    let tempNode = [];\n                    tempMin = temp_minL;\n                    tempNode.push(p);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]);\n                    }\n                    tempNode.push(p._rightChild);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]._rightChild);\n                    }\n                    tempNode.push(temp_minR);\n                    alternativeNodes.push(tempNode);\n                    p = p._leftChild;\n                    for(let i=0;i<p2.length;++i){\n                        p2[i] = p2[i]._leftChild!;\n                    }\n                    count.count++;\n                }\n                else if(temp_minL > temp_minR && p._rightChild){\n                    // tempMin = temp_minR;\n                    // alternativeNodes.push([p, p2, p._leftChild, p2._leftChild, temp_minL]);\n                    // p = p._rightChild;\n                    // p2 = p2._rightChild;\n                    let tempNode = [];\n                    tempMin = temp_minR;\n                    // alternativeNodes.push([p, p2, p._leftChild, p2._leftChild, temp_minL]);\n                    tempNode.push(p);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]);\n                    }\n                    tempNode.push(p._leftChild);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]._leftChild);\n                    }\n                    tempNode.push(temp_minL);\n                    p = p._rightChild;\n                    for(let i=0;i<p2.length;++i){\n                        p2[i] = p2[i]._rightChild!;\n                    }\n                    alternativeNodes.push(tempNode);\n                    count.count++;\n                }\n                \n            }\n            // console.log(\"The bottom min(-):\", minIndex);\n            p = pp, p2 = pp2;\n            while(max > -Infinity){\n                let temp_maxL = 0, temp_maxR = 0;\n                if(!p._leftChild && !p._rightChild){\n                    let maxL = 0, maxR = 0;\n                    let nodeFlagInfo1 = currentFlagInfo[p.index * 2 + 1];\n                    if(nodeFlagInfo1 === 0){\n                        maxL += p.yArray[1];\n                        maxR += p.yArray[2];\n                    } \n                    else{\n                        maxL += p.yArray[2];\n                        maxR += p.yArray[1];\n                    }\n                    for(let i=0; i<currentFlagInfo2.length;++i){\n                        if(currentFlagInfo2[i][p.index * 2 + 1] === 0){\n                            maxL -= p2[i].yArray[1];\n                            maxR -= p2[i].yArray[2];\n                        }\n                        else{\n                            maxL -= p2[i].yArray[2];\n                            maxR -= p2[i].yArray[1];\n                        }\n                    }\n                    if(maxL > maxR){\n                        max = maxL;\n                        maxIndex = [p.index * 2, max];\n                    }\n                    else{\n                        max = maxR;\n                        maxIndex = [p.index * 2 + 1, max];\n                    }\n                    if(max > this.subMax[1]){\n                        this.subMax = maxIndex;\n                    }\n                    // let nodeFlagInfo1 = currentFlagInfo[p.index * 2 + 1];\n                    // let nodeFlagInfo2 = currentFlagInfo2[p.index * 2 + 1];\n                    // if(nodeFlagInfo1 === 0 && nodeFlagInfo2 === 0){\n                    //     max = Math.max(p.yArray[1] - p2.yArray[1], p.yArray[2] - p2.yArray[2]);\n                    // }\n                    // else if(nodeFlagInfo1 === 1 && nodeFlagInfo2 === 1){\n                    //     max = Math.max(p.yArray[1] - p2.yArray[1], p.yArray[2] - p2.yArray[2]);\n                    // }\n                    // else{\n                    //     max = Math.max(p.yArray[1] - p2.yArray[2], p.yArray[2] - p2.yArray[1]);\n                    // }\n                    break;\n                }\n                if(p._leftChild){\n                    // temp_maxL = (p._leftChild.yArray[2] - p2._leftChild.yArray[1]);\n                    temp_maxL = p._leftChild.yArray[2];\n                    for(let i=0;i<p2.length;++i){\n                        if(p2[i]._leftChild !== null){\n                            temp_maxL -= p2[i]._leftChild!.yArray[1];\n                        }\n                    }\n                }\n                if(p._rightChild){\n                    // temp_maxR = (p._rightChild.yArray[2] - p2._rightChild.yArray[1]);\n                    temp_maxR = p._rightChild.yArray[2];\n                    for(let i=0;i<p2.length;++i){\n                        if(p2[i]._rightChild !== null){\n                            temp_maxR -= p2[i]._rightChild!.yArray[1];\n                        }\n                    }\n                }\n                if(temp_maxL <= temp_maxR && p._rightChild){\n                    // alternativeNodes.push([p, p2, p._rightChild, p2._rightChild, temp_maxL]);\n                    // p = p._leftChild;\n                    // p2 = p2._leftChild;\n                    let tempNode = [];\n                    tempMax = temp_maxR;\n                    tempNode.push(p);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]);\n                    }\n                    tempNode.push(p._leftChild);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]._leftChild);\n                    }\n                    tempNode.push(temp_maxL);\n                    alternativeNodes2.push(tempNode);\n                    p = p._rightChild;\n                    for(let i=0;i<p2.length;++i){\n                        p2[i] = p2[i]._rightChild!;\n                    }\n                    count.count++;\n                }\n                else if(temp_maxL > temp_maxR && p._leftChild){\n                    // alternativeNodes.push([p, p2, p._leftChild, p2._leftChild, temp_maxR]);\n                    // p = p._rightChild;\n                    // p2 = p2._rightChild;\n                    let tempNode = [];\n                    tempMax = temp_maxL;\n                    tempNode.push(p);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]);\n                    }\n                    tempNode.push(p._rightChild);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]._rightChild);\n                    }\n                    tempNode.push(temp_maxR);\n                    alternativeNodes2.push(tempNode);\n                    p = p._leftChild;\n                    for(let i=0;i<p2.length;++i){\n                        p2[i] = p2[i]._leftChild!;\n                    }\n                    count.count++;\n                }\n            }\n            // console.log(\"The bottom max(-):\", maxIndex);\n            if(store.state.controlParams.stopEarly === true){\n                alternativeNodes = [];\n                alternativeNodes2 = [];\n            }\n            p = pp, p2 = pp2;\n            while(alternativeNodes.length > 0){\n                // console.log(\"alternativeNodes:\", alternativeNodes);\n                let pop:any = alternativeNodes.pop();\n                if(pop === undefined ) continue;\n                // if(Number(pop[pop.length-1]) > this.subMin[1]) continue;\n                // let p:[TrendTree, number] = alternativeNodes.pop();\n                // console.log(\"pop:\", pop);\n                // if(Number(pop[pop.length-1]) > min) continue;\n                // min = this.updateMinValue(p![0], min, alternativeNodes);\n                let temp_minL = 0, temp_minR = 0;\n                let len = pop.length;\n                if(!pop[Math.floor(len/2)]._leftChild && !pop[Math.floor(len/2)]._rightChild){\n                    let minL = 0, minR = 0;\n                    let nodeFlagInfo1 = currentFlagInfo[pop[Math.floor(len/2)].index * 2 + 1];\n                    if(nodeFlagInfo1 === 0){\n                        minL += pop[Math.floor(len/2)].yArray[1];\n                        minR += pop[Math.floor(len/2)].yArray[2];\n                    } \n                    else{\n                        minL += pop[Math.floor(len/2)].yArray[2];\n                        minR += pop[Math.floor(len/2)].yArray[1];\n                    }\n                    for(let i=0; i<currentFlagInfo2.length;++i){\n                        if(currentFlagInfo2[i][pop[Math.floor(len/2)].index * 2 + 1] === 0){\n                            minL -= pop[Math.floor(len/2)+i+1].yArray[1];\n                            minR -= pop[Math.floor(len/2)+i+1].yArray[2];\n                        }\n                        else{\n                            minL -= pop[Math.floor(len/2)+i+1].yArray[2];\n                            minR -= pop[Math.floor(len/2)+i+1].yArray[1];\n                        }\n                    }\n                    if(minL < minR){\n                        min = minL;\n                        minIndex = [pop[Math.floor(len/2)].index * 2, min];\n                    }\n                    else{\n                        min = minR;\n                        minIndex = [pop[Math.floor(len/2)].index * 2 + 1, min];\n                    }\n                    if(min < this.subMin[1]){\n                        this.subMin = minIndex;\n                    }\n                    // let nodeFlagInfo1 = currentFlagInfo[(pop[2].index) * 2 + 1];\n                    // let nodeFlagInfo2 = currentFlagInfo2[(pop[2].index) * 2 + 1];\n                    // if(nodeFlagInfo1 === 0 && nodeFlagInfo2 === 0){\n                    //     min = Math.min(Math.min(pop[2].yArray[1] - pop[3].yArray[1], pop[2].yArray[2] - pop[3].yArray[2]), min);\n                    // }\n                    // else if(nodeFlagInfo1 === 1 && nodeFlagInfo2 === 1){\n                    //     min = Math.min(Math.min(pop[2].yArray[1] - pop[3].yArray[1], pop[2].yArray[2] - pop[3].yArray[2]), min);\n                    // }\n                    // else{\n                    //     min = Math.min(Math.min(pop[2].yArray[1] - pop[3].yArray[2], pop[2].yArray[2] - pop[3].yArray[1]), min);\n                    // }\n                    continue;\n                }\n                if(pop[Math.floor(len/2)]._leftChild){\n                    // temp_minL = (pop[2]._leftChild.yArray[1] - pop[3]._leftChild.yArray[2]);\n                    // if(temp_minL < min)\n                    //     alternativeNodes.push([pop[2], pop[3], pop[2]._leftChild, pop[3]._leftChild, temp_minL]);\n                    let index = Math.floor(len / 2);\n                    temp_minL = pop[index]._leftChild.yArray[1];\n                    for(let i = index + 1; i < index * 2; ++i){\n                        temp_minL -= pop[i]._leftChild.yArray[2];\n                    }\n                    // temp_minL = (pop[2]._leftChild.yArray[1] + pop[3]._leftChild.yArray[1]);\n                    // if(temp_minL < min){\n                        let tempNode = [];\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]);\n                        }\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]._leftChild);\n                        }\n                        tempNode.push(temp_minL);\n                        alternativeNodes.push(tempNode);\n                        count.count++;\n                    // }\n                }\n                if(pop[Math.floor(len/2)]._rightChild){\n                    // temp_minR = (pop[2]._rightChild.yArray[1] - pop[3]._rightChild.yArray[2]);\n                    // if(temp_minR < min)\n                    //     alternativeNodes.push([pop[2], pop[3], pop[2]._rightChild, pop[3]._rightChild, temp_minR]);\n                    let index = Math.floor(len / 2);\n                    temp_minR = pop[index]._rightChild.yArray[1];\n                    for(let i = index + 1; i < index * 2; ++i){\n                        temp_minR -= pop[i]._rightChild.yArray[2];\n                    }\n                    // temp_minL = (pop[2]._leftChild.yArray[1] + pop[3]._leftChild.yArray[1]);\n                    // if(temp_minR < min){\n                        let tempNode = [];\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]);\n                        }\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]._rightChild);\n                        }\n                        tempNode.push(temp_minR);\n                        alternativeNodes.push(tempNode);\n                        count.count++;\n                    // }\n                }\n                // console.log(\"The final min(-):\", min);\n                // this.subMin = Math.min(min, this.subMin);\n            }\n            p = pp, p2 = pp2;\n            while(alternativeNodes2.length > 0){\n                // console.log(\"alternativeNodes2:\", alternativeNodes2);\n                let pop:any = alternativeNodes2.pop();\n                if(pop === undefined ) continue;\n                // if(Number(pop[pop.length-1]) < this.subMax[1]) continue;\n                // console.log(\"pop:\", pop);\n                // if(Number(pop[pop.length-1]) < max) continue;\n                let len = pop.length;\n                let temp_maxL = 0, temp_maxR = 0;\n                if(!pop[Math.floor(len/2)]._leftChild && !pop[Math.floor(len/2)]._rightChild){\n                    let maxL = 0, maxR = 0;\n                    let nodeFlagInfo1 = currentFlagInfo[pop[Math.floor(len/2)].index * 2 + 1];\n                    if(nodeFlagInfo1 === 0){\n                        maxL += pop[Math.floor(len/2)].yArray[1];\n                        maxR += pop[Math.floor(len/2)].yArray[2];\n                    } \n                    else{\n                        maxL += pop[Math.floor(len/2)].yArray[2];\n                        maxR += pop[Math.floor(len/2)].yArray[1];\n                    }\n                    for(let i=0; i<currentFlagInfo2.length;++i){\n                        if(currentFlagInfo2[i][pop[Math.floor(len/2)].index * 2 + 1] === 0){\n                            maxL -= pop[Math.floor(len/2)+i+1].yArray[1];\n                            maxR -= pop[Math.floor(len/2)+i+1].yArray[2];\n                        }\n                        else{\n                            maxL -= pop[Math.floor(len/2)+i+1].yArray[2];\n                            maxR -= pop[Math.floor(len/2)+i+1].yArray[1];\n                        }\n                    }\n                    if(maxL > maxR){\n                        max = maxL;\n                        maxIndex = [pop[Math.floor(len/2)].index * 2, max];\n                    }\n                    else{\n                        max = maxR;\n                        maxIndex = [pop[Math.floor(len/2)].index * 2 + 1, max];\n                    }\n                    if(max > this.subMax[1]){\n                        this.subMax = maxIndex;\n                    }\n                    // let nodeFlagInfo1 = currentFlagInfo[(pop[2].index) * 2 + 1];\n                    // let nodeFlagInfo2 = currentFlagInfo2[(pop[2].index) * 2 + 1];\n                    // if(nodeFlagInfo1 === 0 && nodeFlagInfo2 === 0){\n                    //     max = Math.max(Math.max(pop[2].yArray[1] - pop[3].yArray[1], pop[2].yArray[2] - pop[3].yArray[2]), max);\n                    // }\n                    // else if(nodeFlagInfo1 === 1 && nodeFlagInfo2 === 1){\n                    //     max = Math.max(Math.max(pop[2].yArray[1] - pop[3].yArray[1], pop[2].yArray[2] - pop[3].yArray[2]), max);\n                    // }\n                    // else{\n                    //     max = Math.max(Math.max(pop[2].yArray[1] - pop[3].yArray[2], pop[2].yArray[2] - pop[3].yArray[1]), max);\n                    // }\n                    continue;\n                }\n                if(pop[Math.floor(len/2)]._leftChild){\n                    // temp_maxL = (pop[2]._leftChild.yArray[2] - pop[3]._leftChild.yArray[1]);\n                    // if(temp_maxL > max)\n                    //     alternativeNodes.push([pop[2], pop[3], pop[2]._leftChild, pop[3]._leftChild, temp_maxL]);\n                    let index = Math.floor(len / 2);\n                    temp_maxL = pop[index]._leftChild.yArray[2];\n                    for(let i = index + 1; i < index * 2; ++i){\n                        temp_maxL -= pop[i]._leftChild.yArray[1];\n                    }\n                    // if(temp_maxL > max){\n                        let tempNode = [];\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]);\n                        }\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]._leftChild);\n                        }\n                        tempNode.push(temp_maxL);\n                        alternativeNodes2.push(tempNode);\n                        count.count++;\n                    // }\n                }\n                if(pop[Math.floor(len/2)]._rightChild){\n                    // temp_maxR = (pop[2]._rightChild.yArray[2] - pop[3]._rightChild.yArray[1]);\n                    // if(temp_maxR > max)\n                    //     alternativeNodes.push([pop[2], pop[3], pop[2]._rightChild, pop[3]._rightChild, temp_maxR]);\n                    let index = Math.floor(len / 2);\n                    temp_maxR = pop[index]._rightChild.yArray[2];\n                    for(let i = index; i < index * 2; ++i){\n                        temp_maxR -= pop[i]._rightChild.yArray[1];\n                    }\n                    // if(temp_maxR > max){\n                        let tempNode = [];\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]);\n                        }\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]._rightChild);\n                        }\n                        tempNode.push(temp_maxR);\n                        alternativeNodes2.push(tempNode);\n                        count.count++;\n                    // }\n                }\n            }\n                     \n            // console.log(\"The final min(-):\", minIndex);\n            // console.log(\"The final max(-):\", maxIndex); \n            if(min < this.subMin[1]){\n                this.subMin = minIndex;\n            }\n            if(max > this.subMax[1]){\n                this.subMax = maxIndex;\n            }\n        }\n        else if((type === 1 || type === 7 || type ===8 || type === 9) && symbol === '*'){\n            // let p = pp, p2 = pp2;\n            let min1 = p.yArray[1];\n            let min2 = 1;\n            for(let i=0;i<p2.length;i++){\n                min2 *= p2[i].yArray[1];\n            }   \n            let max1 = p.yArray[2];\n            let max2 = 1;\n            for(let i=0; i<p2.length; ++i){\n                max2 *= p2[i].yArray[2];\n            } \n            let min = (min1 * min2);\n            let max = (max1 * max2);\n            let minIndex : [number, number];\n            minIndex = [-1, Infinity];\n            let maxIndex: [number, number];\n            maxIndex = [-1, -Infinity];\n\n            let alternativeNodes = [];\n            let alternativeNodes2 = [];\n            while(max > -Infinity){\n                let temp_minL = 0, temp_minR = 0;\n                if(!p._leftChild && !p._rightChild){\n                    let minL = 0, minR = 0;\n                    let nodeFlagInfo1 = currentFlagInfo[p.index * 2 + 1];\n                    if(nodeFlagInfo1 === 0){\n                        minL += p.yArray[1];\n                        minR += p.yArray[2];\n                    } \n                    else{\n                        minL += p.yArray[2];\n                        minR += p.yArray[1];\n                    }\n                    for(let i=0; i<currentFlagInfo2.length;++i){\n                        if(currentFlagInfo2[i][p.index * 2 + 1] === 0){\n                            minL *= p2[i].yArray[1];\n                            minR *= p2[i].yArray[2];\n                        }\n                        else{\n                            minL *= p2[i].yArray[2];\n                            minR *= p2[i].yArray[1];\n                        }\n                    }\n                    if(minL < minR){\n                        min = minL;\n                        minIndex = [p.index * 2, min];\n                    }\n                    else{\n                        min = minR;\n                        minIndex = [p.index * 2 + 1, min];\n                    }\n                    if(min < this.multiMin[1]){\n                        this.multiMin = minIndex;\n                    }\n                    break;\n                }\n                if(p._leftChild){\n                    // temp_minL = Math.min(p._leftChild.yArray[1] * p2[0]._leftChild!.yArray[1], p._leftChild.yArray[1] * p2[0]._leftChild!.yArray[2], p._leftChild.yArray[2] * p2[0]._leftChild!.yArray[1], p._leftChild.yArray[2] * p2[0]._leftChild!.yArray[2]);\n                    let tempArray = [];\n                    tempArray.push(p._leftChild.yArray[1]);\n                    tempArray.push(p._leftChild.yArray[2]);\n                    for(let i = 0; i<p2.length; ++i){\n                        let len = tempArray.length;\n                         for(let j = 0; j<len; ++j){\n                            tempArray.push(tempArray[j] * p2[i]._leftChild!.yArray[1]);\n                            tempArray.push(tempArray[j] * p2[i]._leftChild!.yArray[2]);\n                        }\n                        for(let j = 0; j<len; ++j){\n                            tempArray.shift();\n                        }   \n                    }\n                    // console.log(tempArray);\n                    temp_minL = Math.min(...tempArray);\n                }\n                if(p._rightChild){\n                    // temp_minR = Math.min(p._rightChild.yArray[1] * p2[0]._rightChild!.yArray[1], p._rightChild.yArray[1] * p2[0]._rightChild!.yArray[2], p._rightChild.yArray[2] * p2[0]._rightChild!.yArray[1], p._rightChild.yArray[2] * p2[0]._rightChild!.yArray[2]);\n                    let tempArray = [];\n                    tempArray.push(p._rightChild.yArray[1]);\n                    tempArray.push(p._rightChild.yArray[2]);\n                    for(let i = 0; i<p2.length; ++i){\n                        let len = tempArray.length;\n                         for(let j = 0; j<len; ++j){\n                            tempArray.push(tempArray[j] * p2[i]._rightChild!.yArray[1]);\n                            tempArray.push(tempArray[j] * p2[i]._rightChild!.yArray[2]);\n                        }   \n                        for(let j = 0; j<len; ++j){\n                            tempArray.shift();\n                        }   \n                    }\n                    // console.log(tempArray);\n                    temp_minR = Math.min(...tempArray);\n                }\n                if(temp_minL <= temp_minR && p._leftChild){\n                    let tempNode = [];\n                    tempNode.push(p);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]);\n                    }\n                    tempNode.push(p._rightChild);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]._rightChild);\n                    }\n                    tempNode.push(temp_minR);\n                    alternativeNodes.push(tempNode);\n                    p = p._leftChild;\n                    for(let i=0;i<p2.length;++i){\n                        p2[i] = p2[i]._leftChild!;\n                    }\n                    count.count++;\n                }\n                else if(temp_minL > temp_minR && p._rightChild){\n                    let tempNode = [];\n                    // alternativeNodes.push([p, p2, p._leftChild, p2._leftChild, temp_minL]);\n                    tempNode.push(p);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]);\n                    }\n                    tempNode.push(p._leftChild);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]._leftChild);\n                    }\n                    tempNode.push(temp_minL);\n                    p = p._rightChild;\n                    for(let i=0;i<p2.length;++i){\n                        p2[i] = p2[i]._rightChild!;\n                    }\n                    alternativeNodes.push(tempNode);\n                    count.count++;\n                }\n            }\n            // console.log(\"The bottom min(*):\", minIndex);\n            p = pp, p2 = pp2;\n            while(max > -Infinity){\n                let temp_maxL = 0, temp_maxR = 0;\n                if(!p._leftChild && !p._rightChild){\n                    let maxL = 0, maxR = 0;\n                    let nodeFlagInfo1 = currentFlagInfo[p.index * 2 + 1];\n                    if(nodeFlagInfo1 === 0){\n                        maxL += p.yArray[1];\n                        maxR += p.yArray[2];\n                    } \n                    else{\n                        maxL += p.yArray[2];\n                        maxR += p.yArray[1];\n                    }\n                    for(let i=0; i<currentFlagInfo2.length;++i){\n                        if(currentFlagInfo2[i][p.index * 2 + 1] === 0){\n                            maxL *= p2[i].yArray[1];\n                            maxR *= p2[i].yArray[2];\n                        }\n                        else{\n                            maxL *= p2[i].yArray[2];\n                            maxR *= p2[i].yArray[1];\n                        }\n                    }\n                    if(maxL > maxR){\n                        max = maxL;\n                        maxIndex = [p.index * 2, max];\n                    }\n                    else{\n                        max = maxR;\n                        maxIndex = [p.index * 2 + 1, max];\n                    }\n                    if(max > this.multiMax[1]){\n                        this.multiMax = maxIndex;\n                    }\n                    break;\n                }\n                if(p._leftChild){\n                    // temp_minL = Math.min(p._leftChild.yArray[1] * p2[0]._leftChild!.yArray[1], p._leftChild.yArray[1] * p2[0]._leftChild!.yArray[2], p._leftChild.yArray[2] * p2[0]._leftChild!.yArray[1], p._leftChild.yArray[2] * p2[0]._leftChild!.yArray[2]);\n                    let tempArray = [];\n                    tempArray.push(p._leftChild.yArray[1]);\n                    tempArray.push(p._leftChild.yArray[2]);\n                    for(let i = 0; i<p2.length; ++i){\n                        let len = tempArray.length;\n                         for(let j = 0; j<len; ++j){\n                            tempArray.push(tempArray[j] * p2[i]._leftChild!.yArray[1]);\n                            tempArray.push(tempArray[j] * p2[i]._leftChild!.yArray[2]);\n                        }   \n                        for(let j = 0; j<len; ++j){\n                            tempArray.shift();\n                        }   \n                    }\n                    // console.log(tempArray);\n                    temp_maxL = Math.max(...tempArray);\n                }\n                if(p._rightChild){\n                    // temp_minR = Math.min(p._rightChild.yArray[1] * p2[0]._rightChild!.yArray[1], p._rightChild.yArray[1] * p2[0]._rightChild!.yArray[2], p._rightChild.yArray[2] * p2[0]._rightChild!.yArray[1], p._rightChild.yArray[2] * p2[0]._rightChild!.yArray[2]);\n                    let tempArray = [];\n                    tempArray.push(p._rightChild.yArray[1]);\n                    tempArray.push(p._rightChild.yArray[2]);\n                    for(let i = 0; i<p2.length; ++i){\n                        let len = tempArray.length;\n                         for(let j = 0; j<len; ++j){\n                            tempArray.push(tempArray[j] * p2[i]._rightChild!.yArray[1]);\n                            tempArray.push(tempArray[j] * p2[i]._rightChild!.yArray[2]);\n                        }   \n                        for(let j = 0; j<len; ++j){\n                            tempArray.shift();\n                        }   \n                    }\n                    // console.log(tempArray);\n                    temp_maxR = Math.max(...tempArray);\n                }\n                if(temp_maxL <= temp_maxR && p._rightChild){\n                    let tempNode = [];\n                    tempNode.push(p);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]);\n                    }\n                    tempNode.push(p._leftChild);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]._leftChild);\n                    }\n                    tempNode.push(temp_maxL);\n                    alternativeNodes2.push(tempNode);\n                    p = p._rightChild;\n                    for(let i=0;i<p2.length;++i){\n                        p2[i] = p2[i]._rightChild!;\n                    }\n                    count.count++;\n                }\n                else if(temp_maxL > temp_maxR && p._leftChild){\n                    let tempNode = [];\n                    // alternativeNodes.push([p, p2, p._leftChild, p2._leftChild, temp_minL]);\n                    tempNode.push(p);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]);\n                    }\n                    tempNode.push(p._rightChild);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]._rightChild);\n                    }\n                    tempNode.push(temp_maxR);\n                    alternativeNodes2.push(tempNode);\n                    p = p._leftChild;\n                    for(let i=0;i<p2.length;++i){\n                        p2[i] = p2[i]._leftChild!;\n                    }\n                    count.count++;\n                }\n            }\n            // console.log(\"The bottom max(*):\", maxIndex);\n            if(store.state.controlParams.stopEarly === true){\n                alternativeNodes = [];\n                alternativeNodes2 = [];\n            }\n            p = pp, p2 = pp2;\n            while(alternativeNodes.length > 0){\n                let pop:any = alternativeNodes.pop();\n                if(pop === undefined ) continue;\n                // if(Number(pop[pop.length-1]) > this.multiMin[1]) continue;\n                // if(Number(pop[pop.length-1]) > min) continue;\n                let len = pop.length;\n                let temp_minL = 0, temp_minR = 0;\n                if(!pop[Math.floor(len/2)]._leftChild && !pop[Math.floor(len/2)]._rightChild){\n                    let minL = 0, minR = 0;\n                    let nodeFlagInfo1 = currentFlagInfo[pop[Math.floor(len/2)].index * 2 + 1];\n                    if(nodeFlagInfo1 === 0){\n                        minL += pop[Math.floor(len/2)].yArray[1];\n                        minR += pop[Math.floor(len/2)].yArray[2];\n                    } \n                    else{\n                        minL += pop[Math.floor(len/2)].yArray[2];\n                        minR += pop[Math.floor(len/2)].yArray[1];\n                    }\n                    for(let i=0; i<currentFlagInfo2.length;++i){\n                        if(currentFlagInfo2[i][pop[Math.floor(len/2)].index * 2 + 1] === 0){\n                            minL *= pop[Math.floor(len/2)+i+1].yArray[1];\n                            minR *= pop[Math.floor(len/2)+i+1].yArray[2];\n                        }\n                        else{\n                            minL *= pop[Math.floor(len/2)+i+1].yArray[2];\n                            minR *= pop[Math.floor(len/2)+i+1].yArray[1];\n                        }\n                    }\n                    if(minL > minR){\n                        min = minL;\n                        minIndex = [pop[Math.floor(len/2)].index * 2, min];\n                    }\n                    else{\n                        min = minR;\n                        minIndex = [pop[Math.floor(len/2)].index * 2 + 1, min];\n                    }\n                    if(min < this.multiMin[1]){\n                        this.multiMin = minIndex;\n                    }\n                    continue;\n                }\n                if(pop[Math.floor(len/2)]._leftChild){\n                    let index = Math.floor(len / 2);\n                    let tempArray = [];\n                    tempArray.push(pop[index]._leftChild.yArray[1]);\n                    tempArray.push(pop[index]._leftChild.yArray[2]);\n                    for(let i = index+1; i<index*2; ++i){\n                        let len = tempArray.length;\n                         for(let j = 0; j<len; ++j){\n                            tempArray.push(tempArray[j] * pop[i]._leftChild!.yArray[1]);\n                            tempArray.push(tempArray[j] * pop[i]._leftChild!.yArray[2]);\n                        }   \n                        for(let j = 0; j<len; ++j){\n                            tempArray.shift();\n                        }   \n                    }\n                    // console.log(tempArray);\n                    temp_minL = Math.min(...tempArray);\n\n                    // if(temp_minL < min || temp_minL >= min){\n                        let tempNode = [];\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]);\n                        }\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]._leftChild);\n                        }\n                        tempNode.push(temp_minL);\n                        alternativeNodes.push(tempNode);\n                        count.count++;\n                    // }\n                }\n                if(pop[Math.floor(len/2)]._rightChild){\n                    let index = Math.floor(len / 2);\n                    let tempArray = [];\n                    tempArray.push(pop[index]._rightChild.yArray[1]);\n                    tempArray.push(pop[index]._rightChild.yArray[2]);\n                    for(let i = index+1; i<index*2; ++i){\n                        let len = tempArray.length;\n                         for(let j = 0; j<len; ++j){\n                            tempArray.push(tempArray[j] * pop[i]._rightChild!.yArray[1]);\n                            tempArray.push(tempArray[j] * pop[i]._rightChild!.yArray[2]);\n                        }   \n                        for(let j = 0; j<len; ++j){\n                            tempArray.shift();\n                        }   \n                    }\n                    // console.log(tempArray);\n                    temp_minR = Math.min(...tempArray);\n                    // if(temp_minR < min || temp_minR >= min){\n                        let tempNode = [];\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]);\n                        }\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]._rightChild);\n                        }\n                        tempNode.push(temp_minR);\n                        alternativeNodes.push(tempNode);\n                        count.count++;\n                    // }\n                }\n            }\n            p = pp, p2 = pp2;\n            while(alternativeNodes2.length > 0){\n                // console.log(\"alternativeNodes2:\", alternativeNodes2);\n                let pop:any = alternativeNodes2.pop();\n                if(pop === undefined ) continue;\n                // if(Number(pop[pop.length-1]) < this.multiMax[1]) continue;\n                // console.log(\"pop:\", pop);\n                // if(Number(pop[pop.length-1]) < max) continue;\n                let len = pop.length;\n                let temp_maxL = 0, temp_maxR = 0;\n                if(!pop[Math.floor(len/2)]._leftChild && !pop[Math.floor(len/2)]._rightChild){\n                    let maxL = 0, maxR = 0;\n                    let nodeFlagInfo1 = currentFlagInfo[pop[Math.floor(len/2)].index * 2 + 1];\n                    if(nodeFlagInfo1 === 0){\n                        maxL += pop[Math.floor(len/2)].yArray[1];\n                        maxR += pop[Math.floor(len/2)].yArray[2];\n                    } \n                    else{\n                        maxL += pop[Math.floor(len/2)].yArray[2];\n                        maxR += pop[Math.floor(len/2)].yArray[1];\n                    }\n                    for(let i=0; i<currentFlagInfo2.length;++i){\n                        if(currentFlagInfo2[i][pop[Math.floor(len/2)].index * 2 + 1] === 0){\n                            maxL *= pop[Math.floor(len/2)+i+1].yArray[1];\n                            maxR *= pop[Math.floor(len/2)+i+1].yArray[2];\n                        }\n                        else{\n                            maxL *= pop[Math.floor(len/2)+i+1].yArray[2];\n                            maxR *= pop[Math.floor(len/2)+i+1].yArray[1];\n                        }\n                    }\n                    if(maxL > maxR){\n                        max = maxL;\n                        maxIndex = [pop[Math.floor(len/2)].index * 2, max];\n                    }\n                    else{\n                        max = maxR;\n                        maxIndex = [pop[Math.floor(len/2)].index * 2 + 1, max];\n                    }\n                    if(max > this.multiMax[1]){\n                        this.multiMax = maxIndex;\n                    }\n                    continue;\n                }\n                if(pop[Math.floor(len/2)]._leftChild){\n                    let index = Math.floor(len / 2);\n                    let tempArray = [];\n                    tempArray.push(pop[index]._leftChild.yArray[1]);\n                    tempArray.push(pop[index]._leftChild.yArray[2]);\n                    for(let i = index+1; i<index*2; ++i){\n                        let len = tempArray.length;\n                         for(let j = 0; j<len; ++j){\n                            tempArray.push(tempArray[j] * pop[i]._leftChild!.yArray[1]);\n                            tempArray.push(tempArray[j] * pop[i]._leftChild!.yArray[2]);\n                        }   \n                        for(let j = 0; j<len; ++j){\n                            tempArray.shift();\n                        }   \n                    }\n                    // console.log(tempArray);\n                    temp_maxL = Math.max(...tempArray);\n                    // if(temp_maxL > max || temp_maxL <= max){\n                        let tempNode = [];\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]);\n                        }\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]._leftChild);\n                        }\n                        tempNode.push(temp_maxL);\n                        alternativeNodes2.push(tempNode);\n                        count.count++;\n                    // }\n                }\n                if(pop[Math.floor(len/2)]._rightChild){\n                    let index = Math.floor(len / 2);\n                    let tempArray = [];\n                    tempArray.push(pop[index]._rightChild.yArray[1]);\n                    tempArray.push(pop[index]._rightChild.yArray[2]);\n                    for(let i = index+1; i<index*2; ++i){\n                        let len = tempArray.length;\n                         for(let j = 0; j<len; ++j){\n                            tempArray.push(tempArray[j] * pop[i]._rightChild!.yArray[1]);\n                            tempArray.push(tempArray[j] * pop[i]._rightChild!.yArray[2]);\n                        }   \n                        for(let j = 0; j<len; ++j){\n                            tempArray.shift();\n                        }   \n                    }\n                    // console.log(tempArray);\n                    temp_maxR = Math.max(...tempArray);\n                    // if(temp_maxR > max || temp_maxR <= max){\n                        let tempNode = [];\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]);\n                        }\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]._rightChild);\n                        }\n                        tempNode.push(temp_maxR);\n                        alternativeNodes2.push(tempNode);\n                        count.count++;\n                    // }\n                }\n            }\n            // console.log(\"The final min(*):\", minIndex);\n            // console.log(\"The final max(*):\", maxIndex);\n            if(min < this.multiMin[1]){\n                this.multiMin = minIndex;\n            }\n            if(max > this.multiMax[1]){\n                this.multiMax = maxIndex;\n            }\n        }\n        else if((type === 1 || type === 7 || type ===8 || type === 9) && symbol === '/'){\n            // let p = pp, p2 = pp2;\n            let min1 = p.yArray[1];\n            let min2 = 1;\n            for(let i=0;i<p2.length;i++){\n                min2 *= p2[i].yArray[1];\n            }   \n            let max1 = p.yArray[2];\n            let max2 = 1;\n            for(let i=0; i<p2.length; ++i){\n                max2 *= p2[i].yArray[2];\n            } \n            let min = (min1 / max2);\n            let max = (max1 / min2);\n            let minIndex : [number, number];\n            minIndex = [-1, Infinity];\n            let maxIndex: [number, number];\n            maxIndex = [-1, -Infinity];\n\n            let alternativeNodes = [];\n            let alternativeNodes2 = [];\n            while(max > -Infinity){\n                let temp_minL = 0, temp_minR = 0;\n                if(!p._leftChild && !p._rightChild){\n                    let minL = 0, minR = 0;\n                    let nodeFlagInfo1 = currentFlagInfo[p.index * 2 + 1];\n                    if(nodeFlagInfo1 === 0){\n                        minL += p.yArray[1];\n                        minR += p.yArray[2];\n                    } \n                    else{\n                        minL += p.yArray[2];\n                        minR += p.yArray[1];\n                    }\n                    for(let i=0; i<currentFlagInfo2.length;++i){\n                        if(currentFlagInfo2[i][p.index * 2 + 1] === 0){\n                            minL /= p2[i].yArray[1];\n                            minR /= p2[i].yArray[2];\n                        }\n                        else{\n                            minL /= p2[i].yArray[2];\n                            minR /= p2[i].yArray[1];\n                        }\n                    }\n                    if(minL < minR){\n                        min = minL;\n                        minIndex = [p.index * 2, min];\n                    }\n                    else{\n                        min = minR;\n                        minIndex = [p.index * 2 + 1, min];\n                    }\n                    if(min < this.divMin[1]){\n                        this.divMin = minIndex;\n                    }\n                    break;\n                }\n                if(p._leftChild){\n                    // temp_minL = Math.min(p._leftChild.yArray[1] * p2[0]._leftChild!.yArray[1], p._leftChild.yArray[1] * p2[0]._leftChild!.yArray[2], p._leftChild.yArray[2] * p2[0]._leftChild!.yArray[1], p._leftChild.yArray[2] * p2[0]._leftChild!.yArray[2]);\n                    temp_minL = p._leftChild.yArray[1];\n                    for(let i=0;i<p2.length;++i){\n                        if(p2[i]._leftChild !== null){\n                            temp_minL /= p2[i]._leftChild!.yArray[2];\n                        }\n                    }\n                }\n                if(p._rightChild){\n                    // temp_minR = Math.min(p._rightChild.yArray[1] * p2[0]._rightChild!.yArray[1], p._rightChild.yArray[1] * p2[0]._rightChild!.yArray[2], p._rightChild.yArray[2] * p2[0]._rightChild!.yArray[1], p._rightChild.yArray[2] * p2[0]._rightChild!.yArray[2]);\n                    temp_minL = p._rightChild.yArray[1];\n                    for(let i=0;i<p2.length;++i){\n                        if(p2[i]._rightChild !== null){\n                            temp_minL /= p2[i]._leftChild!.yArray[2];\n                        }\n                    }\n                }\n                if(temp_minL <= temp_minR && p._leftChild){\n                    let tempNode = [];\n                    tempNode.push(p);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]);\n                    }\n                    tempNode.push(p._rightChild);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]._rightChild);\n                    }\n                    tempNode.push(temp_minR);\n                    alternativeNodes.push(tempNode);\n                    p = p._leftChild;\n                    for(let i=0;i<p2.length;++i){\n                        p2[i] = p2[i]._leftChild!;\n                    }\n                }\n                else if(temp_minL > temp_minR && p._rightChild){\n                    let tempNode = [];\n                    // alternativeNodes.push([p, p2, p._leftChild, p2._leftChild, temp_minL]);\n                    tempNode.push(p);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]);\n                    }\n                    tempNode.push(p._leftChild);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]._leftChild);\n                    }\n                    tempNode.push(temp_minL);\n                    p = p._rightChild;\n                    for(let i=0;i<p2.length;++i){\n                        p2[i] = p2[i]._rightChild!;\n                    }\n                    alternativeNodes.push(tempNode);\n                }\n            }\n            // console.log(\"The bottom min(*):\", minIndex);\n            p = pp, p2 = pp2;\n            while(max > -Infinity){\n                let temp_maxL = 0, temp_maxR = 0;\n                if(!p._leftChild && !p._rightChild){\n                    let maxL = 0, maxR = 0;\n                    let nodeFlagInfo1 = currentFlagInfo[p.index * 2 + 1];\n                    if(nodeFlagInfo1 === 0){\n                        maxL += p.yArray[1];\n                        maxR += p.yArray[2];\n                    } \n                    else{\n                        maxL += p.yArray[2];\n                        maxR += p.yArray[1];\n                    }\n                    for(let i=0; i<currentFlagInfo2.length;++i){\n                        if(currentFlagInfo2[i][p.index * 2 + 1] === 0){\n                            maxL /= p2[i].yArray[1];\n                            maxR /= p2[i].yArray[2];\n                        }\n                        else{\n                            maxL /= p2[i].yArray[2];\n                            maxR /= p2[i].yArray[1];\n                        }\n                    }\n                    if(maxL > maxR){\n                        max = maxL;\n                        maxIndex = [p.index * 2, max];\n                    }\n                    else{\n                        max = maxR;\n                        maxIndex = [p.index * 2 + 1, max];\n                    }\n                    if(max > this.divMax[1]){\n                        this.divMax = maxIndex;\n                    }\n                    break;\n                }\n                if(p._leftChild){\n                    // temp_minL = Math.min(p._leftChild.yArray[1] * p2[0]._leftChild!.yArray[1], p._leftChild.yArray[1] * p2[0]._leftChild!.yArray[2], p._leftChild.yArray[2] * p2[0]._leftChild!.yArray[1], p._leftChild.yArray[2] * p2[0]._leftChild!.yArray[2]);\n                    temp_maxL = p._leftChild.yArray[2];\n                    for(let i=0;i<p2.length;++i){\n                        if(p2[i]._leftChild !== null){\n                            temp_maxL /= p2[i]._leftChild!.yArray[1];\n                        }\n                    }\n                }\n                if(p._rightChild){\n                    // temp_minR = Math.min(p._rightChild.yArray[1] * p2[0]._rightChild!.yArray[1], p._rightChild.yArray[1] * p2[0]._rightChild!.yArray[2], p._rightChild.yArray[2] * p2[0]._rightChild!.yArray[1], p._rightChild.yArray[2] * p2[0]._rightChild!.yArray[2]);\n                    temp_maxL = p._rightChild.yArray[2];\n                    for(let i=0;i<p2.length;++i){\n                        if(p2[i]._leftChild !== null){\n                            temp_maxL /= p2[i]._leftChild!.yArray[1];\n                        }\n                    }\n                }\n                if(temp_maxL <= temp_maxR && p._rightChild){\n                    let tempNode = [];\n                    tempNode.push(p);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]);\n                    }\n                    tempNode.push(p._leftChild);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]._leftChild);\n                    }\n                    tempNode.push(temp_maxL);\n                    alternativeNodes2.push(tempNode);\n                    p = p._rightChild;\n                    for(let i=0;i<p2.length;++i){\n                        p2[i] = p2[i]._rightChild!;\n                    }\n                }\n                else if(temp_maxL > temp_maxR && p._leftChild){\n                    let tempNode = [];\n                    // alternativeNodes.push([p, p2, p._leftChild, p2._leftChild, temp_minL]);\n                    tempNode.push(p);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]);\n                    }\n                    tempNode.push(p._rightChild);\n                    for(let i=0;i<p2.length;++i){\n                        tempNode.push(p2[i]._rightChild);\n                    }\n                    tempNode.push(temp_maxR);\n                    alternativeNodes2.push(tempNode);\n                    p = p._leftChild;\n                    for(let i=0;i<p2.length;++i){\n                        p2[i] = p2[i]._leftChild!;\n                    }\n                }\n            }\n            // console.log(\"The bottom max(*):\", maxIndex);\n            if(store.state.controlParams.stopEarly === true){\n                alternativeNodes = [];\n                alternativeNodes2 = [];\n            }\n            p = pp, p2 = pp2;\n            while(alternativeNodes.length > 0){\n                let pop:any = alternativeNodes.pop();\n                if(pop === undefined ) continue;\n                // if(Number(pop[pop.length-1]) > this.divMin[1]) continue;\n                // if(Number(pop[pop.length-1]) > min) continue;\n                let len = pop.length;\n                let temp_minL = 0, temp_minR = 0;\n                if(!pop[Math.floor(len/2)]._leftChild && !pop[Math.floor(len/2)]._rightChild){\n                    let minL = 0, minR = 0;\n                    let nodeFlagInfo1 = currentFlagInfo[pop[Math.floor(len/2)].index * 2 + 1];\n                    if(nodeFlagInfo1 === 0){\n                        minL += pop[Math.floor(len/2)].yArray[1];\n                        minR += pop[Math.floor(len/2)].yArray[2];\n                    } \n                    else{\n                        minL += pop[Math.floor(len/2)].yArray[2];\n                        minR += pop[Math.floor(len/2)].yArray[1];\n                    }\n                    for(let i=0; i<currentFlagInfo2.length;++i){\n                        if(currentFlagInfo2[i][pop[Math.floor(len/2)].index * 2 + 1] === 0){\n                            minL /= pop[Math.floor(len/2)+i+1].yArray[1];\n                            minR /= pop[Math.floor(len/2)+i+1].yArray[2];\n                        }\n                        else{\n                            minL /= pop[Math.floor(len/2)+i+1].yArray[2];\n                            minR /= pop[Math.floor(len/2)+i+1].yArray[1];\n                        }\n                    }\n                    if(minL > minR){\n                        min = minL;\n                        minIndex = [pop[Math.floor(len/2)].index * 2, min];\n                    }\n                    else{\n                        min = minR;\n                        minIndex = [pop[Math.floor(len/2)].index * 2 + 1, min];\n                    }\n                    if(min < this.divMin[1]){\n                        this.divMin = minIndex;\n                    }\n                    continue;\n                }\n                if(pop[Math.floor(len/2)]._leftChild){\n                    let index = Math.floor(len / 2);\n                    temp_minL = pop[index]._leftChild.yArray[1];\n                    for(let i = index + 1; i < index * 2; ++i){\n                        temp_minL /= pop[i]._leftChild.yArray[2];\n                    }\n                    // temp_minL = (pop[2]._leftChild.yArray[1] + pop[3]._leftChild.yArray[1]);\n                    // if(temp_minL < min){\n                        let tempNode = [];\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]);\n                        }\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]._leftChild);\n                        }\n                        tempNode.push(temp_minL);\n                        alternativeNodes.push(tempNode);\n                        count.count++;\n                    // }\n                }\n                if(pop[Math.floor(len/2)]._rightChild){\n                    let index = Math.floor(len / 2);\n                    temp_minL = pop[index]._rightChild.yArray[1];\n                    for(let i = index + 1; i < index * 2; ++i){\n                        temp_minL /= pop[i]._rightChild.yArray[2];\n                    }\n                    // temp_minL = (pop[2]._leftChild.yArray[1] + pop[3]._leftChild.yArray[1]);\n                    // if(temp_minL < min){\n                        let tempNode = [];\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]);\n                        }\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]._rightChild);\n                        }\n                        tempNode.push(temp_minL);\n                        alternativeNodes.push(tempNode);\n                        count.count++;\n                    // }\n                }\n            }\n            p = pp, p2 = pp2;\n            while(alternativeNodes2.length > 0){\n                // console.log(\"alternativeNodes2:\", alternativeNodes2);\n                let pop:any = alternativeNodes2.pop();\n                if(pop === undefined ) continue;\n                // if(Number(pop[pop.length-1]) < this.divMax[1]) continue;\n                // console.log(\"pop:\", pop);\n                // if(Number(pop[pop.length-1]) < max) continue;\n                let len = pop.length;\n                let temp_maxL = 0, temp_maxR = 0;\n                if(!pop[Math.floor(len/2)]._leftChild && !pop[Math.floor(len/2)]._rightChild){\n                    let maxL = 0, maxR = 0;\n                    let nodeFlagInfo1 = currentFlagInfo[pop[Math.floor(len/2)].index * 2 + 1];\n                    if(nodeFlagInfo1 === 0){\n                        maxL += pop[Math.floor(len/2)].yArray[1];\n                        maxR += pop[Math.floor(len/2)].yArray[2];\n                    } \n                    else{\n                        maxL += pop[Math.floor(len/2)].yArray[2];\n                        maxR += pop[Math.floor(len/2)].yArray[1];\n                    }\n                    for(let i=0; i<currentFlagInfo2.length;++i){\n                        if(currentFlagInfo2[i][pop[Math.floor(len/2)].index * 2 + 1] === 0){\n                            maxL /= pop[Math.floor(len/2)+i+1].yArray[1];\n                            maxR /= pop[Math.floor(len/2)+i+1].yArray[2];\n                        }\n                        else{\n                            maxL /= pop[Math.floor(len/2)+i+1].yArray[2];\n                            maxR /= pop[Math.floor(len/2)+i+1].yArray[1];\n                        }\n                    }\n                    if(maxL > maxR){\n                        max = maxL;\n                        maxIndex = [pop[Math.floor(len/2)].index * 2, max];\n                    }\n                    else{\n                        max = maxR;\n                        maxIndex = [pop[Math.floor(len/2)].index * 2 + 1, max];\n                    }\n                    if(max > this.divMax[1]){\n                        this.divMax = maxIndex;\n                    }\n                    continue;\n                }\n                if(pop[Math.floor(len/2)]._leftChild){\n                    let index = Math.floor(len / 2);\n                    temp_maxL = pop[index]._leftChild.yArray[2];\n                    for(let i = index + 1; i < index * 2; ++i){\n                        temp_maxL /= pop[i]._leftChild.yArray[1];\n                    }\n                    // if(temp_maxL > max){\n                        let tempNode = [];\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]);\n                        }\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]._leftChild);\n                        }\n                        tempNode.push(temp_maxL);\n                        alternativeNodes2.push(tempNode);\n                        count.count++;\n                    // }\n                }\n                if(pop[Math.floor(len/2)]._rightChild){\n                    let index = Math.floor(len / 2);\n                    temp_maxL = pop[index]._rightChild.yArray[2];\n                    for(let i = index + 1; i < index * 2; ++i){\n                        temp_maxL /= pop[i]._rightChild.yArray[1];\n                    }\n                    // if(temp_maxL > max){\n                        let tempNode = [];\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]);\n                        }\n                        for(let i = index; i < index * 2; ++i){\n                            tempNode.push(pop[i]._rightChild);\n                        }\n                        tempNode.push(temp_maxL);\n                        alternativeNodes2.push(tempNode);\n                        count.count++;\n                    // }\n                }\n            }\n            // console.log(\"The final min(/):\", minIndex);\n            // console.log(\"The final max(/):\", maxIndex);\n            if(min < this.divMin[1]){\n                this.divMin = minIndex;\n            }\n            if(max > this.divMax[1]){\n                this.divMax = maxIndex;\n            }\n        }\n    }\n\n\n    addLastVal(v: number, p?: any) {\n        if (v === undefined) {\n            return\n        }\n        this.endV = v\n\n        let index = p.index * 2;\n        let rangeArray = this.currentRange;\n        let max = 0;\n        for(let i=0;i<rangeArray.length;++i){\n            if(rangeArray[i][1] > max) max = rangeArray[i][1];\n        }\n        if(index > max && index === max+1){\n            this.currentRange.push([index]);\n        }\n        this.currentSum += v;\n        this.currentPointNum += 1;\n        this.average = this.currentSum / this.currentPointNum;\n    }\n    addFirstVal(v: number, p?: any) {\n        if (v === undefined) {\n            return\n        }\n        this.startV = v;\n\n        let index = p.index * 2 + 1;\n        let rangeArray = this.currentRange;\n        let min = rangeArray[0][0];\n        for(let i=0;i<rangeArray.length;++i){\n            if(rangeArray[i][0] < min) min = rangeArray[i][0];\n        }\n        if(min > index && index === min-1){\n            this.currentRange.push([index]);\n        }\n        this.currentSum += v;\n        this.currentPointNum += 1;\n        this.average = this.currentSum / this.currentPointNum;\n    }\n    forceMerge(val: number, index?: number) {\n        if (val === undefined) {\n            throw new Error(\"undefine\")\n            return\n        }\n        if (val < this.vRange[0]) {\n            this.vRange[0] = val;\n        }\n        if (val > this.vRange[1]) {\n            this.vRange[1] = val;\n        }\n\n    }\n    mergeLast(k: number, b: number) {\n        const val = k * this.tEnd + b;\n        if (val === undefined) {\n            throw new Error(\"undefine\")\n            return\n        }\n        if (val > this.vRange[1]) {\n            this.vRange[1] = val;\n        }\n        if (val < this.vRange[0]) {\n            this.vRange[0] = val;\n        }\n        this.endV = val;\n    }\n    mergeFirst(k: number, b: number) {\n        const val = k * this.tStart + b;\n        if (val === undefined) {\n            throw new Error(\"undefine\")\n            return\n        }\n        if (val > this.vRange[1]) {\n            this.vRange[1] = val;\n        }\n        if (val < this.vRange[0]) {\n            this.vRange[0] = val;\n        }\n        this.startV = val;\n    }\n    checkIsMis() {\n        if (this.vRange[0] === Infinity || this.vRange[1] === -Infinity) {\n            this.isMis = true\n        }\n        return this.isMis\n    }\n\n}\n"],"mappings":"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","ignoreList":[]}]}