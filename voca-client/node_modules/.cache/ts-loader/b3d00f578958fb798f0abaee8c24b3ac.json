{"remainingRequest":"/Users/huangshuo/Desktop/cxsj/om3-extend/om3-client/node_modules/babel-loader/lib/index.js!/Users/huangshuo/Desktop/cxsj/om3-extend/om3-client/node_modules/ts-loader/index.js??ref--15-2!/Users/huangshuo/Desktop/cxsj/om3-extend/om3-client/node_modules/eslint-loader/index.js??ref--14-0!/Users/huangshuo/Desktop/cxsj/om3-extend/om3-client/src/application/haarinteraction.ts","dependencies":[{"path":"/Users/huangshuo/Desktop/cxsj/om3-extend/om3-client/src/application/haarinteraction.ts","mtime":1732546288000},{"path":"/Users/huangshuo/Desktop/cxsj/om3-extend/om3-client/babel.config.js","mtime":1732546288000},{"path":"/Users/huangshuo/Desktop/cxsj/om3-extend/om3-client/node_modules/cache-loader/dist/cjs.js","mtime":1732627998206},{"path":"/Users/huangshuo/Desktop/cxsj/om3-extend/om3-client/node_modules/babel-loader/lib/index.js","mtime":1732627998426},{"path":"/Users/huangshuo/Desktop/cxsj/om3-extend/om3-client/node_modules/ts-loader/index.js","mtime":1732627997224},{"path":"/Users/huangshuo/Desktop/cxsj/om3-extend/om3-client/node_modules/eslint-loader/index.js","mtime":1732627997140}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnOwpleHBvcnQgZnVuY3Rpb24gZHJhd011bHRpSGFhclRpbWVTZXJpZXMobXVsdGlUaW1lU2VyaWVzT2JqKSB7CiAgdmFyIF9kb2N1bWVudCRnZXRFbGVtZW50QjsKICBjb25zdCBpbml0VGltZVJhbmdlID0gWzAsIDIgKiogbXVsdGlUaW1lU2VyaWVzT2JqLm1heExldmVsIC0gMV07CiAgbGV0IGludGVyYWN0aXZlSW5mbyA9IHsKICAgIHN0YXJ0WDogMCwKICAgIHN0YXJ0WTogMCwKICAgIG9mZnNldFg6IDAsCiAgICBvZmZzZXRZOiAwLAogICAgaXNNb3VzZURvd246IGZhbHNlLAogICAgaXNNb3ZlOiBmYWxzZQogIH07CiAgLy9sZXQgY3VycmVudExldmVsID0gbXVsdGlUaW1lU2VyaWVzT2JqLmN1cnJlbnRMZXZlbDsKICBjb25zdCBwYWRpbmcgPSB7CiAgICB0b3A6IDIwLAogICAgYm90dG9tOiAyMCwKICAgIGxlZnQ6IDQwLAogICAgcmlnaHQ6IDIwCiAgfTsKICBjb25zdCBzdmcgPSBkMy5zZWxlY3QoIiNjb250ZW50LWNvbnRhaW5lciIpLmFwcGVuZCgic3ZnIik7CiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNvbnRlbnQtY29udGFpbmVyIikuYWRkRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsICgpID0+IHsKICAgIGludGVyYWN0aXZlSW5mby5pc01vdXNlRG93biA9IGZhbHNlOwogIH0pOwogIHN2Zy5hdHRyKCJ3aWR0aCIsIG11bHRpVGltZVNlcmllc09iai53aWR0aCArIHBhZGluZy5sZWZ0ICsgcGFkaW5nLnJpZ2h0KS5hdHRyKCJoZWlnaHQiLCBtdWx0aVRpbWVTZXJpZXNPYmouaGVpZ2h0ICsgcGFkaW5nLnRvcCArIHBhZGluZy5ib3R0b20pLmF0dHIoInRyYW5zZm9ybSIsIGB0cmFuc2xhdGUoJHttdWx0aVRpbWVTZXJpZXNPYmoueH0sJHttdWx0aVRpbWVTZXJpZXNPYmoueX0pYCkuc3R5bGUoImJhY2tncm91bmQtY29sb3IiLCAiI2ZmZiIpOwogIGNvbnN0IGZvcmVpZ25JZCA9IGBmb3JlaWduJHttdWx0aVRpbWVTZXJpZXNPYmoud2lkdGh9YDsKICBsZXQgZm9yZWlnbk9iaiA9IHN2Zy5hcHBlbmQoImZvcmVpZ25PYmplY3QiKS5hdHRyKCJpZCIsIGZvcmVpZ25JZCkuYXR0cigieCIsIHBhZGluZy5sZWZ0KS5hdHRyKCJ5IiwgcGFkaW5nLnRvcCkuYXR0cignd2lkdGgnLCBtdWx0aVRpbWVTZXJpZXNPYmoud2lkdGgpLmF0dHIoJ2hlaWdodCcsIG11bHRpVGltZVNlcmllc09iai5oZWlnaHQpOwogIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpOwogIChfZG9jdW1lbnQkZ2V0RWxlbWVudEIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmb3JlaWduSWQpKSA9PT0gbnVsbCB8fCBfZG9jdW1lbnQkZ2V0RWxlbWVudEIgPT09IHZvaWQgMCB8fCBfZG9jdW1lbnQkZ2V0RWxlbWVudEIuYXBwZW5kQ2hpbGQoY2FudmFzKTsKICBjYW52YXMud2lkdGggPSBtdWx0aVRpbWVTZXJpZXNPYmoud2lkdGg7CiAgY2FudmFzLmhlaWdodCA9IG11bHRpVGltZVNlcmllc09iai5oZWlnaHQ7CiAgbGV0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCIyZCIpOwogIGNvbnN0IHhTY2FsZSA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFswLCBtdWx0aVRpbWVTZXJpZXNPYmoud2lkdGhdKS5yYW5nZShbMCwgbXVsdGlUaW1lU2VyaWVzT2JqLndpZHRoXSk7CiAgY29uc3QgeVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oW211bHRpVGltZVNlcmllc09iai5taW52LCBtdWx0aVRpbWVTZXJpZXNPYmoubWF4dl0pLnJhbmdlKFttdWx0aVRpbWVTZXJpZXNPYmouaGVpZ2h0LCAwXSk7CiAgY29uc3QgeEF4aXMgPSBkMy5heGlzQm90dG9tKHhTY2FsZSk7CiAgY29uc3QgeUF4aXMgPSBkMy5heGlzTGVmdCh5U2NhbGUpOwogIGNvbnN0IHhBeGlzRyA9IHN2Zy5hcHBlbmQoImciKS5hdHRyKCJ0cmFuc2Zvcm0iLCBgdHJhbnNsYXRlKCR7cGFkaW5nLmxlZnR9LCR7bXVsdGlUaW1lU2VyaWVzT2JqLmhlaWdodCArIHBhZGluZy50b3B9KWApLmF0dHIoImNsYXNzIiwgJ3ggYXhpcycpLmNhbGwoeEF4aXMpOwogIGNvbnN0IHlBeGlzRyA9IHN2Zy5hcHBlbmQoImciKS5hdHRyKCJ0cmFuc2Zvcm0iLCBgdHJhbnNsYXRlKCR7cGFkaW5nLmxlZnR9LCR7cGFkaW5nLnRvcH0pYCkuYXR0cigiY2xhc3MiLCAneSBheGlzJykuY2FsbCh5QXhpcyk7CiAgZnVuY3Rpb24gZHJhdygpIHsKICAgIGNvbnNvbGUubG9nKG11bHRpVGltZVNlcmllc09iaik7CiAgICBjb25zdCBhbGxSZW5kZXJEYXRhID0gbXVsdGlUaW1lU2VyaWVzT2JqLmFsbFJlbmRlckRhdGE7CiAgICBjdHggPT09IG51bGwgfHwgY3R4ID09PSB2b2lkIDAgfHwgY3R4LmNsZWFyUmVjdCgwLCAwLCBtdWx0aVRpbWVTZXJpZXNPYmoud2lkdGgsIG11bHRpVGltZVNlcmllc09iai5oZWlnaHQpOwogICAgLy9AdHMtaWdub3JlCiAgICAvL2N0eD8uc3Ryb2tlU3R5bGU9InN0ZWVsYmx1ZSI7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbFJlbmRlckRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgY3R4ID09PSBudWxsIHx8IGN0eCA9PT0gdm9pZCAwIHx8IGN0eC5iZWdpblBhdGgoKTsKICAgICAgY29uc3QgcmVuZGVyRGF0YSA9IGFsbFJlbmRlckRhdGFbaV0ucmVuZGVyRGF0YTsKICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCByZW5kZXJEYXRhLmxlbmd0aDsgaisrKSB7CiAgICAgICAgcmVuZGVyRGF0YVtqXS55ID0geVNjYWxlKHJlbmRlckRhdGFbal0udik7CiAgICAgICAgaWYgKGogPT09IDApIHsKICAgICAgICAgIGN0eCA9PT0gbnVsbCB8fCBjdHggPT09IHZvaWQgMCB8fCBjdHgubW92ZVRvKHhTY2FsZShyZW5kZXJEYXRhW2pdLngpLCByZW5kZXJEYXRhW2pdLnkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjdHggPT09IG51bGwgfHwgY3R4ID09PSB2b2lkIDAgfHwgY3R4LmxpbmVUbyh4U2NhbGUocmVuZGVyRGF0YVtqXS54KSwgcmVuZGVyRGF0YVtqXS55KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgY3R4ID09PSBudWxsIHx8IGN0eCA9PT0gdm9pZCAwIHx8IGN0eC5zdHJva2UoKTsKICAgIH0KICB9CiAgZHJhdygpOwp9"},{"version":3,"names":["d3","drawMultiHaarTimeSeries","multiTimeSeriesObj","_document$getElementB","initTimeRange","maxLevel","interactiveInfo","startX","startY","offsetX","offsetY","isMouseDown","isMove","pading","top","bottom","left","right","svg","select","append","document","getElementById","addEventListener","attr","width","height","x","y","style","foreignId","foreignObj","canvas","createElement","appendChild","ctx","getContext","xScale","scaleLinear","domain","range","yScale","minv","maxv","xAxis","axisBottom","yAxis","axisLeft","xAxisG","call","yAxisG","draw","console","log","allRenderData","clearRect","i","length","beginPath","renderData","j","v","moveTo","lineTo","stroke"],"sources":["/Users/huangshuo/Desktop/cxsj/om3-extend/om3-client/node_modules/eslint-loader/index.js??ref--14-0!/Users/huangshuo/Desktop/cxsj/om3-extend/om3-client/src/application/haarinteraction.ts"],"sourcesContent":["import { MultiHaarTimeSeriesObj } from \"@/store\";\nimport * as d3 from 'd3';\n\nexport function drawMultiHaarTimeSeries(multiTimeSeriesObj: MultiHaarTimeSeriesObj) {\n    const initTimeRange = [0, 2 ** multiTimeSeriesObj.maxLevel - 1];\n\n    let interactiveInfo = {\n        startX: 0,\n        startY: 0,\n        offsetX: 0,\n        offsetY: 0,\n        isMouseDown: false,\n        isMove: false,\n    };\n    //let currentLevel = multiTimeSeriesObj.currentLevel;\n    const pading = { top: 20, bottom: 20, left: 40, right: 20 };\n    const svg = d3.select(\"#content-container\").append(\"svg\");\n    document\n        .getElementById(\"content-container\")!\n        .addEventListener(\"mouseup\", () => {\n            interactiveInfo.isMouseDown = false;\n        });\n    svg\n        .attr(\"width\", multiTimeSeriesObj.width + pading.left + pading.right)\n        .attr(\"height\", multiTimeSeriesObj.height + pading.top + pading.bottom)\n        .attr(\"transform\", `translate(${multiTimeSeriesObj.x},${multiTimeSeriesObj.y})`)\n        .style(\"background-color\", \"#fff\");\n\n    const foreignId=`foreign${multiTimeSeriesObj.width}`;\n    let foreignObj: any = svg.append(\"foreignObject\").attr(\"id\", foreignId).attr(\"x\", pading.left).attr(\"y\", pading.top).attr('width', multiTimeSeriesObj.width).attr('height', multiTimeSeriesObj.height);\n    const canvas = document.createElement(\"canvas\");\n    document.getElementById(foreignId)?.appendChild(canvas);\n    canvas.width = multiTimeSeriesObj.width;\n    canvas.height = multiTimeSeriesObj.height;\n    let ctx = canvas.getContext(\"2d\");\n\n    const xScale: any = d3.scaleLinear().domain([0, multiTimeSeriesObj.width]).range([0,multiTimeSeriesObj.width]);\n    const yScale: any = d3.scaleLinear().domain([multiTimeSeriesObj.minv, multiTimeSeriesObj.maxv]).range([multiTimeSeriesObj.height,0 ]);\n\n    const xAxis = d3.axisBottom(xScale);\n    const yAxis = d3.axisLeft(yScale);\n\n    const xAxisG = svg.append(\"g\").attr(\"transform\", `translate(${pading.left},${multiTimeSeriesObj.height + pading.top})`).attr(\"class\", 'x axis').call(xAxis);\n    const yAxisG = svg.append(\"g\").attr(\"transform\", `translate(${pading.left},${pading.top})`).attr(\"class\", 'y axis').call(yAxis);\n\n    function draw() {\n            console.log(multiTimeSeriesObj);\n            const allRenderData=multiTimeSeriesObj.allRenderData;\n            ctx?.clearRect(0,0,multiTimeSeriesObj.width,multiTimeSeriesObj.height);\n            //@ts-ignore\n            //ctx?.strokeStyle=\"steelblue\";\n            for(let i=0;i<allRenderData.length;i++){\n                ctx?.beginPath();\n                const renderData=allRenderData[i].renderData\n                for(let j=0;j<renderData.length;j++){\n                    renderData[j].y=yScale(renderData[j].v)\n                    if(j===0){\n                        ctx?.moveTo(xScale(renderData[j].x),renderData[j].y);\n                    }else{\n                        ctx?.lineTo(xScale(renderData[j].x),renderData[j].y);\n                    }\n                }\n                ctx?.stroke();\n            }\n    }\n    draw();\n\n}"],"mappings":"AACA,OAAO,KAAKA,EAAE,MAAM,IAAI;AAExB,OAAM,SAAUC,uBAAuBA,CAACC,kBAA0C;EAAA,IAAAC,qBAAA;EAC9E,MAAMC,aAAa,GAAG,CAAC,CAAC,EAAE,CAAC,IAAIF,kBAAkB,CAACG,QAAQ,GAAG,CAAC,CAAC;EAE/D,IAAIC,eAAe,GAAG;IAClBC,MAAM,EAAE,CAAC;IACTC,MAAM,EAAE,CAAC;IACTC,OAAO,EAAE,CAAC;IACVC,OAAO,EAAE,CAAC;IACVC,WAAW,EAAE,KAAK;IAClBC,MAAM,EAAE;GACX;EACD;EACA,MAAMC,MAAM,GAAG;IAAEC,GAAG,EAAE,EAAE;IAAEC,MAAM,EAAE,EAAE;IAAEC,IAAI,EAAE,EAAE;IAAEC,KAAK,EAAE;EAAE,CAAE;EAC3D,MAAMC,GAAG,GAAGlB,EAAE,CAACmB,MAAM,CAAC,oBAAoB,CAAC,CAACC,MAAM,CAAC,KAAK,CAAC;EACzDC,QAAQ,CACHC,cAAc,CAAC,mBAAmB,CAAE,CACpCC,gBAAgB,CAAC,SAAS,EAAE,MAAK;IAC9BjB,eAAe,CAACK,WAAW,GAAG,KAAK;EACvC,CAAC,CAAC;EACNO,GAAG,CACEM,IAAI,CAAC,OAAO,EAAEtB,kBAAkB,CAACuB,KAAK,GAAGZ,MAAM,CAACG,IAAI,GAAGH,MAAM,CAACI,KAAK,CAAC,CACpEO,IAAI,CAAC,QAAQ,EAAEtB,kBAAkB,CAACwB,MAAM,GAAGb,MAAM,CAACC,GAAG,GAAGD,MAAM,CAACE,MAAM,CAAC,CACtES,IAAI,CAAC,WAAW,EAAE,aAAatB,kBAAkB,CAACyB,CAAC,IAAIzB,kBAAkB,CAAC0B,CAAC,GAAG,CAAC,CAC/EC,KAAK,CAAC,kBAAkB,EAAE,MAAM,CAAC;EAEtC,MAAMC,SAAS,GAAC,UAAU5B,kBAAkB,CAACuB,KAAK,EAAE;EACpD,IAAIM,UAAU,GAAQb,GAAG,CAACE,MAAM,CAAC,eAAe,CAAC,CAACI,IAAI,CAAC,IAAI,EAAEM,SAAS,CAAC,CAACN,IAAI,CAAC,GAAG,EAAEX,MAAM,CAACG,IAAI,CAAC,CAACQ,IAAI,CAAC,GAAG,EAAEX,MAAM,CAACC,GAAG,CAAC,CAACU,IAAI,CAAC,OAAO,EAAEtB,kBAAkB,CAACuB,KAAK,CAAC,CAACD,IAAI,CAAC,QAAQ,EAAEtB,kBAAkB,CAACwB,MAAM,CAAC;EACtM,MAAMM,MAAM,GAAGX,QAAQ,CAACY,aAAa,CAAC,QAAQ,CAAC;EAC/C,CAAA9B,qBAAA,GAAAkB,QAAQ,CAACC,cAAc,CAACQ,SAAS,CAAC,cAAA3B,qBAAA,eAAlCA,qBAAA,CAAoC+B,WAAW,CAACF,MAAM,CAAC;EACvDA,MAAM,CAACP,KAAK,GAAGvB,kBAAkB,CAACuB,KAAK;EACvCO,MAAM,CAACN,MAAM,GAAGxB,kBAAkB,CAACwB,MAAM;EACzC,IAAIS,GAAG,GAAGH,MAAM,CAACI,UAAU,CAAC,IAAI,CAAC;EAEjC,MAAMC,MAAM,GAAQrC,EAAE,CAACsC,WAAW,EAAE,CAACC,MAAM,CAAC,CAAC,CAAC,EAAErC,kBAAkB,CAACuB,KAAK,CAAC,CAAC,CAACe,KAAK,CAAC,CAAC,CAAC,EAACtC,kBAAkB,CAACuB,KAAK,CAAC,CAAC;EAC9G,MAAMgB,MAAM,GAAQzC,EAAE,CAACsC,WAAW,EAAE,CAACC,MAAM,CAAC,CAACrC,kBAAkB,CAACwC,IAAI,EAAExC,kBAAkB,CAACyC,IAAI,CAAC,CAAC,CAACH,KAAK,CAAC,CAACtC,kBAAkB,CAACwB,MAAM,EAAC,CAAC,CAAE,CAAC;EAErI,MAAMkB,KAAK,GAAG5C,EAAE,CAAC6C,UAAU,CAACR,MAAM,CAAC;EACnC,MAAMS,KAAK,GAAG9C,EAAE,CAAC+C,QAAQ,CAACN,MAAM,CAAC;EAEjC,MAAMO,MAAM,GAAG9B,GAAG,CAACE,MAAM,CAAC,GAAG,CAAC,CAACI,IAAI,CAAC,WAAW,EAAE,aAAaX,MAAM,CAACG,IAAI,IAAId,kBAAkB,CAACwB,MAAM,GAAGb,MAAM,CAACC,GAAG,GAAG,CAAC,CAACU,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC,CAACyB,IAAI,CAACL,KAAK,CAAC;EAC3J,MAAMM,MAAM,GAAGhC,GAAG,CAACE,MAAM,CAAC,GAAG,CAAC,CAACI,IAAI,CAAC,WAAW,EAAE,aAAaX,MAAM,CAACG,IAAI,IAAIH,MAAM,CAACC,GAAG,GAAG,CAAC,CAACU,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC,CAACyB,IAAI,CAACH,KAAK,CAAC;EAE/H,SAASK,IAAIA,CAAA;IACLC,OAAO,CAACC,GAAG,CAACnD,kBAAkB,CAAC;IAC/B,MAAMoD,aAAa,GAACpD,kBAAkB,CAACoD,aAAa;IACpDnB,GAAG,aAAHA,GAAG,eAAHA,GAAG,CAAEoB,SAAS,CAAC,CAAC,EAAC,CAAC,EAACrD,kBAAkB,CAACuB,KAAK,EAACvB,kBAAkB,CAACwB,MAAM,CAAC;IACtE;IACA;IACA,KAAI,IAAI8B,CAAC,GAAC,CAAC,EAACA,CAAC,GAACF,aAAa,CAACG,MAAM,EAACD,CAAC,EAAE,EAAC;MACnCrB,GAAG,aAAHA,GAAG,eAAHA,GAAG,CAAEuB,SAAS,EAAE;MAChB,MAAMC,UAAU,GAACL,aAAa,CAACE,CAAC,CAAC,CAACG,UAAU;MAC5C,KAAI,IAAIC,CAAC,GAAC,CAAC,EAACA,CAAC,GAACD,UAAU,CAACF,MAAM,EAACG,CAAC,EAAE,EAAC;QAChCD,UAAU,CAACC,CAAC,CAAC,CAAChC,CAAC,GAACa,MAAM,CAACkB,UAAU,CAACC,CAAC,CAAC,CAACC,CAAC,CAAC;QACvC,IAAGD,CAAC,KAAG,CAAC,EAAC;UACLzB,GAAG,aAAHA,GAAG,eAAHA,GAAG,CAAE2B,MAAM,CAACzB,MAAM,CAACsB,UAAU,CAACC,CAAC,CAAC,CAACjC,CAAC,CAAC,EAACgC,UAAU,CAACC,CAAC,CAAC,CAAChC,CAAC,CAAC;SACvD,MAAI;UACDO,GAAG,aAAHA,GAAG,eAAHA,GAAG,CAAE4B,MAAM,CAAC1B,MAAM,CAACsB,UAAU,CAACC,CAAC,CAAC,CAACjC,CAAC,CAAC,EAACgC,UAAU,CAACC,CAAC,CAAC,CAAChC,CAAC,CAAC;;;MAG5DO,GAAG,aAAHA,GAAG,eAAHA,GAAG,CAAE6B,MAAM,EAAE;;EAEzB;EACAb,IAAI,EAAE;AAEV","ignoreList":[]}]}