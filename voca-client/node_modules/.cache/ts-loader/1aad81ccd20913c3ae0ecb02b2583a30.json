{"remainingRequest":"/Users/apple/Desktop/om3-extend/om3-client/node_modules/babel-loader/lib/index.js!/Users/apple/Desktop/om3-extend/om3-client/node_modules/ts-loader/index.js??ref--15-2!/Users/apple/Desktop/om3-extend/om3-client/node_modules/eslint-loader/index.js??ref--14-0!/Users/apple/Desktop/om3-extend/om3-client/src/application/line-interaction.ts","dependencies":[{"path":"/Users/apple/Desktop/om3-extend/om3-client/src/application/line-interaction.ts","mtime":1732637048000},{"path":"/Users/apple/Desktop/om3-extend/om3-client/babel.config.js","mtime":1732546288000},{"path":"/Users/apple/Desktop/om3-extend/om3-client/node_modules/cache-loader/dist/cjs.js","mtime":1732627998000},{"path":"/Users/apple/Desktop/om3-extend/om3-client/node_modules/babel-loader/lib/index.js","mtime":1732627998000},{"path":"/Users/apple/Desktop/om3-extend/om3-client/node_modules/ts-loader/index.js","mtime":1732627997000},{"path":"/Users/apple/Desktop/om3-extend/om3-client/node_modules/eslint-loader/index.js","mtime":1732627997000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJzsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKY2xhc3MgSW50ZXJhY3Rpb25JbmZvIHsKICBjb25zdHJ1Y3Rvcih0eXBlKSB7CiAgICB0aGlzLnR5cGUgPSB0eXBlOwogICAgdGhpcy5zaG93SW5mbyA9IFtdOwogICAgdGhpcy50aW1lUmFuZ2UgPSBbXTsKICAgIHRoaXMud2lkdGggPSAwOwogICAgdGhpcy5sZXZlbCA9IDA7CiAgfQogIHNldFNob3dJbmZvKHNob3dJbmZvKSB7CiAgICB0aGlzLnNob3dJbmZvID0gc2hvd0luZm87CiAgfQogIHNldFJhbmdlVyh0aW1lUmFuZ2UsIHdpZHRoLCBsZXZlbCkgewogICAgdGhpcy50aW1lUmFuZ2UgPSBbdGltZVJhbmdlWzBdLCB0aW1lUmFuZ2VbMV1dOwogICAgdGhpcy53aWR0aCA9IHdpZHRoOwogICAgdGhpcy5sZXZlbCA9IGxldmVsOwogIH0KfQpsZXQgaW50ZXJhY3Rpb25TdGFjayA9IFtdOwphc3luYyBmdW5jdGlvbiBnZXQodXJsKSB7CiAgdXJsID0gJ3Bvc3RncmVzJyArIHVybDsKICAvL2NvbnN0IGxvYWRpbmcgPSBvcGVuTG9hZGluZygpOwogIGNvbnN0IHsKICAgIGRhdGEKICB9ID0gYXdhaXQgYXhpb3MuZ2V0KHVybCk7CiAgLy9sb2FkaW5nLmNsb3NlKCk7CiAgcmV0dXJuIGRhdGE7Cn0KZXhwb3J0IGZ1bmN0aW9uIGRyYXdWaWV3Q2hhbmdlTGluZUNoYXJ0KGxpbmVDaGFydE9iaiwgbGluZTEpIHsKICB2YXIgX2RvY3VtZW50JGdldEVsZW1lbnRCOwogIGxldCByZWFsVGltZVN0YW1wUmFuZ2UgPSBbXTsKICBsZXQgbm9kZUluZGV4UmFuZ2UgPSBbXTsKICBsZXQgcm93TnVtYmVyID0gNjU1MzY7IC8vLy8vLy8vLy8vLy/kv67mlLnliY0xMzEwNzIKICAvLyByZWFsVGltZVN0YW1wUmFuZ2UgPSBbbGluZUNoYXJ0T2JqLnN0YXJ0VGltZSxsaW5lQ2hhcnRPYmouZW5kVGltZV07CiAgcmVhbFRpbWVTdGFtcFJhbmdlID0gWzAsIHJvd051bWJlcl07CiAgbm9kZUluZGV4UmFuZ2UgPSBbbGluZUNoYXJ0T2JqLnRpbWVSYW5nZVswXSwgbGluZUNoYXJ0T2JqLnRpbWVSYW5nZVsxXV07CiAgbGV0IGlzSW5pdCA9IGZhbHNlOwogIGxldCBpc1Jlc2l6aW5nID0gZmFsc2U7CiAgbGV0IGlzUmViYWNraW5nID0gZmFsc2U7CiAgbGV0IGludGVyYWN0aXZlSW5mbyA9IHsKICAgIHN0YXJ0WDogMCwKICAgIHN0YXJ0WTogMCwKICAgIG9mZnNldFg6IDAsCiAgICBvZmZzZXRZOiAwLAogICAgaXNNb3VzZURvd246IGZhbHNlLAogICAgaXNNb3ZlOiBmYWxzZQogIH07CiAgY29uc3QgcGFkaW5nID0gewogICAgdG9wOiAyMCwKICAgIGJvdHRvbTogODAsCiAgICBsZWZ0OiA2MCwKICAgIHJpZ2h0OiAyMAogIH07CiAgY29uc3Qgc3ZnID0gZDMuc2VsZWN0KCIjY29udGVudC1jb250YWluZXIiKS5hcHBlbmQoInN2ZyIpOwogIHN2Zy5hdHRyKCJ3aWR0aCIsIGxpbmVDaGFydE9iai53aWR0aCArIHBhZGluZy5sZWZ0ICsgcGFkaW5nLnJpZ2h0KS5hdHRyKCJoZWlnaHQiLCBsaW5lQ2hhcnRPYmouaGVpZ2h0ICsgcGFkaW5nLnRvcCArIHBhZGluZy5ib3R0b20pLmF0dHIoInRyYW5zZm9ybSIsIGB0cmFuc2xhdGUoJHtsaW5lQ2hhcnRPYmoueH0sJHtsaW5lQ2hhcnRPYmoueX0pYCkuc3R5bGUoImJhY2tncm91bmQtY29sb3IiLCAiI2ZmZiIpOwogIGNvbnN0IGZvcmVpZ25JZCA9IGBmb3JlaWduJHtsaW5lQ2hhcnRPYmoud2lkdGggKyBNYXRoLnJhbmRvbSgpfWA7CiAgY29uc3QgZm9yZWlnRyA9IHN2Zy5hcHBlbmQoImciKS5hdHRyKCJ0cmFuc2Zyb20iLCBgdHJhbnNsYXRlKCR7cGFkaW5nLmxlZnR9LCR7cGFkaW5nLnRvcH0pYCk7CiAgbGV0IGZvcmVpZ25PYmogPSBmb3JlaWdHLmFwcGVuZCgiZm9yZWlnbk9iamVjdCIpLmF0dHIoImlkIiwgZm9yZWlnbklkKS5hdHRyKCJ4IiwgcGFkaW5nLmxlZnQpLmF0dHIoInkiLCBwYWRpbmcudG9wKS5hdHRyKCd3aWR0aCcsIGxpbmVDaGFydE9iai53aWR0aCkuYXR0cignaGVpZ2h0JywgbGluZUNoYXJ0T2JqLmhlaWdodCk7CiAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7CiAgY2FudmFzLl9fZGF0YV9fID0ge307CiAgKF9kb2N1bWVudCRnZXRFbGVtZW50QiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZvcmVpZ25JZCkpID09PSBudWxsIHx8IF9kb2N1bWVudCRnZXRFbGVtZW50QiA9PT0gdm9pZCAwIHx8IF9kb2N1bWVudCRnZXRFbGVtZW50Qi5hcHBlbmRDaGlsZChjYW52YXMpOwogIGNhbnZhcy53aWR0aCA9IGxpbmVDaGFydE9iai53aWR0aDsKICBjYW52YXMuaGVpZ2h0ID0gbGluZUNoYXJ0T2JqLmhlaWdodDsKICBsZXQgY3R4ID0gY2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgY29uc3QgaW5kZXhUb1RpbWVTdGFtcFNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oW25vZGVJbmRleFJhbmdlWzBdLCBub2RlSW5kZXhSYW5nZVsxXV0pLnJhbmdlKFtyZWFsVGltZVN0YW1wUmFuZ2VbMF0sIHJlYWxUaW1lU3RhbXBSYW5nZVsxXV0pOwogIGNvbnN0IHhTY2FsZSA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFswLCBsaW5lQ2hhcnRPYmoud2lkdGhdKS5yYW5nZShbMCwgbGluZUNoYXJ0T2JqLndpZHRoXSk7CiAgLy8gbGV0IHNob3dUaW1lWFNjYWxlOiBhbnkgPSBkMy5zY2FsZVRpbWUoKS5kb21haW4oW25ldyBEYXRlKHJlYWxUaW1lU3RhbXBSYW5nZVswXSksIG5ldyBEYXRlKHJlYWxUaW1lU3RhbXBSYW5nZVsxXSldKS5yYW5nZShbMCwgbGluZUNoYXJ0T2JqLndpZHRoXSk7CiAgbGV0IHNob3dUaW1lWFNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzAsIHJvd051bWJlcl0pLnJhbmdlKFswLCBsaW5lQ2hhcnRPYmoud2lkdGhdKTsKICBsZXQgeVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWy0xMDAwLCAxMDAwXSkucmFuZ2UoW2xpbmVDaGFydE9iai5oZWlnaHQsIDBdKTsKICBsZXQgeFJlU2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbMCwgbGluZUNoYXJ0T2JqLndpZHRoXSkucmFuZ2UoWzAsIHJvd051bWJlciAtIDFdKTsKICAvLyBsZXQgc2hvd1hUaW1lU2NhbGU6IGFueSA9IGQzLnNjYWxlVGltZSgpLmRvbWFpbihbMCw2NTUzNl0pLnJhbmdlKFswLCBsaW5lQ2hhcnRPYmoud2lkdGhdKTsKICBsZXQgc2hvd1hUaW1lU2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbMCwgcm93TnVtYmVyXSkucmFuZ2UoWzAsIGxpbmVDaGFydE9iai53aWR0aF0pOwogIGxldCB6b29tQXhpcyA9IGQzLmF4aXNCb3R0b20oc2hvd1RpbWVYU2NhbGUpOwogIGxldCB5QXhpcyA9IGQzLmF4aXNMZWZ0KHlTY2FsZSk7CiAgbGV0IHhBeGlzID0gZDMuYXhpc0JvdHRvbShzaG93WFRpbWVTY2FsZSk7CiAgY29uc3QgdGltZUJydXNoT2JqID0gZDMuYnJ1c2hYKCkuZXh0ZW50KFtbMCwgMTBdLCBbbGluZUNoYXJ0T2JqLndpZHRoLCA0MF1dKTsKICB0aW1lQnJ1c2hPYmoub24oImVuZCIsIGJydXNoZWQpOwogIHRpbWVCcnVzaE9iai5vbigic3RhcnQiLCAoKSA9PiB7CiAgICBjb25zb2xlLmxvZygic3RhcnQiKTsKICB9KTsKICBjb25zdCB0aW1lQm94RyA9IHN2Zy5hcHBlbmQoImciKS5hdHRyKCJ0cmFuc2Zvcm0iLCBgdHJhbnNsYXRlKCR7cGFkaW5nLmxlZnR9LCR7cGFkaW5nLnRvcCArIDUwICsgbGluZUNoYXJ0T2JqLmhlaWdodCAtIDIwfSlgKS5jYWxsKHRpbWVCcnVzaE9iaikuY2FsbCh0aW1lQnJ1c2hPYmoubW92ZSwgWzAsIGxpbmVDaGFydE9iai53aWR0aF0pOwogIGxldCB6b29tQXhpc0cgPSBzdmcuYXBwZW5kKCJnIikuYXR0cignc3R5bGUnLCAndXNlci1zZWxlY3Q6bm9uZScpLmF0dHIoInRyYW5zZm9ybSIsIGB0cmFuc2xhdGUoJHtwYWRpbmcubGVmdH0sJHtsaW5lQ2hhcnRPYmouaGVpZ2h0ICsgcGFkaW5nLnRvcCArIDUwfSlgKS5hdHRyKCJjbGFzcyIsICd4IGF4aXMnKS5jYWxsKHpvb21BeGlzKTsKICBsZXQgeEF4aXNHID0gc3ZnLmFwcGVuZCgiZyIpLmF0dHIoJ3N0eWxlJywgJ3VzZXItc2VsZWN0Om5vbmUnKS5hdHRyKCJ0cmFuc2Zvcm0iLCBgdHJhbnNsYXRlKCR7cGFkaW5nLmxlZnR9LCR7bGluZUNoYXJ0T2JqLmhlaWdodCArIHBhZGluZy50b3B9KWApLmF0dHIoImNsYXNzIiwgJ3ggYXhpcycpLmNhbGwoeEF4aXMpOwogIGxldCB5QXhpc0cgPSBzdmcuYXBwZW5kKCJnIikuYXR0cignc3R5bGUnLCAndXNlci1zZWxlY3Q6bm9uZScpLmF0dHIoInRyYW5zZm9ybSIsIGB0cmFuc2xhdGUoJHtwYWRpbmcubGVmdH0sJHtwYWRpbmcudG9wfSlgKS5hdHRyKCJjbGFzcyIsICd5IGF4aXMnKS5jYWxsKHlBeGlzKTsKICBmdW5jdGlvbiB1cGRhdGVDYW52YXNXaWR0aCgpIHsKICAgIC8vQHRzLWlnbm9yZQogICAgY2FudmFzLnN0eWxlLndpZHRoID0gbGluZUNoYXJ0T2JqLndpZHRoOwogICAgc3ZnLmF0dHIoIndpZHRoIiwgbGluZUNoYXJ0T2JqLndpZHRoICsgcGFkaW5nLmxlZnQgKyBwYWRpbmcucmlnaHQpLmF0dHIoImhlaWdodCIsIGxpbmVDaGFydE9iai5oZWlnaHQgKyBwYWRpbmcudG9wICsgcGFkaW5nLmJvdHRvbSk7CiAgICBmb3JlaWduT2JqLmF0dHIoIndpZHRoIiwgbGluZUNoYXJ0T2JqLndpZHRoKTsKICAgIHhTY2FsZS5kb21haW4oWzAsIGxpbmVDaGFydE9iai53aWR0aF0pLnJhbmdlKFswLCBsaW5lQ2hhcnRPYmoud2lkdGhdKTsKICAgIC8vIHNob3dUaW1lWFNjYWxlLmRvbWFpbihbbmV3IERhdGUocmVhbFRpbWVTdGFtcFJhbmdlWzBdKSwgbmV3IERhdGUocmVhbFRpbWVTdGFtcFJhbmdlWzFdKV0pLnJhbmdlKFswLCBsaW5lQ2hhcnRPYmoud2lkdGhdKTsKICAgIHNob3dYVGltZVNjYWxlID0gZDMuc2NhbGVUaW1lKCkuZG9tYWluKFtuZXcgRGF0ZShNYXRoLmZsb29yKGluZGV4VG9UaW1lU3RhbXBTY2FsZSgwKSkpLCBuZXcgRGF0ZShNYXRoLmZsb29yKGluZGV4VG9UaW1lU3RhbXBTY2FsZShyb3dOdW1iZXIpKSldKS5yYW5nZShbMCwgbGluZUNoYXJ0T2JqLndpZHRoXSk7CiAgICAvL3Nob3dUaW1lWFNjYWxlLnJhbmdlKFswLCBsaW5lQ2hhcnRPYmoud2lkdGhdKTsKICAgIGlmICh6b29tQXhpc0cgIT0gbnVsbCkgewogICAgICB6b29tQXhpc0cucmVtb3ZlKCk7CiAgICAgIHpvb21BeGlzRyA9IHN2Zy5hcHBlbmQoImciKS5hdHRyKCdzdHlsZScsICd1c2VyLXNlbGVjdDpub25lJykuYXR0cigidHJhbnNmb3JtIiwgYHRyYW5zbGF0ZSgke3BhZGluZy5sZWZ0fSwke2xpbmVDaGFydE9iai5oZWlnaHQgKyBwYWRpbmcudG9wICsgNTB9KWApLmF0dHIoImNsYXNzIiwgJ3ggYXhpcycpLmNhbGwoem9vbUF4aXMpOwogICAgfQogICAgdGltZUJydXNoT2JqLmV4dGVudChbWzAsIDEwXSwgW2xpbmVDaGFydE9iai53aWR0aCwgNDBdXSk7CiAgICB0aW1lQnJ1c2hPYmoub24oImVuZCIsIGJydXNoZWQpOwogICAgdGltZUJydXNoT2JqLm9uKCJzdGFydCIsICgpID0+IHsKICAgICAgY29uc29sZS5sb2coInN0YXJ0Iik7CiAgICB9KTsKICAgIC8vIGNvbnN0IHRlbXBSZVNjYWxlPWQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFswLCBsaW5lQ2hhcnRPYmouZGF0YU1hbmFnZXIucmVhbERhdGFSb3dOdW0gLSAxXSkucmFuZ2UoWzAsbGluZUNoYXJ0T2JqLndpZHRoXSk7CiAgICAvLyB0aW1lQm94Ry5jYWxsKHRpbWVCcnVzaE9iaikuY2FsbCh0aW1lQnJ1c2hPYmoubW92ZSwgW3RlbXBSZVNjYWxlKGxpbmVDaGFydE9iai50aW1lUmFuZ2VbMF0pLCB0ZW1wUmVTY2FsZShsaW5lQ2hhcnRPYmoudGltZVJhbmdlWzFdKV0pOwogICAgY3R4ID0gY2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgfQogIGZ1bmN0aW9uIGRyYXcobm9uVW5pZm9ybUNvbE9ianMpIHsKICAgIGNhbnZhcy53aWR0aCA9IGxpbmVDaGFydE9iai53aWR0aDsKICAgIC8vIHlTY2FsZSA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFtsaW5lQ2hhcnRPYmouZGF0YS5taW52LCBsaW5lQ2hhcnRPYmouZGF0YS5tYXh2XSkucmFuZ2UoW2xpbmVDaGFydE9iai5oZWlnaHQsIDBdKTsKICAgIHlTY2FsZSA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFtsaW5lQ2hhcnRPYmoubWluViwgbGluZUNoYXJ0T2JqLm1heFZdKS5yYW5nZShbbGluZUNoYXJ0T2JqLmhlaWdodCwgMF0pOwogICAgLy8geVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWy1maW5hbFZhbHVlLCBmaW5hbFZhbHVlXSkucmFuZ2UoW2xpbmVDaGFydE9iai5oZWlnaHQsIDBdKTsKICAgIHlBeGlzID0gZDMuYXhpc0xlZnQoeVNjYWxlKTsKICAgIGlmICh5QXhpc0cgIT09IG51bGwgJiYgeUF4aXNHICE9PSB1bmRlZmluZWQpIHsKICAgICAgeUF4aXNHLnJlbW92ZSgpOwogICAgfQogICAgeUF4aXNHID0gc3ZnLmFwcGVuZCgiZyIpLmF0dHIoJ3N0eWxlJywgJ3VzZXItc2VsZWN0Om5vbmUnKS5hdHRyKCJ0cmFuc2Zvcm0iLCBgdHJhbnNsYXRlKCR7cGFkaW5nLmxlZnR9LCR7cGFkaW5nLnRvcH0pYCkuYXR0cigiY2xhc3MiLCAneSBheGlzJykuY2FsbCh5QXhpcyk7CiAgICAvLyBzaG93WFRpbWVTY2FsZSA9IGQzLnNjYWxlVGltZSgpLmRvbWFpbihbbmV3IERhdGUoTWF0aC5mbG9vcihpbmRleFRvVGltZVN0YW1wU2NhbGUobGluZUNoYXJ0T2JqLnRpbWVSYW5nZVswXSkpKSwgbmV3IERhdGUoTWF0aC5mbG9vcihpbmRleFRvVGltZVN0YW1wU2NhbGUobGluZUNoYXJ0T2JqLnRpbWVSYW5nZVsxXSkpKV0pLnJhbmdlKFswLCBsaW5lQ2hhcnRPYmoud2lkdGhdKTsKICAgIHNob3dYVGltZVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzAsIHJvd051bWJlcl0pLnJhbmdlKFswLCBsaW5lQ2hhcnRPYmoud2lkdGhdKTsKICAgIHhBeGlzID0gZDMuYXhpc0JvdHRvbShzaG93WFRpbWVTY2FsZSk7CiAgICBpZiAoeEF4aXNHICE9PSBudWxsICYmIHhBeGlzRyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIHhBeGlzRy5yZW1vdmUoKTsKICAgIH0KICAgIHhBeGlzRyA9IHN2Zy5hcHBlbmQoImciKS5hdHRyKCdzdHlsZScsICd1c2VyLXNlbGVjdDpub25lJykuYXR0cigidHJhbnNmb3JtIiwgYHRyYW5zbGF0ZSgke3BhZGluZy5sZWZ0fSwke2xpbmVDaGFydE9iai5oZWlnaHQgKyBwYWRpbmcudG9wfSlgKS5hdHRyKCJjbGFzcyIsICd4IGF4aXMnKS5jYWxsKHhBeGlzKTsKICAgIGlmIChmb3JlaWduT2JqID09IG51bGwgJiYgbm9uVW5pZm9ybUNvbE9ianMpIHsKICAgICAgdmFyIF9kb2N1bWVudCRnZXRFbGVtZW50QjI7CiAgICAgIGZvcmVpZ25PYmogPSBzdmcuYXBwZW5kKCJmb3JlaWduT2JqZWN0IikuYXR0cigiaWQiLCAiZm9yZWlnbiIpLmF0dHIoJ3gnLCBwYWRpbmcubGVmdCkuYXR0cigneScsIHBhZGluZy50b3ApLmF0dHIoJ3dpZHRoJywgbGluZUNoYXJ0T2JqLndpZHRoKS5hdHRyKCdoZWlnaHQnLCBsaW5lQ2hhcnRPYmouaGVpZ2h0KTsKICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7CiAgICAgIChfZG9jdW1lbnQkZ2V0RWxlbWVudEIyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZvcmVpZ24iKSkgPT09IG51bGwgfHwgX2RvY3VtZW50JGdldEVsZW1lbnRCMiA9PT0gdm9pZCAwIHx8IF9kb2N1bWVudCRnZXRFbGVtZW50QjIuYXBwZW5kQ2hpbGQoY2FudmFzKTsKICAgICAgY2FudmFzLndpZHRoID0gbGluZUNoYXJ0T2JqLndpZHRoOwogICAgICBjYW52YXMuaGVpZ2h0ID0gbGluZUNoYXJ0T2JqLmhlaWdodDsKICAgICAgY3R4ID0gY2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgICB9CiAgICBub25Vbmlmb3JtQ29sT2JqcyA9IG5vblVuaWZvcm1Db2xPYmpzWzBdOwogICAgaWYgKG5vblVuaWZvcm1Db2xPYmpzICYmIGN0eCkgewogICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGxpbmVDaGFydE9iai53aWR0aCwgbGluZUNoYXJ0T2JqLmhlaWdodCk7CiAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgY3R4LnN0cm9rZVN0eWxlID0gInN0ZWVsYmx1ZSI7CiAgICAgIGxldCBpbnRlcnZhbCA9IChub25Vbmlmb3JtQ29sT2Jqc1swXS5lbmRfdGltZSAtIG5vblVuaWZvcm1Db2xPYmpzWzBdLnN0YXJ0X3RpbWUpIC8gMzsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub25Vbmlmb3JtQ29sT2Jqcy5sZW5ndGg7IGkrKykgewogICAgICAgIGN0eC5tb3ZlVG8oc2hvd1hUaW1lU2NhbGUobm9uVW5pZm9ybUNvbE9ianNbaV0uc3RhcnRfdGltZSksIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tpXS5zdF92KSk7CiAgICAgICAgY3R4LmxpbmVUbyhzaG93WFRpbWVTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tpXS5zdGFydF90aW1lICsgaW50ZXJ2YWwgKiAyKSwgeVNjYWxlKG5vblVuaWZvcm1Db2xPYmpzW2ldLm1pbikpOwogICAgICAgIGN0eC5tb3ZlVG8oc2hvd1hUaW1lU2NhbGUobm9uVW5pZm9ybUNvbE9ianNbaV0uc3RhcnRfdGltZSArIGludGVydmFsICogMiksIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tpXS5taW4pKTsKICAgICAgICBjdHgubGluZVRvKHNob3dYVGltZVNjYWxlKG5vblVuaWZvcm1Db2xPYmpzW2ldLnN0YXJ0X3RpbWUgKyBpbnRlcnZhbCAqIDMpLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbaV0ubWF4KSk7CiAgICAgICAgY3R4Lm1vdmVUbyhzaG93WFRpbWVTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tpXS5zdGFydF90aW1lICsgaW50ZXJ2YWwgKiAzKSwgeVNjYWxlKG5vblVuaWZvcm1Db2xPYmpzW2ldLm1heCkpOwogICAgICAgIGN0eC5saW5lVG8oc2hvd1hUaW1lU2NhbGUobm9uVW5pZm9ybUNvbE9ianNbaV0uZW5kX3RpbWUpLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbaV0uZXRfdikpOwogICAgICAgIGlmIChpIDw9IG5vblVuaWZvcm1Db2xPYmpzLmxlbmd0aCAtIDIpIHsKICAgICAgICAgIGN0eC5tb3ZlVG8oc2hvd1hUaW1lU2NhbGUobm9uVW5pZm9ybUNvbE9ianNbaV0uZW5kX3RpbWUpLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbaV0uZXRfdikpOwogICAgICAgICAgY3R4LmxpbmVUbyhzaG93WFRpbWVTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tpICsgMV0uc3RhcnRfdGltZSksIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tpICsgMV0uc3RfdikpOwogICAgICAgIH0KICAgICAgfQogICAgICBjdHguc3Ryb2tlKCk7CiAgICB9IGVsc2UgewogICAgICBjb25zb2xlLmxvZygiZXJyb3IiKTsKICAgIH0KICB9CiAgLy8gZnVuY3Rpb24gZHJhdyhub25Vbmlmb3JtQ29sT2Jqcz86IEFycmF5PE5vVW5pZm9ybUNvbE9iaj4sIGZpbmFsVmFsdWU/OmFueSwgdHJhbnNmb3JtX3N5bWJvbD86c3RyaW5nLCBsZW5PZkxpbmVzPzpudW1iZXIpIHsKICAvLyAgICAgY2FudmFzLndpZHRoID0gbGluZUNoYXJ0T2JqLndpZHRoOwogIC8vICAgICAvLyB5U2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbbGluZUNoYXJ0T2JqLmRhdGEubWludiwgbGluZUNoYXJ0T2JqLmRhdGEubWF4dl0pLnJhbmdlKFtsaW5lQ2hhcnRPYmouaGVpZ2h0LCAwXSk7CiAgLy8gICAgIHlTY2FsZSA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFstMjAwMCwgMjAwMF0pLnJhbmdlKFtsaW5lQ2hhcnRPYmouaGVpZ2h0LCAwXSk7CiAgLy8gICAgIC8vIHlTY2FsZSA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFstZmluYWxWYWx1ZSwgZmluYWxWYWx1ZV0pLnJhbmdlKFtsaW5lQ2hhcnRPYmouaGVpZ2h0LCAwXSk7CiAgLy8gICAgIHlBeGlzID0gZDMuYXhpc0xlZnQoeVNjYWxlKQogIC8vICAgICBpZiAoeUF4aXNHICE9PSBudWxsICYmIHlBeGlzRyAhPT0gdW5kZWZpbmVkKSB7CiAgLy8gICAgICAgICB5QXhpc0cucmVtb3ZlKCk7CiAgLy8gICAgIH0KICAvLyAgICAgeUF4aXNHID0gc3ZnLmFwcGVuZCgiZyIpLmF0dHIoJ3N0eWxlJywgJ3VzZXItc2VsZWN0Om5vbmUnKS5hdHRyKCJ0cmFuc2Zvcm0iLCBgdHJhbnNsYXRlKCR7cGFkaW5nLmxlZnR9LCR7cGFkaW5nLnRvcH0pYCkuYXR0cigiY2xhc3MiLCAneSBheGlzJykuY2FsbCh5QXhpcyk7CiAgLy8gICAgIHNob3dYVGltZVNjYWxlID0gZDMuc2NhbGVUaW1lKCkuZG9tYWluKFtuZXcgRGF0ZShNYXRoLmZsb29yKGluZGV4VG9UaW1lU3RhbXBTY2FsZShsaW5lQ2hhcnRPYmoudGltZVJhbmdlWzBdKSkpLCBuZXcgRGF0ZShNYXRoLmZsb29yKGluZGV4VG9UaW1lU3RhbXBTY2FsZShsaW5lQ2hhcnRPYmoudGltZVJhbmdlWzFdKSkpXSkucmFuZ2UoWzAsIGxpbmVDaGFydE9iai53aWR0aF0pOwogIC8vICAgICB4QXhpcyA9IGQzLmF4aXNCb3R0b20oc2hvd1hUaW1lU2NhbGUpOwogIC8vICAgICBpZiAoeEF4aXNHICE9PSBudWxsICYmIHhBeGlzRyAhPT0gdW5kZWZpbmVkKSB7CiAgLy8gICAgICAgICB4QXhpc0cucmVtb3ZlKCk7CiAgLy8gICAgIH0KICAvLyAgICAgeEF4aXNHID0gc3ZnLmFwcGVuZCgiZyIpLmF0dHIoJ3N0eWxlJywgJ3VzZXItc2VsZWN0Om5vbmUnKS5hdHRyKCJ0cmFuc2Zvcm0iLCBgdHJhbnNsYXRlKCR7cGFkaW5nLmxlZnR9LCR7bGluZUNoYXJ0T2JqLmhlaWdodCArIHBhZGluZy50b3B9KWApLmF0dHIoImNsYXNzIiwgJ3ggYXhpcycpLmNhbGwoeEF4aXMpCiAgLy8gICAgIGlmIChmb3JlaWduT2JqID09IG51bGwgJiYgbm9uVW5pZm9ybUNvbE9ianMpIHsKICAvLyAgICAgICAgIGZvcmVpZ25PYmogPSBzdmcuYXBwZW5kKCJmb3JlaWduT2JqZWN0IikKICAvLyAgICAgICAgICAgICAuYXR0cigiaWQiLCAiZm9yZWlnbiIpCiAgLy8gICAgICAgICAgICAgLmF0dHIoJ3gnLCBwYWRpbmcubGVmdCkKICAvLyAgICAgICAgICAgICAuYXR0cigneScsIHBhZGluZy50b3ApCiAgLy8gICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgbGluZUNoYXJ0T2JqLndpZHRoKQogIC8vICAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBsaW5lQ2hhcnRPYmouaGVpZ2h0KTsKICAvLyAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpOwogIC8vICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZvcmVpZ24iKT8uYXBwZW5kQ2hpbGQoY2FudmFzKTsKICAvLyAgICAgICAgIGNhbnZhcy53aWR0aCA9IGxpbmVDaGFydE9iai53aWR0aDsKICAvLyAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBsaW5lQ2hhcnRPYmouaGVpZ2h0OwogIC8vICAgICAgICAgY3R4ID0gY2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgLy8gICAgIH0KICAvLyAgICAgaWYgKG5vblVuaWZvcm1Db2xPYmpzICYmIGN0eCkgewogIC8vICAgICAgICAgZm9ybWF0Tm9uUG93RGF0YUZvclZpZXdDaGFuZ2Uobm9uVW5pZm9ybUNvbE9ianMsbGluZUNoYXJ0T2JqLndpZHRoLGxpbmVDaGFydE9iai5tYXhMZW4sbnVsbCkKICAvLyAgICAgICAgIC8vIGNvbnNvbGUubG9nKG5vblVuaWZvcm1Db2xPYmpzKTsKICAvLyAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgbGluZUNoYXJ0T2JqLndpZHRoLCBsaW5lQ2hhcnRPYmouaGVpZ2h0KTsKICAvLyAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAvLyAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICJzdGVlbGJsdWUiCiAgLy8gICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vblVuaWZvcm1Db2xPYmpzLmxlbmd0aDsgaSsrKSB7CiAgLy8gICAgICAgICAgICAgaWYgKG5vblVuaWZvcm1Db2xPYmpzW2ldLmlzTWlzKSB7CiAgLy8gICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgLy8gICAgICAgICAgICAgfQogIC8vICAgICAgICAgICAgIGlmIChub25Vbmlmb3JtQ29sT2Jqc1tpXS5taW5WVGltZVJhbmdlWzBdIDwgbm9uVW5pZm9ybUNvbE9ianNbaV0ubWF4VlRpbWVSYW5nZVswXSkgewogIC8vICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKG5vblVuaWZvcm1Db2xPYmpzW2ldLnBvc2l0aW9uSW5mby5taW5YLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbaV0udlJhbmdlWzBdKSk7CiAgLy8gICAgICAgICAgICAgICAgIGN0eC5saW5lVG8obm9uVW5pZm9ybUNvbE9ianNbaV0ucG9zaXRpb25JbmZvLm1heFgsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tpXS52UmFuZ2VbMV0pKTsKICAvLyAgICAgICAgICAgICB9IGVsc2UgewogIC8vICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKG5vblVuaWZvcm1Db2xPYmpzW2ldLnBvc2l0aW9uSW5mby5taW5YLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbaV0udlJhbmdlWzFdKSk7CiAgLy8gICAgICAgICAgICAgICAgIGN0eC5saW5lVG8obm9uVW5pZm9ybUNvbE9ianNbaV0ucG9zaXRpb25JbmZvLm1heFgsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tpXS52UmFuZ2VbMF0pKTsKICAvLyAgICAgICAgICAgICB9CiAgLy8gICAgICAgICAgICAgaWYgKGkgPD0gbm9uVW5pZm9ybUNvbE9ianMubGVuZ3RoIC0gMiAmJiBub25Vbmlmb3JtQ29sT2Jqc1tpXS5lbmRWICE9PSB1bmRlZmluZWQgJiYgbm9uVW5pZm9ybUNvbE9ianNbaSArIDFdICE9PSB1bmRlZmluZWQpIHsKICAvLyAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyhub25Vbmlmb3JtQ29sT2Jqc1tpXS5wb3NpdGlvbkluZm8uZW5kWCwgeVNjYWxlKG5vblVuaWZvcm1Db2xPYmpzW2ldLmVuZFYhKSk7CiAgLy8gICAgICAgICAgICAgICAgIGN0eC5saW5lVG8obm9uVW5pZm9ybUNvbE9ianNbaSArIDFdLnBvc2l0aW9uSW5mby5zdGFydFgsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tpICsgMV0uc3RhcnRWISkpOwogIC8vICAgICAgICAgICAgIH0KICAvLyAgICAgICAgIH0KICAvLyAgICAgICAgIGNvbnN0IHN0YWNrID0gW107CiAgLy8gICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vblVuaWZvcm1Db2xPYmpzLmxlbmd0aCAtIDE7IGkrKykgewogIC8vICAgICAgICAgICAgIGlmICghbm9uVW5pZm9ybUNvbE9ianNbaV0uaXNNaXMgJiYgbm9uVW5pZm9ybUNvbE9ianNbaSArIDFdLmlzTWlzKSB7CiAgLy8gICAgICAgICAgICAgICAgIHN0YWNrLnB1c2gobm9uVW5pZm9ybUNvbE9ianNbaV0pOwogIC8vICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gaSArIDE7IGogPCBub25Vbmlmb3JtQ29sT2Jqcy5sZW5ndGg7IGorKykgewogIC8vICAgICAgICAgICAgICAgICAgICAgaWYgKG5vblVuaWZvcm1Db2xPYmpzW2ogLSAxXS5pc01pcyAmJiAhbm9uVW5pZm9ybUNvbE9ianNbal0uaXNNaXMpIHsKICAvLyAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjbyA9IHN0YWNrLnBvcCgpCiAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vblVuaWZvcm1Db2xPYmpzW2pdLnN0YXJ0ViA9PT0gdW5kZWZpbmVkIHx8IGNvPy5lbmRWID09PSB1bmRlZmluZWQpIHsKICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiZXJyb3Igbm9uVW5pZm9ybSIpOwogIC8vICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAvLyAgICAgICAgICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKGNvIS5wb3NpdGlvbkluZm8uZW5kWCwgeVNjYWxlKGNvIS5lbmRWKSk7CiAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vblVuaWZvcm1Db2xPYmpzW2pdLnN0YXJ0ViAhPT0gdW5kZWZpbmVkKSB7CiAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8obm9uVW5pZm9ybUNvbE9ianNbal0ucG9zaXRpb25JbmZvLnN0YXJ0WCwgeVNjYWxlKG5vblVuaWZvcm1Db2xPYmpzW2pdLnN0YXJ0ViEpKQogIC8vICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8obm9uVW5pZm9ybUNvbE9ianNbal0ucG9zaXRpb25JbmZvLm1pblgsIHlTY2FsZSgobm9uVW5pZm9ybUNvbE9ianNbal0udlJhbmdlWzBdICsgbm9uVW5pZm9ybUNvbE9ianNbal0udlJhbmdlWzFdKSAvIDIpKQogIC8vICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAvLyAgICAgICAgICAgICAgICAgICAgIH0KICAvLyAgICAgICAgICAgICAgICAgfQogIC8vICAgICAgICAgICAgIH0KICAvLyAgICAgICAgIH0KICAvLyAgICAgICAgIGN0eC5zdHJva2UoKTsKICAvLyAgICAgfSBlbHNlIHsKICAvLyAgICAgICAgIGNvbnNvbGUubG9nKCJlcnJvciIpCiAgLy8gICAgIH0KICAvLyAgICAgLy8gaWYgKG5vblVuaWZvcm1Db2xPYmpzICYmIGN0eCkgewogIC8vICAgICAvLyAgICAgZm9ybWF0Tm9uUG93RGF0YUZvclZpZXdDaGFuZ2Uobm9uVW5pZm9ybUNvbE9ianMsbGluZUNoYXJ0T2JqLndpZHRoLGxpbmVDaGFydE9iai5tYXhMZW4sbnVsbCkKICAvLyAgICAgLy8gICAgIC8vIGNvbnNvbGUubG9nKG5vblVuaWZvcm1Db2xPYmpzKTsKICAvLyAgICAgLy8gICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgbGluZUNoYXJ0T2JqLndpZHRoLCBsaW5lQ2hhcnRPYmouaGVpZ2h0KTsKICAvLyAgICAgLy8gICAgIGN0eC5iZWdpblBhdGgoKTsKICAvLyAgICAgLy8gICAgIGN0eC5zdHJva2VTdHlsZSA9ICdzdGVlbGJsdWUnOwogIC8vICAgICAvLyAgICAgaWYodHJhbnNmb3JtX3N5bWJvbCA9PT0gJysnKXsKICAvLyAgICAgLy8gICAgICAgICBmb3IobGV0IGk9MDsgaTxub25Vbmlmb3JtQ29sT2Jqcy5sZW5ndGg7IGkrKyl7CiAgLy8gICAgIC8vICAgICAgICAgICAgIGlmKG5vblVuaWZvcm1Db2xPYmpzW2ldLmFkZE1pblswXSA8IG5vblVuaWZvcm1Db2xPYmpzW2ldLmFkZE1heFswXSl7CiAgLy8gICAgIC8vICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKG5vblVuaWZvcm1Db2xPYmpzW2ldLnBvc2l0aW9uSW5mby5taW5YLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbaV0uYWRkTWluWzFdKSk7CiAgLy8gICAgIC8vICAgICAgICAgICAgICAgICBjdHgubGluZVRvKG5vblVuaWZvcm1Db2xPYmpzW2ldLnBvc2l0aW9uSW5mby5tYXhYLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbaV0uYWRkTWF4WzFdKSk7CiAgLy8gICAgIC8vICAgICAgICAgICAgICAgICAvLyBjdHgubW92ZVRvKG5vblVuaWZvcm1Db2xPYmpzW2ldLnBvc2l0aW9uSW5mby5taW5YLCB5U2NhbGUoaSoyKSk7CiAgLy8gICAgIC8vICAgICAgICAgICAgICAgICAvLyBjdHgubGluZVRvKG5vblVuaWZvcm1Db2xPYmpzW2ldLnBvc2l0aW9uSW5mby5tYXhYLCB5U2NhbGUoaSoyKSk7CiAgLy8gICAgIC8vICAgICAgICAgICAgIH0KICAvLyAgICAgLy8gICAgICAgICAgICAgZWxzZXsKICAvLyAgICAgLy8gICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8obm9uVW5pZm9ybUNvbE9ianNbaV0ucG9zaXRpb25JbmZvLm1pblgsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tpXS5hZGRNYXhbMV0pKTsKICAvLyAgICAgLy8gICAgICAgICAgICAgICAgIGN0eC5saW5lVG8obm9uVW5pZm9ybUNvbE9ianNbaV0ucG9zaXRpb25JbmZvLm1heFgsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tpXS5hZGRNaW5bMV0pKTsKICAvLyAgICAgLy8gICAgICAgICAgICAgfQogIC8vICAgICAvLyAgICAgICAgICAgICBpZiAoaSA8PSBub25Vbmlmb3JtQ29sT2Jqcy5sZW5ndGggLSAyICYmIG5vblVuaWZvcm1Db2xPYmpzW2ldLmVuZFYgIT09IHVuZGVmaW5lZCAmJiBub25Vbmlmb3JtQ29sT2Jqc1tpICsgMV0gIT09IHVuZGVmaW5lZCkgewogIC8vICAgICAvLyAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyhub25Vbmlmb3JtQ29sT2Jqc1tpXS5wb3NpdGlvbkluZm8uZW5kWCwgeVNjYWxlKG5vblVuaWZvcm1Db2xPYmpzW2ldLmVuZFYhKSk7CiAgLy8gICAgIC8vICAgICAgICAgICAgICAgICBjdHgubGluZVRvKG5vblVuaWZvcm1Db2xPYmpzW2kgKyAxXS5wb3NpdGlvbkluZm8uc3RhcnRYLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbaSArIDFdLnN0YXJ0ViEpKTsKICAvLyAgICAgLy8gICAgICAgICAgICAgfQogIC8vICAgICAvLyAgICAgICAgICAgICAvLyBjdHgubW92ZVRvKG5vblVuaWZvcm1Db2xPYmpzW2ldLnBvc2l0aW9uSW5mby5zdGFydFgsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tpXS5hZGRNaW4pKTsKICAvLyAgICAgLy8gICAgICAgICAgICAgLy8gY3R4LmxpbmVUbyhub25Vbmlmb3JtQ29sT2Jqc1tpKzFdLnBvc2l0aW9uSW5mby5zdGFydFgsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tpKzFdLmFkZE1pbikpOwogIC8vICAgICAvLyAgICAgICAgIH0KICAvLyAgICAgLy8gICAgIH0KICAvLyAgICAgLy8gICAgIGVsc2UgaWYodHJhbnNmb3JtX3N5bWJvbCA9PT0gJy0nKXsKICAvLyAgICAgLy8gICAgICAgICBmb3IobGV0IGk9MDsgaTxub25Vbmlmb3JtQ29sT2Jqcy5sZW5ndGg7IGkrKyl7CiAgLy8gICAgIC8vICAgICAgICAgICAgIGlmKG5vblVuaWZvcm1Db2xPYmpzW2ldLnN1Yk1pblswXSA8IG5vblVuaWZvcm1Db2xPYmpzW2ldLnN1Yk1heFswXSl7CiAgLy8gICAgIC8vICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKG5vblVuaWZvcm1Db2xPYmpzW2ldLnBvc2l0aW9uSW5mby5taW5YLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbaV0uc3ViTWluWzFdKSk7CiAgLy8gICAgIC8vICAgICAgICAgICAgICAgICBjdHgubGluZVRvKG5vblVuaWZvcm1Db2xPYmpzW2ldLnBvc2l0aW9uSW5mby5tYXhYLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbaV0uc3ViTWF4WzFdKSk7CiAgLy8gICAgIC8vICAgICAgICAgICAgIH0KICAvLyAgICAgLy8gICAgICAgICAgICAgZWxzZXsKICAvLyAgICAgLy8gICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8obm9uVW5pZm9ybUNvbE9ianNbaV0ucG9zaXRpb25JbmZvLm1pblgsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tpXS5zdWJNYXhbMV0pKTsKICAvLyAgICAgLy8gICAgICAgICAgICAgICAgIGN0eC5saW5lVG8obm9uVW5pZm9ybUNvbE9ianNbaV0ucG9zaXRpb25JbmZvLm1heFgsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tpXS5zdWJNaW5bMV0pKTsKICAvLyAgICAgLy8gICAgICAgICAgICAgfQogIC8vICAgICAvLyAgICAgICAgICAgICBpZiAoaSA8PSBub25Vbmlmb3JtQ29sT2Jqcy5sZW5ndGggLSAyICYmIG5vblVuaWZvcm1Db2xPYmpzW2ldLmVuZFYgIT09IHVuZGVmaW5lZCAmJiBub25Vbmlmb3JtQ29sT2Jqc1tpICsgMV0gIT09IHVuZGVmaW5lZCkgewogIC8vICAgICAvLyAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyhub25Vbmlmb3JtQ29sT2Jqc1tpXS5wb3NpdGlvbkluZm8uZW5kWCwgeVNjYWxlKG5vblVuaWZvcm1Db2xPYmpzW2ldLmVuZFYhKSk7CiAgLy8gICAgIC8vICAgICAgICAgICAgICAgICBjdHgubGluZVRvKG5vblVuaWZvcm1Db2xPYmpzW2kgKyAxXS5wb3NpdGlvbkluZm8uc3RhcnRYLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbaSArIDFdLnN0YXJ0ViEpKTsKICAvLyAgICAgLy8gICAgICAgICAgICAgfQogIC8vICAgICAvLyAgICAgICAgICAgICAvLyBjdHgubW92ZVRvKG5vblVuaWZvcm1Db2xPYmpzW2ldLnBvc2l0aW9uSW5mby5zdGFydFgsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tpXS5hZGRNaW4pKTsKICAvLyAgICAgLy8gICAgICAgICAgICAgLy8gY3R4LmxpbmVUbyhub25Vbmlmb3JtQ29sT2Jqc1tpKzFdLnBvc2l0aW9uSW5mby5zdGFydFgsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tpKzFdLmFkZE1pbikpOwogIC8vICAgICAvLyAgICAgICAgIH0KICAvLyAgICAgLy8gICAgIH0KICAvLyAgICAgLy8gICAgIGVsc2UgaWYodHJhbnNmb3JtX3N5bWJvbCA9PT0gJyonKXsKICAvLyAgICAgLy8gICAgICAgICBmb3IobGV0IGk9MDsgaTxub25Vbmlmb3JtQ29sT2Jqcy5sZW5ndGg7IGkrKyl7CiAgLy8gICAgIC8vICAgICAgICAgICAgIGlmKG5vblVuaWZvcm1Db2xPYmpzW2ldLm11bHRpTWluWzBdIDwgbm9uVW5pZm9ybUNvbE9ianNbaV0ubXVsdGlNYXhbMF0pewogIC8vICAgICAvLyAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyhub25Vbmlmb3JtQ29sT2Jqc1tpXS5wb3NpdGlvbkluZm8ubWluWCwgeVNjYWxlKG5vblVuaWZvcm1Db2xPYmpzW2ldLm11bHRpTWluWzFdKSk7CiAgLy8gICAgIC8vICAgICAgICAgICAgICAgICBjdHgubGluZVRvKG5vblVuaWZvcm1Db2xPYmpzW2ldLnBvc2l0aW9uSW5mby5tYXhYLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbaV0ubXVsdGlNYXhbMV0pKTsKICAvLyAgICAgLy8gICAgICAgICAgICAgfQogIC8vICAgICAvLyAgICAgICAgICAgICBlbHNlewogIC8vICAgICAvLyAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyhub25Vbmlmb3JtQ29sT2Jqc1tpXS5wb3NpdGlvbkluZm8ubWluWCwgeVNjYWxlKG5vblVuaWZvcm1Db2xPYmpzW2ldLm11bHRpTWF4WzFdKSk7CiAgLy8gICAgIC8vICAgICAgICAgICAgICAgICBjdHgubGluZVRvKG5vblVuaWZvcm1Db2xPYmpzW2ldLnBvc2l0aW9uSW5mby5tYXhYLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbaV0ubXVsdGlNaW5bMV0pKTsKICAvLyAgICAgLy8gICAgICAgICAgICAgfQogIC8vICAgICAvLyAgICAgICAgICAgICBpZiAoaSA8PSBub25Vbmlmb3JtQ29sT2Jqcy5sZW5ndGggLSAyICYmIG5vblVuaWZvcm1Db2xPYmpzW2ldLmVuZFYgIT09IHVuZGVmaW5lZCAmJiBub25Vbmlmb3JtQ29sT2Jqc1tpICsgMV0gIT09IHVuZGVmaW5lZCkgewogIC8vICAgICAvLyAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyhub25Vbmlmb3JtQ29sT2Jqc1tpXS5wb3NpdGlvbkluZm8uZW5kWCwgeVNjYWxlKG5vblVuaWZvcm1Db2xPYmpzW2ldLmVuZFYhKSk7CiAgLy8gICAgIC8vICAgICAgICAgICAgICAgICBjdHgubGluZVRvKG5vblVuaWZvcm1Db2xPYmpzW2kgKyAxXS5wb3NpdGlvbkluZm8uc3RhcnRYLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbaSArIDFdLnN0YXJ0ViEpKTsKICAvLyAgICAgLy8gICAgICAgICAgICAgfQogIC8vICAgICAvLyAgICAgICAgICAgICAvLyBjdHgubW92ZVRvKG5vblVuaWZvcm1Db2xPYmpzW2ldLnBvc2l0aW9uSW5mby5zdGFydFgsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tpXS5hZGRNaW4pKTsKICAvLyAgICAgLy8gICAgICAgICAgICAgLy8gY3R4LmxpbmVUbyhub25Vbmlmb3JtQ29sT2Jqc1tpKzFdLnBvc2l0aW9uSW5mby5zdGFydFgsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tpKzFdLmFkZE1pbikpOwogIC8vICAgICAvLyAgICAgICAgIH0KICAvLyAgICAgLy8gICAgIH0KICAvLyAgICAgLy8gICAgIGVsc2UgaWYodHJhbnNmb3JtX3N5bWJvbCA9PT0gJy8nKXsKICAvLyAgICAgLy8gICAgICAgICBmb3IobGV0IGk9MDsgaTxub25Vbmlmb3JtQ29sT2Jqcy5sZW5ndGg7IGkrKyl7CiAgLy8gICAgIC8vICAgICAgICAgICAgIGlmKG5vblVuaWZvcm1Db2xPYmpzW2ldLmRpdk1pblswXSA8IG5vblVuaWZvcm1Db2xPYmpzW2ldLmRpdk1heFswXSl7CiAgLy8gICAgIC8vICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKG5vblVuaWZvcm1Db2xPYmpzW2ldLnBvc2l0aW9uSW5mby5taW5YLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbaV0uZGl2TWluWzFdKSk7CiAgLy8gICAgIC8vICAgICAgICAgICAgICAgICBjdHgubGluZVRvKG5vblVuaWZvcm1Db2xPYmpzW2ldLnBvc2l0aW9uSW5mby5tYXhYLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbaV0uZGl2TWF4WzFdKSk7CiAgLy8gICAgIC8vICAgICAgICAgICAgIH0KICAvLyAgICAgLy8gICAgICAgICAgICAgZWxzZXsKICAvLyAgICAgLy8gICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8obm9uVW5pZm9ybUNvbE9ianNbaV0ucG9zaXRpb25JbmZvLm1pblgsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tpXS5kaXZNYXhbMV0pKTsKICAvLyAgICAgLy8gICAgICAgICAgICAgICAgIGN0eC5saW5lVG8obm9uVW5pZm9ybUNvbE9ianNbaV0ucG9zaXRpb25JbmZvLm1heFgsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tpXS5kaXZNaW5bMV0pKTsKICAvLyAgICAgLy8gICAgICAgICAgICAgfQogIC8vICAgICAvLyAgICAgICAgICAgICBpZiAoaSA8PSBub25Vbmlmb3JtQ29sT2Jqcy5sZW5ndGggLSAyICYmIG5vblVuaWZvcm1Db2xPYmpzW2ldLmVuZFYgIT09IHVuZGVmaW5lZCAmJiBub25Vbmlmb3JtQ29sT2Jqc1tpICsgMV0gIT09IHVuZGVmaW5lZCkgewogIC8vICAgICAvLyAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyhub25Vbmlmb3JtQ29sT2Jqc1tpXS5wb3NpdGlvbkluZm8uZW5kWCwgeVNjYWxlKG5vblVuaWZvcm1Db2xPYmpzW2ldLmVuZFYhKSk7CiAgLy8gICAgIC8vICAgICAgICAgICAgICAgICBjdHgubGluZVRvKG5vblVuaWZvcm1Db2xPYmpzW2kgKyAxXS5wb3NpdGlvbkluZm8uc3RhcnRYLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbaSArIDFdLnN0YXJ0ViEpKTsKICAvLyAgICAgLy8gICAgICAgICAgICAgfQogIC8vICAgICAvLyAgICAgICAgICAgICAvLyBjdHgubW92ZVRvKG5vblVuaWZvcm1Db2xPYmpzW2ldLnBvc2l0aW9uSW5mby5zdGFydFgsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tpXS5hZGRNaW4pKTsKICAvLyAgICAgLy8gICAgICAgICAgICAgLy8gY3R4LmxpbmVUbyhub25Vbmlmb3JtQ29sT2Jqc1tpKzFdLnBvc2l0aW9uSW5mby5zdGFydFgsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tpKzFdLmFkZE1pbikpOwogIC8vICAgICAvLyAgICAgICAgIH0KICAvLyAgICAgLy8gICAgIH0KICAvLyAgICAgLy8gICAgIGVsc2UgaWYodHJhbnNmb3JtX3N5bWJvbCA9PT0gJ2F2ZycpewogIC8vICAgICAvLyAgICAgICAgIGZvcihsZXQgaT0wOyBpPG5vblVuaWZvcm1Db2xPYmpzLmxlbmd0aC0xOyBpKyspewogIC8vICAgICAvLyAgICAgICAgICAgICBpZihub25Vbmlmb3JtQ29sT2Jqc1tpXS5hZGRNaW5bMF0gPCBub25Vbmlmb3JtQ29sT2Jqc1tpXS5hZGRNYXhbMF0pewogIC8vICAgICAvLyAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyhub25Vbmlmb3JtQ29sT2Jqc1tpXS5wb3NpdGlvbkluZm8ubWluWCwgeVNjYWxlKG5vblVuaWZvcm1Db2xPYmpzW2ldLmFkZE1pblsxXS9sZW5PZkxpbmVzISkpOwogIC8vICAgICAvLyAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbyhub25Vbmlmb3JtQ29sT2Jqc1tpXS5wb3NpdGlvbkluZm8ubWF4WCwgeVNjYWxlKG5vblVuaWZvcm1Db2xPYmpzW2ldLmFkZE1heFsxXS9sZW5PZkxpbmVzISkpOwogIC8vICAgICAvLyAgICAgICAgICAgICB9CiAgLy8gICAgIC8vICAgICAgICAgICAgIGVsc2V7CiAgLy8gICAgIC8vICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKG5vblVuaWZvcm1Db2xPYmpzW2ldLnBvc2l0aW9uSW5mby5taW5YLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbaV0uYWRkTWF4WzFdL2xlbk9mTGluZXMhKSk7CiAgLy8gICAgIC8vICAgICAgICAgICAgICAgICBjdHgubGluZVRvKG5vblVuaWZvcm1Db2xPYmpzW2ldLnBvc2l0aW9uSW5mby5tYXhYLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbaV0uYWRkTWluWzFdL2xlbk9mTGluZXMhKSk7CiAgLy8gICAgIC8vICAgICAgICAgICAgIH0KICAvLyAgICAgLy8gICAgICAgICAgICAgLy8gY3R4Lm1vdmVUbyhub25Vbmlmb3JtQ29sT2Jqc1tpXS5wb3NpdGlvbkluZm8uc3RhcnRYLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbaV0uYXZlcmFnZSkpOwogIC8vICAgICAvLyAgICAgICAgICAgICAvLyBjdHgubGluZVRvKG5vblVuaWZvcm1Db2xPYmpzW2krMV0ucG9zaXRpb25JbmZvLnN0YXJ0WCwgeVNjYWxlKG5vblVuaWZvcm1Db2xPYmpzW2krMV0uYXZlcmFnZSkpOyAKICAvLyAgICAgLy8gICAgICAgICAgICAgaWYgKGkgPD0gbm9uVW5pZm9ybUNvbE9ianMubGVuZ3RoIC0gMiAmJiBub25Vbmlmb3JtQ29sT2Jqc1tpXS5lbmRWICE9PSB1bmRlZmluZWQgJiYgbm9uVW5pZm9ybUNvbE9ianNbaSArIDFdICE9PSB1bmRlZmluZWQpIHsKICAvLyAgICAgLy8gICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8obm9uVW5pZm9ybUNvbE9ianNbaV0ucG9zaXRpb25JbmZvLmVuZFgsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tpXS5lbmRWISkpOwogIC8vICAgICAvLyAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbyhub25Vbmlmb3JtQ29sT2Jqc1tpICsgMV0ucG9zaXRpb25JbmZvLnN0YXJ0WCwgeVNjYWxlKG5vblVuaWZvcm1Db2xPYmpzW2kgKyAxXS5zdGFydFYhKSk7CiAgLy8gICAgIC8vICAgICAgICAgICAgIH0KICAvLyAgICAgLy8gICAgICAgICB9CiAgLy8gICAgIC8vICAgICB9CiAgLy8gICAgIC8vICAgICBjdHguc3Ryb2tlKCk7CiAgLy8gICAgIC8vICAgICAvLyBzYXZlUE5HKGNhbnZhcyk7CiAgLy8gICAgIC8vIH0gZWxzZSB7CiAgLy8gICAgIC8vICAgICBjb25zb2xlLmxvZygiZXJyb3IiKQogIC8vICAgICAvLyB9CiAgLy8gfQogIC8vIGRyYXcoIWxpbmVDaGFydE9iai5pc1BvdyA/IGxpbmVDaGFydE9iai5ub25Vbmlmb3JtQ29sT2JqcyA6IHVuZGVmaW5lZCk7CiAgLy9AdHMtaWdub3JlCiAgYXN5bmMgZnVuY3Rpb24gYnJ1c2hlZCh7CiAgICBzZWxlY3Rpb24KICB9KSB7CiAgICBpZiAoIWlzSW5pdCkgewogICAgICBpc0luaXQgPSB0cnVlOwogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAoaXNSZXNpemluZykgewogICAgICBpc1JlYmFja2luZyA9IGZhbHNlOwogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAoaXNSZWJhY2tpbmcpIHsKICAgICAgaXNSZWJhY2tpbmcgPSBmYWxzZTsKICAgICAgcmV0dXJuOwogICAgfQogICAgY29uc3QgdGltZVJhbmdlID0gW01hdGguZmxvb3IoeFJlU2NhbGUoc2VsZWN0aW9uWzBdKSksIE1hdGguZmxvb3IoeFJlU2NhbGUoc2VsZWN0aW9uWzFdKSldOwogICAgaWYgKHRpbWVSYW5nZVswXSA8IDApIHsKICAgICAgdGltZVJhbmdlWzBdID0gMDsKICAgIH0KICAgIGlmICh0aW1lUmFuZ2VbMV0gPiByb3dOdW1iZXIpIHsKICAgICAgdGltZVJhbmdlWzFdID0gcm93TnVtYmVyOwogICAgfQogICAgY29uc3QgaW50ZXJJbmZvID0gbmV3IEludGVyYWN0aW9uSW5mbygiem9vbSIpOwogICAgbGluZUNoYXJ0T2JqLnRpbWVSYW5nZVswXSA9IHRpbWVSYW5nZVswXTsKICAgIGxpbmVDaGFydE9iai50aW1lUmFuZ2VbMV0gPSB0aW1lUmFuZ2VbMV07CiAgICBpbnRlckluZm8uc2V0UmFuZ2VXKGxpbmVDaGFydE9iai50aW1lUmFuZ2UsIGxpbmVDaGFydE9iai53aWR0aCwgbGluZUNoYXJ0T2JqLmN1cnJlbnRMZXZlbCk7CiAgICBpbnRlcmFjdGlvblN0YWNrLnB1c2goaW50ZXJJbmZvKTsKICAgIGNvbnNvbGUubG9nKCJicnVzaC4uLi4iKTsKICAgIGxldCBtb2RlID0gImNvbXB1dGUiOwogICAgbGV0IHR5cGUgPSAiIjsKICAgIGxldCBwYXJhbGxlbCA9IDA7CiAgICBsZXQgZXJyb3JCb3VuZCA9IDA7CiAgICBjb25zdCBjb21iaW5lZFVybCA9IGAvbGluZV9jaGFydC9jYXNlMT90YWJsZV9uYW1lPSR7bGluZTFbMF19JnRhYmxlX25hbWVfb3RoZXJzPSR7bGluZTFbMV19JnN5bWJvbD0ke2xpbmUxWzJdfSZtb2RlPSR7bW9kZX0md2lkdGg9JHtsaW5lQ2hhcnRPYmoud2lkdGh9JmhlaWdodD0ke2xpbmVDaGFydE9iai5oZWlnaHR9JnN0YXJ0VGltZT0ke2xpbmVDaGFydE9iai50aW1lUmFuZ2VbMF19JmVuZFRpbWU9JHtsaW5lQ2hhcnRPYmoudGltZVJhbmdlWzFdfSZpbnRlcmFjdF90eXBlPSR7dHlwZX0mZXhwZXJpbWVudD0ke2xpbmUxWzNdfSZwYXJhbGxlbD0ke3BhcmFsbGVsfSZlcnJvckJvdW5kPSR7ZXJyb3JCb3VuZH1gOwogICAgY29uc3Qgc2hvd0NvbHVtbnMgPSBhd2FpdCBnZXQoY29tYmluZWRVcmwpOwogICAgZHJhdyhzaG93Q29sdW1uc1snTTRfYXJyYXknXSk7CiAgfQogIGFzeW5jIGZ1bmN0aW9uIHJlc2l6ZVcod2lkdGgpIHsKICAgIGlzUmVzaXppbmcgPSB0cnVlOwogICAgY29uc3QgY3VycmVudExldmVsID0gbGluZUNoYXJ0T2JqLmN1cnJlbnRMZXZlbDsKICAgIGxpbmVDaGFydE9iai53aWR0aCA9IHdpZHRoOwogICAgdXBkYXRlQ2FudmFzV2lkdGgoKTsKICAgIC8vQHRzLWlnbm9yZQogICAgY2FudmFzLnN0eWxlLndpZHRoID0gbGluZUNoYXJ0T2JqLndpZHRoOwogICAgY29uc29sZS5sb2coInJlc2l6ZS4uLi4iKTsKICAgIGxldCBtb2RlID0gImNvbXB1dGUiOwogICAgbGV0IHR5cGUgPSAiIjsKICAgIGxldCBwYXJhbGxlbCA9IDA7CiAgICBsZXQgZXJyb3JCb3VuZCA9IDA7CiAgICBjb25zdCBjb21iaW5lZFVybCA9IGAvbGluZV9jaGFydC9jYXNlMT90YWJsZV9uYW1lPSR7bGluZTFbMF19JnRhYmxlX25hbWVfb3RoZXJzPSR7bGluZTFbMV19JnN5bWJvbD0ke2xpbmUxWzJdfSZtb2RlPSR7bW9kZX0md2lkdGg9JHtsaW5lQ2hhcnRPYmoud2lkdGh9JmhlaWdodD0ke2xpbmVDaGFydE9iai5oZWlnaHR9JnN0YXJ0VGltZT0ke2xpbmVDaGFydE9iai50aW1lUmFuZ2VbMF19JmVuZFRpbWU9JHtsaW5lQ2hhcnRPYmoudGltZVJhbmdlWzFdfSZpbnRlcmFjdF90eXBlPSR7dHlwZX0mZXhwZXJpbWVudD0ke2xpbmUxWzNdfSZwYXJhbGxlbD0ke3BhcmFsbGVsfSZlcnJvckJvdW5kPSR7ZXJyb3JCb3VuZH1gOwogICAgY29uc3Qgc2hvd0NvbHVtbnMgPSBhd2FpdCBnZXQoY29tYmluZWRVcmwpOwogICAgZHJhdyhzaG93Q29sdW1uc1snTTRfYXJyYXknXSk7CiAgfQogIGxldCBpc01vdXNlb3ZlciA9IGZhbHNlOwogIGxldCBzdGFydE9mZnNldFggPSAwOwogIGNvbnN0IGRyYWdSZWN0ID0gc3ZnLmFwcGVuZCgicmVjdCIpLmF0dHIoIngiLCAwKS5hdHRyKCJ5IiwgMCkuYXR0cigiaGVpZ2h0IiwgbGluZUNoYXJ0T2JqLmhlaWdodCArIHBhZGluZy50b3AgKyBwYWRpbmcuYm90dG9tKS5hdHRyKCJ3aWR0aCIsIGxpbmVDaGFydE9iai53aWR0aCArIHBhZGluZy5sZWZ0ICsgcGFkaW5nLnJpZ2h0KS5hdHRyKCJzdHJva2UiLCAiYmxhY2siKS5hdHRyKCJzdHJva2Utd2lkdGgiLCA0KS5hdHRyKCJmaWxsIiwgIm5vbmUiKS5vbigibW91c2VvdmVyIiwgKCkgPT4gewogICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSAnZXctcmVzaXplJzsKICAgIGlzTW91c2VvdmVyID0gdHJ1ZTsKICB9KS5vbigibW91c2Vkb3duIiwgZSA9PiB7CiAgICBpZiAoaXNNb3VzZW92ZXIpIHsKICAgICAgc3RhcnRPZmZzZXRYID0gZS5vZmZzZXRYOwogICAgICBpbnRlcmFjdGl2ZUluZm8uaXNNb3VzZURvd24gPSB0cnVlOwogICAgfQogIH0pLm9uKCJtb3VzZXVwIiwgKCkgPT4gewogICAgY29uc29sZS5sb2coKTsKICB9KS5vbigibW91c2Vtb3ZlIiwgZSA9PiB7CiAgICBpZiAoaW50ZXJhY3RpdmVJbmZvLmlzTW91c2VEb3duKSB7CiAgICAgIHN2Zy5hdHRyKCJ3aWR0aCIsIGxpbmVDaGFydE9iai53aWR0aCArIHBhZGluZy5yaWdodCArIHBhZGluZy5sZWZ0ICsgKGUub2Zmc2V0WCAtIHN0YXJ0T2Zmc2V0WCkpOwogICAgICBkcmFnUmVjdC5hdHRyKCJ3aWR0aCIsIGxpbmVDaGFydE9iai53aWR0aCArIHBhZGluZy5yaWdodCArIHBhZGluZy5sZWZ0ICsgKGUub2Zmc2V0WCAtIHN0YXJ0T2Zmc2V0WCkpOwogICAgfQogIH0pLm9uKCJtb3VzZWxlYXZlIiwgKCkgPT4gewogICAgaWYgKCFpbnRlcmFjdGl2ZUluZm8uaXNNb3VzZURvd24pIHsKICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCc7CiAgICB9CiAgfSk7CiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNvbnRlbnQtY29udGFpbmVyIikuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIiwgZSA9PiB7CiAgICBpZiAoaW50ZXJhY3RpdmVJbmZvLmlzTW91c2VEb3duKSB7CiAgICAgIHN2Zy5hdHRyKCJ3aWR0aCIsIGxpbmVDaGFydE9iai53aWR0aCArIHBhZGluZy5yaWdodCArIHBhZGluZy5sZWZ0ICsgKGUub2Zmc2V0WCAtIHN0YXJ0T2Zmc2V0WCkpOwogICAgICBkcmFnUmVjdC5hdHRyKCJ3aWR0aCIsIGxpbmVDaGFydE9iai53aWR0aCArIHBhZGluZy5yaWdodCArIHBhZGluZy5sZWZ0ICsgKGUub2Zmc2V0WCAtIHN0YXJ0T2Zmc2V0WCkpOwogICAgfQogIH0pOwogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjb250ZW50LWNvbnRhaW5lciIpLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLCBlID0+IHsKICAgIGlmIChpbnRlcmFjdGl2ZUluZm8uaXNNb3VzZURvd24pIHsKICAgICAgaW50ZXJhY3RpdmVJbmZvLmlzTW91c2VEb3duID0gZmFsc2U7CiAgICAgIGlzTW91c2VvdmVyID0gZmFsc2U7CiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gJ2RlZmF1bHQnOwogICAgICBsZXQgcHJlV2lkdGggPSBsaW5lQ2hhcnRPYmoud2lkdGg7CiAgICAgIGxpbmVDaGFydE9iai53aWR0aCA9IGxpbmVDaGFydE9iai53aWR0aCArIChlLm9mZnNldFggLSBzdGFydE9mZnNldFgpOwogICAgICBpZiAobGluZUNoYXJ0T2JqLndpZHRoID09PSBwcmVXaWR0aCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCBpbnRlckluZm8gPSBuZXcgSW50ZXJhY3Rpb25JbmZvKCJyZXNpemUiKTsKICAgICAgaW50ZXJJbmZvLnNldFJhbmdlVyhsaW5lQ2hhcnRPYmoudGltZVJhbmdlLCBsaW5lQ2hhcnRPYmoud2lkdGgsIGxpbmVDaGFydE9iai5jdXJyZW50TGV2ZWwpOwogICAgICBpbnRlcmFjdGlvblN0YWNrLnB1c2goaW50ZXJJbmZvKTsKICAgICAgcmVzaXplVyhsaW5lQ2hhcnRPYmoud2lkdGgpOwogICAgfQogIH0pOwogIHJldHVybiBkcmF3Owp9CmZ1bmN0aW9uIGNvbXB1dGVNaW5NYXgoY29sdW1JbmZvKSB7CiAgbGV0IG1pbiA9IEluZmluaXR5OwogIGxldCBtYXggPSAtSW5maW5pdHk7CiAgZm9yIChsZXQgaiA9IDA7IGogPCBjb2x1bUluZm8ubGVuZ3RoOyBqKyspIHsKICAgIGlmIChjb2x1bUluZm9bal0udlJhbmdlWzBdIDwgbWluKSB7CiAgICAgIG1pbiA9IGNvbHVtSW5mb1tqXS52UmFuZ2VbMF07CiAgICB9CiAgICBpZiAoY29sdW1JbmZvW2pdLnZSYW5nZVsxXSA+IG1heCkgewogICAgICBtYXggPSBjb2x1bUluZm9bal0udlJhbmdlWzFdOwogICAgfQogIH0KICByZXR1cm4gewogICAgbWluLAogICAgbWF4CiAgfTsKfQpmdW5jdGlvbiBzYXZlUE5HKGNhbnZhcykgewogIGNvbnN0IGltZ1VSTCA9IGNhbnZhcy50b0RhdGFVUkwoIi4vaW1hZ2UvcG5nIik7CiAgY29uc3QgZGxMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogIGRsTGluay5kb3dubG9hZCA9IGAxYl96b29tX2luaXRgOwogIGRsTGluay5ocmVmID0gaW1nVVJMOwogIGRsTGluay5kYXRhc2V0LmRvd25sb2FkdXJsID0gWyIuL2ltYWdlL3BuZyIsIGRsTGluay5kb3dubG9hZCwgZGxMaW5rLmhyZWZdLmpvaW4oIjoiKTsKICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRsTGluayk7CiAgZGxMaW5rLmNsaWNrKCk7CiAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChkbExpbmspOwp9"},{"version":3,"names":["d3","axios","InteractionInfo","constructor","type","showInfo","timeRange","width","level","setShowInfo","setRangeW","interactionStack","get","url","data","drawViewChangeLineChart","lineChartObj","line1","_document$getElementB","realTimeStampRange","nodeIndexRange","rowNumber","isInit","isResizing","isRebacking","interactiveInfo","startX","startY","offsetX","offsetY","isMouseDown","isMove","pading","top","bottom","left","right","svg","select","append","attr","height","x","y","style","foreignId","Math","random","foreigG","foreignObj","canvas","document","createElement","__data__","getElementById","appendChild","ctx","getContext","indexToTimeStampScale","scaleLinear","domain","range","xScale","showTimeXScale","yScale","xReScale","showXTimeScale","zoomAxis","axisBottom","yAxis","axisLeft","xAxis","timeBrushObj","brushX","extent","on","brushed","console","log","timeBoxG","call","move","zoomAxisG","xAxisG","yAxisG","updateCanvasWidth","scaleTime","Date","floor","remove","draw","nonUniformColObjs","minV","maxV","undefined","_document$getElementB2","clearRect","beginPath","strokeStyle","interval","end_time","start_time","i","length","moveTo","st_v","lineTo","min","max","et_v","stroke","selection","interInfo","currentLevel","push","mode","parallel","errorBound","combinedUrl","showColumns","resizeW","isMouseover","startOffsetX","dragRect","body","cursor","e","addEventListener","preWidth","computeMinMax","columInfo","Infinity","j","vRange","savePNG","imgURL","toDataURL","dlLink","download","href","dataset","downloadurl","join","click","removeChild"],"sources":["/Users/apple/Desktop/om3-extend/om3-client/node_modules/eslint-loader/index.js??ref--14-0!/Users/apple/Desktop/om3-extend/om3-client/src/application/line-interaction.ts"],"sourcesContent":["\n\nimport  NoUniformColObj  from \"@/model/non-uniform-col-obj\";\nimport store, { GlobalState, ViewChangeLineChartObj } from \"@/store\";\nimport * as d3 from 'd3';\nimport { Commit, ActionContext, ActionHandler } from 'vuex'\nimport axios from \"axios\";\nimport { formatRenderDataForViewChange, formatNonPowDataForViewChange } from '../helper/format-data';\nclass InteractionInfo {\n    type: string\n    showInfo: Array<boolean>\n    timeRange: Array<number>\n    width: number\n    level: number\n    constructor(type: string) {\n        this.type = type;\n        this.showInfo = [];\n        this.timeRange = [];\n        this.width = 0;\n        this.level = 0;\n    }\n    setShowInfo(showInfo: Array<boolean>) {\n        this.showInfo = showInfo;\n    }\n    setRangeW(timeRange: Array<number>, width: number, level: number) {\n        this.timeRange = [timeRange[0], timeRange[1]];\n        this.width = width;\n        this.level = level;\n    }\n\n}\nlet interactionStack: Array<InteractionInfo> = [];\n\nasync function get(url: string) {\n    url = 'postgres' + url;\n    //const loading = openLoading();\n    const { data } = await axios.get(url);\n    //loading.close();\n    return data;\n}\n\nexport function drawViewChangeLineChart(lineChartObj: ViewChangeLineChartObj, line1:any) {\n    let realTimeStampRange: Array<number> = [];\n    let nodeIndexRange: Array<number> = []\n    let rowNumber = 65536;/////////////修改前131072\n    // realTimeStampRange = [lineChartObj.startTime,lineChartObj.endTime];\n    realTimeStampRange = [0, rowNumber];\n    nodeIndexRange = [lineChartObj.timeRange[0],lineChartObj.timeRange[1]];\n    \n    let isInit = false;\n    let isResizing = false;\n    let isRebacking = false;\n    let interactiveInfo = {\n        startX: 0,\n        startY: 0,\n        offsetX: 0,\n        offsetY: 0,\n        isMouseDown: false,\n        isMove: false,\n    };\n    const pading = { top: 20, bottom: 80, left: 60, right: 20 };\n    const svg = d3.select(\"#content-container\").append(\"svg\");\n    svg\n        .attr(\"width\", lineChartObj.width + pading.left + pading.right)\n        .attr(\"height\", lineChartObj.height + pading.top + pading.bottom)\n        .attr(\"transform\", `translate(${lineChartObj.x},${lineChartObj.y})`)\n        .style(\"background-color\", \"#fff\");\n    const foreignId = `foreign${lineChartObj.width + Math.random()}`;\n    const foreigG = svg.append(\"g\").attr(\"transfrom\", `translate(${pading.left},${pading.top})`)\n    let foreignObj: any = foreigG.append(\"foreignObject\").attr(\"id\", foreignId).attr(\"x\", pading.left).attr(\"y\", pading.top).attr('width', lineChartObj.width).attr('height', lineChartObj.height);\n    const canvas = document.createElement(\"canvas\");\n    (canvas as any).__data__ = {}\n    document.getElementById(foreignId)?.appendChild(canvas);\n    canvas.width = lineChartObj.width;\n    canvas.height = lineChartObj.height;\n    let ctx = canvas.getContext(\"2d\");\n\n    const indexToTimeStampScale = d3.scaleLinear().domain([nodeIndexRange[0], nodeIndexRange[1]]).range([realTimeStampRange[0], realTimeStampRange[1]]);\n    const xScale: any = d3.scaleLinear().domain([0, lineChartObj.width]).range([0, lineChartObj.width]);\n    // let showTimeXScale: any = d3.scaleTime().domain([new Date(realTimeStampRange[0]), new Date(realTimeStampRange[1])]).range([0, lineChartObj.width]);\n    let showTimeXScale: any = d3.scaleLinear().domain([0, rowNumber]).range([0, lineChartObj.width]);\n    let yScale: any = d3.scaleLinear().domain([-1000, 1000]).range([lineChartObj.height, 0]);\n    let xReScale = d3.scaleLinear().domain([0, lineChartObj.width]).range([0, rowNumber - 1]);\n    // let showXTimeScale: any = d3.scaleTime().domain([0,65536]).range([0, lineChartObj.width]);\n    let showXTimeScale: any = d3.scaleLinear().domain([0,rowNumber]).range([0, lineChartObj.width]);\n\n    let zoomAxis = d3.axisBottom(showTimeXScale);\n    let yAxis = d3.axisLeft(yScale)\n    let xAxis = d3.axisBottom(showXTimeScale)\n    const timeBrushObj = d3.brushX().extent([[0, 10], [lineChartObj.width, 40]]);\n\n    timeBrushObj.on(\"end\", brushed);\n    timeBrushObj.on(\"start\", () => {\n        console.log(\"start\")\n    })\n    const timeBoxG = svg.append(\"g\").attr(\"transform\", `translate(${pading.left},${pading.top + 50 + lineChartObj.height - 20})`).call(timeBrushObj).call(timeBrushObj.move, [0, lineChartObj.width]);\n    let zoomAxisG = svg.append(\"g\").attr('style', 'user-select:none').attr(\"transform\", `translate(${pading.left},${lineChartObj.height + pading.top + 50})`).attr(\"class\", 'x axis').call(zoomAxis)\n    let xAxisG = svg.append(\"g\").attr('style', 'user-select:none').attr(\"transform\", `translate(${pading.left},${lineChartObj.height + pading.top})`).attr(\"class\", 'x axis').call(xAxis)\n    let yAxisG = svg.append(\"g\").attr('style', 'user-select:none').attr(\"transform\", `translate(${pading.left},${pading.top})`).attr(\"class\", 'y axis').call(yAxis);\n\n\n    function updateCanvasWidth() {\n        //@ts-ignore\n        canvas.style.width = lineChartObj.width;\n        svg\n            .attr(\"width\", lineChartObj.width + pading.left + pading.right)\n            .attr(\"height\", lineChartObj.height + pading.top + pading.bottom)\n        foreignObj.attr(\"width\", lineChartObj.width);\n        xScale.domain([0, lineChartObj.width]).range([0, lineChartObj.width]);\n        // showTimeXScale.domain([new Date(realTimeStampRange[0]), new Date(realTimeStampRange[1])]).range([0, lineChartObj.width]);\n        showXTimeScale = d3.scaleTime().domain([new Date(Math.floor(indexToTimeStampScale(0))), new Date(Math.floor(indexToTimeStampScale(rowNumber)))]).range([0, lineChartObj.width]);\n\n        //showTimeXScale.range([0, lineChartObj.width]);\n        if (zoomAxisG != null) {\n            zoomAxisG.remove();\n            zoomAxisG = svg.append(\"g\").attr('style', 'user-select:none').attr(\"transform\", `translate(${pading.left},${lineChartObj.height + pading.top + 50})`).attr(\"class\", 'x axis').call(zoomAxis)\n        }\n        timeBrushObj.extent([[0, 10], [lineChartObj.width, 40]]);\n        timeBrushObj.on(\"end\", brushed);\n        timeBrushObj.on(\"start\", () => {\n            console.log(\"start\")\n        })\n        // const tempReScale=d3.scaleLinear().domain([0, lineChartObj.dataManager.realDataRowNum - 1]).range([0,lineChartObj.width]);\n\n        // timeBoxG.call(timeBrushObj).call(timeBrushObj.move, [tempReScale(lineChartObj.timeRange[0]), tempReScale(lineChartObj.timeRange[1])]);\n        ctx = canvas.getContext(\"2d\");\n    }\n\n    function draw(nonUniformColObjs?: any) {\n        canvas.width = lineChartObj.width;\n        // yScale = d3.scaleLinear().domain([lineChartObj.data.minv, lineChartObj.data.maxv]).range([lineChartObj.height, 0]);\n        yScale = d3.scaleLinear().domain([lineChartObj.minV, lineChartObj.maxV]).range([lineChartObj.height, 0]);\n        // yScale = d3.scaleLinear().domain([-finalValue, finalValue]).range([lineChartObj.height, 0]);\n        yAxis = d3.axisLeft(yScale)\n        if (yAxisG !== null && yAxisG !== undefined) {\n            yAxisG.remove();\n        }\n        yAxisG = svg.append(\"g\").attr('style', 'user-select:none').attr(\"transform\", `translate(${pading.left},${pading.top})`).attr(\"class\", 'y axis').call(yAxis);\n\n        // showXTimeScale = d3.scaleTime().domain([new Date(Math.floor(indexToTimeStampScale(lineChartObj.timeRange[0]))), new Date(Math.floor(indexToTimeStampScale(lineChartObj.timeRange[1])))]).range([0, lineChartObj.width]);\n        showXTimeScale = d3.scaleLinear().domain([0, rowNumber]).range([0, lineChartObj.width]);\n        xAxis = d3.axisBottom(showXTimeScale);\n        if (xAxisG !== null && xAxisG !== undefined) {\n            xAxisG.remove();\n        }\n        xAxisG = svg.append(\"g\").attr('style', 'user-select:none').attr(\"transform\", `translate(${pading.left},${lineChartObj.height + pading.top})`).attr(\"class\", 'x axis').call(xAxis)\n\n        if (foreignObj == null && nonUniformColObjs) {\n            foreignObj = svg.append(\"foreignObject\")\n                .attr(\"id\", \"foreign\")\n                .attr('x', pading.left)\n                .attr('y', pading.top)\n                .attr('width', lineChartObj.width)\n                .attr('height', lineChartObj.height);\n            const canvas = document.createElement(\"canvas\");\n            document.getElementById(\"foreign\")?.appendChild(canvas);\n            canvas.width = lineChartObj.width;\n            canvas.height = lineChartObj.height;\n            ctx = canvas.getContext(\"2d\");\n        }\n\n        nonUniformColObjs = nonUniformColObjs[0];\n        if (nonUniformColObjs && ctx) {\n            ctx.clearRect(0, 0, lineChartObj.width, lineChartObj.height);\n            ctx.beginPath();\n            ctx.strokeStyle = \"steelblue\"\n            let interval = (nonUniformColObjs[0].end_time - nonUniformColObjs[0].start_time)/3;\n            for (let i = 0; i < nonUniformColObjs.length; i++) {\n                ctx.moveTo(showXTimeScale(nonUniformColObjs[i].start_time), yScale(nonUniformColObjs[i].st_v));\n                ctx.lineTo(showXTimeScale(nonUniformColObjs[i].start_time + interval*2), yScale(nonUniformColObjs[i].min));\n                ctx.moveTo(showXTimeScale(nonUniformColObjs[i].start_time + interval*2), yScale(nonUniformColObjs[i].min));\n                ctx.lineTo(showXTimeScale(nonUniformColObjs[i].start_time + interval*3), yScale(nonUniformColObjs[i].max));\n                ctx.moveTo(showXTimeScale(nonUniformColObjs[i].start_time + interval*3), yScale(nonUniformColObjs[i].max));\n                ctx.lineTo(showXTimeScale(nonUniformColObjs[i].end_time), yScale(nonUniformColObjs[i].et_v));\n                if (i <= nonUniformColObjs.length - 2) {\n                    ctx.moveTo(showXTimeScale(nonUniformColObjs[i].end_time), yScale(nonUniformColObjs[i].et_v));\n                    ctx.lineTo(showXTimeScale(nonUniformColObjs[i + 1].start_time), yScale(nonUniformColObjs[i + 1].st_v));\n                }\n            }\n            ctx.stroke();\n        } else {\n            console.log(\"error\")\n        }\n\n    }\n\n    // function draw(nonUniformColObjs?: Array<NoUniformColObj>, finalValue?:any, transform_symbol?:string, lenOfLines?:number) {\n    //     canvas.width = lineChartObj.width;\n    //     // yScale = d3.scaleLinear().domain([lineChartObj.data.minv, lineChartObj.data.maxv]).range([lineChartObj.height, 0]);\n    //     yScale = d3.scaleLinear().domain([-2000, 2000]).range([lineChartObj.height, 0]);\n    //     // yScale = d3.scaleLinear().domain([-finalValue, finalValue]).range([lineChartObj.height, 0]);\n    //     yAxis = d3.axisLeft(yScale)\n    //     if (yAxisG !== null && yAxisG !== undefined) {\n    //         yAxisG.remove();\n    //     }\n    //     yAxisG = svg.append(\"g\").attr('style', 'user-select:none').attr(\"transform\", `translate(${pading.left},${pading.top})`).attr(\"class\", 'y axis').call(yAxis);\n\n    //     showXTimeScale = d3.scaleTime().domain([new Date(Math.floor(indexToTimeStampScale(lineChartObj.timeRange[0]))), new Date(Math.floor(indexToTimeStampScale(lineChartObj.timeRange[1])))]).range([0, lineChartObj.width]);\n    //     xAxis = d3.axisBottom(showXTimeScale);\n    //     if (xAxisG !== null && xAxisG !== undefined) {\n    //         xAxisG.remove();\n    //     }\n    //     xAxisG = svg.append(\"g\").attr('style', 'user-select:none').attr(\"transform\", `translate(${pading.left},${lineChartObj.height + pading.top})`).attr(\"class\", 'x axis').call(xAxis)\n\n    //     if (foreignObj == null && nonUniformColObjs) {\n    //         foreignObj = svg.append(\"foreignObject\")\n    //             .attr(\"id\", \"foreign\")\n    //             .attr('x', pading.left)\n    //             .attr('y', pading.top)\n    //             .attr('width', lineChartObj.width)\n    //             .attr('height', lineChartObj.height);\n    //         const canvas = document.createElement(\"canvas\");\n    //         document.getElementById(\"foreign\")?.appendChild(canvas);\n    //         canvas.width = lineChartObj.width;\n    //         canvas.height = lineChartObj.height;\n    //         ctx = canvas.getContext(\"2d\");\n    //     }\n\n    //     if (nonUniformColObjs && ctx) {\n    //         formatNonPowDataForViewChange(nonUniformColObjs,lineChartObj.width,lineChartObj.maxLen,null)\n    //         // console.log(nonUniformColObjs);\n    //         ctx.clearRect(0, 0, lineChartObj.width, lineChartObj.height);\n    //         ctx.beginPath();\n    //         ctx.strokeStyle = \"steelblue\"\n            \n    //         for (let i = 0; i < nonUniformColObjs.length; i++) {\n    //             if (nonUniformColObjs[i].isMis) {\n    //                 continue\n    //             }\n    //             if (nonUniformColObjs[i].minVTimeRange[0] < nonUniformColObjs[i].maxVTimeRange[0]) {\n    //                 ctx.moveTo(nonUniformColObjs[i].positionInfo.minX, yScale(nonUniformColObjs[i].vRange[0]));\n    //                 ctx.lineTo(nonUniformColObjs[i].positionInfo.maxX, yScale(nonUniformColObjs[i].vRange[1]));\n    //             } else {\n    //                 ctx.moveTo(nonUniformColObjs[i].positionInfo.minX, yScale(nonUniformColObjs[i].vRange[1]));\n    //                 ctx.lineTo(nonUniformColObjs[i].positionInfo.maxX, yScale(nonUniformColObjs[i].vRange[0]));\n    //             }\n    //             if (i <= nonUniformColObjs.length - 2 && nonUniformColObjs[i].endV !== undefined && nonUniformColObjs[i + 1] !== undefined) {\n    //                 ctx.moveTo(nonUniformColObjs[i].positionInfo.endX, yScale(nonUniformColObjs[i].endV!));\n    //                 ctx.lineTo(nonUniformColObjs[i + 1].positionInfo.startX, yScale(nonUniformColObjs[i + 1].startV!));\n    //             }\n    //         }\n\n    //         const stack = [];\n    //         for (let i = 0; i < nonUniformColObjs.length - 1; i++) {\n    //             if (!nonUniformColObjs[i].isMis && nonUniformColObjs[i + 1].isMis) {\n    //                 stack.push(nonUniformColObjs[i]);\n    //                 for (let j = i + 1; j < nonUniformColObjs.length; j++) {\n    //                     if (nonUniformColObjs[j - 1].isMis && !nonUniformColObjs[j].isMis) {\n    //                         const co = stack.pop()\n    //                         if (nonUniformColObjs[j].startV === undefined || co?.endV === undefined) {\n    //                             console.error(\"error nonUniform\");\n    //                         }\n    //                         ctx.moveTo(co!.positionInfo.endX, yScale(co!.endV));\n    //                         if (nonUniformColObjs[j].startV !== undefined) {\n    //                             ctx.lineTo(nonUniformColObjs[j].positionInfo.startX, yScale(nonUniformColObjs[j].startV!))\n    //                         } else {\n    //                             ctx.lineTo(nonUniformColObjs[j].positionInfo.minX, yScale((nonUniformColObjs[j].vRange[0] + nonUniformColObjs[j].vRange[1]) / 2))\n    //                         }\n\n    //                     }\n    //                 }\n    //             }\n    //         }\n    //         ctx.stroke();\n    //     } else {\n    //         console.log(\"error\")\n    //     }\n\n    //     // if (nonUniformColObjs && ctx) {\n    //     //     formatNonPowDataForViewChange(nonUniformColObjs,lineChartObj.width,lineChartObj.maxLen,null)\n    //     //     // console.log(nonUniformColObjs);\n    //     //     ctx.clearRect(0, 0, lineChartObj.width, lineChartObj.height);\n    //     //     ctx.beginPath();\n\n    //     //     ctx.strokeStyle = 'steelblue';\n    //     //     if(transform_symbol === '+'){\n    //     //         for(let i=0; i<nonUniformColObjs.length; i++){\n    //     //             if(nonUniformColObjs[i].addMin[0] < nonUniformColObjs[i].addMax[0]){\n    //     //                 ctx.moveTo(nonUniformColObjs[i].positionInfo.minX, yScale(nonUniformColObjs[i].addMin[1]));\n    //     //                 ctx.lineTo(nonUniformColObjs[i].positionInfo.maxX, yScale(nonUniformColObjs[i].addMax[1]));\n    //     //                 // ctx.moveTo(nonUniformColObjs[i].positionInfo.minX, yScale(i*2));\n    //     //                 // ctx.lineTo(nonUniformColObjs[i].positionInfo.maxX, yScale(i*2));\n    //     //             }\n    //     //             else{\n    //     //                 ctx.moveTo(nonUniformColObjs[i].positionInfo.minX, yScale(nonUniformColObjs[i].addMax[1]));\n    //     //                 ctx.lineTo(nonUniformColObjs[i].positionInfo.maxX, yScale(nonUniformColObjs[i].addMin[1]));\n    //     //             }\n    //     //             if (i <= nonUniformColObjs.length - 2 && nonUniformColObjs[i].endV !== undefined && nonUniformColObjs[i + 1] !== undefined) {\n    //     //                 ctx.moveTo(nonUniformColObjs[i].positionInfo.endX, yScale(nonUniformColObjs[i].endV!));\n    //     //                 ctx.lineTo(nonUniformColObjs[i + 1].positionInfo.startX, yScale(nonUniformColObjs[i + 1].startV!));\n    //     //             }\n    //     //             // ctx.moveTo(nonUniformColObjs[i].positionInfo.startX, yScale(nonUniformColObjs[i].addMin));\n    //     //             // ctx.lineTo(nonUniformColObjs[i+1].positionInfo.startX, yScale(nonUniformColObjs[i+1].addMin));\n    //     //         }\n    //     //     }\n    //     //     else if(transform_symbol === '-'){\n    //     //         for(let i=0; i<nonUniformColObjs.length; i++){\n    //     //             if(nonUniformColObjs[i].subMin[0] < nonUniformColObjs[i].subMax[0]){\n    //     //                 ctx.moveTo(nonUniformColObjs[i].positionInfo.minX, yScale(nonUniformColObjs[i].subMin[1]));\n    //     //                 ctx.lineTo(nonUniformColObjs[i].positionInfo.maxX, yScale(nonUniformColObjs[i].subMax[1]));\n    //     //             }\n    //     //             else{\n    //     //                 ctx.moveTo(nonUniformColObjs[i].positionInfo.minX, yScale(nonUniformColObjs[i].subMax[1]));\n    //     //                 ctx.lineTo(nonUniformColObjs[i].positionInfo.maxX, yScale(nonUniformColObjs[i].subMin[1]));\n    //     //             }\n    //     //             if (i <= nonUniformColObjs.length - 2 && nonUniformColObjs[i].endV !== undefined && nonUniformColObjs[i + 1] !== undefined) {\n    //     //                 ctx.moveTo(nonUniformColObjs[i].positionInfo.endX, yScale(nonUniformColObjs[i].endV!));\n    //     //                 ctx.lineTo(nonUniformColObjs[i + 1].positionInfo.startX, yScale(nonUniformColObjs[i + 1].startV!));\n    //     //             }\n    //     //             // ctx.moveTo(nonUniformColObjs[i].positionInfo.startX, yScale(nonUniformColObjs[i].addMin));\n    //     //             // ctx.lineTo(nonUniformColObjs[i+1].positionInfo.startX, yScale(nonUniformColObjs[i+1].addMin));\n    //     //         }\n    //     //     }\n    //     //     else if(transform_symbol === '*'){\n    //     //         for(let i=0; i<nonUniformColObjs.length; i++){\n    //     //             if(nonUniformColObjs[i].multiMin[0] < nonUniformColObjs[i].multiMax[0]){\n    //     //                 ctx.moveTo(nonUniformColObjs[i].positionInfo.minX, yScale(nonUniformColObjs[i].multiMin[1]));\n    //     //                 ctx.lineTo(nonUniformColObjs[i].positionInfo.maxX, yScale(nonUniformColObjs[i].multiMax[1]));\n    //     //             }\n    //     //             else{\n    //     //                 ctx.moveTo(nonUniformColObjs[i].positionInfo.minX, yScale(nonUniformColObjs[i].multiMax[1]));\n    //     //                 ctx.lineTo(nonUniformColObjs[i].positionInfo.maxX, yScale(nonUniformColObjs[i].multiMin[1]));\n    //     //             }\n    //     //             if (i <= nonUniformColObjs.length - 2 && nonUniformColObjs[i].endV !== undefined && nonUniformColObjs[i + 1] !== undefined) {\n    //     //                 ctx.moveTo(nonUniformColObjs[i].positionInfo.endX, yScale(nonUniformColObjs[i].endV!));\n    //     //                 ctx.lineTo(nonUniformColObjs[i + 1].positionInfo.startX, yScale(nonUniformColObjs[i + 1].startV!));\n    //     //             }\n    //     //             // ctx.moveTo(nonUniformColObjs[i].positionInfo.startX, yScale(nonUniformColObjs[i].addMin));\n    //     //             // ctx.lineTo(nonUniformColObjs[i+1].positionInfo.startX, yScale(nonUniformColObjs[i+1].addMin));\n    //     //         }\n    //     //     }\n    //     //     else if(transform_symbol === '/'){\n    //     //         for(let i=0; i<nonUniformColObjs.length; i++){\n    //     //             if(nonUniformColObjs[i].divMin[0] < nonUniformColObjs[i].divMax[0]){\n    //     //                 ctx.moveTo(nonUniformColObjs[i].positionInfo.minX, yScale(nonUniformColObjs[i].divMin[1]));\n    //     //                 ctx.lineTo(nonUniformColObjs[i].positionInfo.maxX, yScale(nonUniformColObjs[i].divMax[1]));\n    //     //             }\n    //     //             else{\n    //     //                 ctx.moveTo(nonUniformColObjs[i].positionInfo.minX, yScale(nonUniformColObjs[i].divMax[1]));\n    //     //                 ctx.lineTo(nonUniformColObjs[i].positionInfo.maxX, yScale(nonUniformColObjs[i].divMin[1]));\n    //     //             }\n    //     //             if (i <= nonUniformColObjs.length - 2 && nonUniformColObjs[i].endV !== undefined && nonUniformColObjs[i + 1] !== undefined) {\n    //     //                 ctx.moveTo(nonUniformColObjs[i].positionInfo.endX, yScale(nonUniformColObjs[i].endV!));\n    //     //                 ctx.lineTo(nonUniformColObjs[i + 1].positionInfo.startX, yScale(nonUniformColObjs[i + 1].startV!));\n    //     //             }\n    //     //             // ctx.moveTo(nonUniformColObjs[i].positionInfo.startX, yScale(nonUniformColObjs[i].addMin));\n    //     //             // ctx.lineTo(nonUniformColObjs[i+1].positionInfo.startX, yScale(nonUniformColObjs[i+1].addMin));\n    //     //         }\n    //     //     }\n    //     //     else if(transform_symbol === 'avg'){\n    //     //         for(let i=0; i<nonUniformColObjs.length-1; i++){\n    //     //             if(nonUniformColObjs[i].addMin[0] < nonUniformColObjs[i].addMax[0]){\n    //     //                 ctx.moveTo(nonUniformColObjs[i].positionInfo.minX, yScale(nonUniformColObjs[i].addMin[1]/lenOfLines!));\n    //     //                 ctx.lineTo(nonUniformColObjs[i].positionInfo.maxX, yScale(nonUniformColObjs[i].addMax[1]/lenOfLines!));\n    //     //             }\n    //     //             else{\n    //     //                 ctx.moveTo(nonUniformColObjs[i].positionInfo.minX, yScale(nonUniformColObjs[i].addMax[1]/lenOfLines!));\n    //     //                 ctx.lineTo(nonUniformColObjs[i].positionInfo.maxX, yScale(nonUniformColObjs[i].addMin[1]/lenOfLines!));\n    //     //             }\n    //     //             // ctx.moveTo(nonUniformColObjs[i].positionInfo.startX, yScale(nonUniformColObjs[i].average));\n    //     //             // ctx.lineTo(nonUniformColObjs[i+1].positionInfo.startX, yScale(nonUniformColObjs[i+1].average)); \n    //     //             if (i <= nonUniformColObjs.length - 2 && nonUniformColObjs[i].endV !== undefined && nonUniformColObjs[i + 1] !== undefined) {\n    //     //                 ctx.moveTo(nonUniformColObjs[i].positionInfo.endX, yScale(nonUniformColObjs[i].endV!));\n    //     //                 ctx.lineTo(nonUniformColObjs[i + 1].positionInfo.startX, yScale(nonUniformColObjs[i + 1].startV!));\n    //     //             }\n    //     //         }\n    //     //     }\n    //     //     ctx.stroke();\n    //     //     // savePNG(canvas);\n    //     // } else {\n    //     //     console.log(\"error\")\n    //     // }\n        \n\n    // }\n\n    // draw(!lineChartObj.isPow ? lineChartObj.nonUniformColObjs : undefined);\n\n    //@ts-ignore\n    async function brushed({ selection }) {\n        if (!isInit) {\n            isInit = true\n            return;\n        }\n        if (isResizing) {\n            isRebacking = false;\n            return;\n        }\n        if (isRebacking) {\n            isRebacking = false;\n            return\n        }\n\n        const timeRange = [Math.floor(xReScale(selection[0])), Math.floor(xReScale(selection[1]))];\n        if (timeRange[0] < 0) {\n            timeRange[0] = 0;\n        }\n        if (timeRange[1] > rowNumber) {\n            timeRange[1] = rowNumber\n        }\n        const interInfo = new InteractionInfo(\"zoom\")\n        lineChartObj.timeRange[0] = timeRange[0];\n        lineChartObj.timeRange[1] = timeRange[1];\n        interInfo.setRangeW(lineChartObj.timeRange, lineChartObj.width, lineChartObj.currentLevel);\n        interactionStack.push(interInfo);\n\n        console.log(\"brush....\");\n        let mode = \"compute\";\n        let type = \"\"\n        let parallel = 0;\n        let errorBound = 0;\n        \n        const combinedUrl = `/line_chart/case1?table_name=${line1[0]}&table_name_others=${line1[1]}&symbol=${line1[2]}&mode=${mode}&width=${lineChartObj.width}&height=${lineChartObj.height}&startTime=${lineChartObj.timeRange[0]}&endTime=${lineChartObj.timeRange[1]}&interact_type=${type}&experiment=${line1[3]}&parallel=${parallel}&errorBound=${errorBound}`;\n        const showColumns = await get(combinedUrl);\n        draw(showColumns['M4_array']);\n    }\n\n    async function resizeW(width: number) {\n        isResizing = true;\n        const currentLevel = lineChartObj.currentLevel;\n\n        lineChartObj.width = width;\n        updateCanvasWidth();\n\n        //@ts-ignore\n        canvas.style.width = lineChartObj.width;\n\n        console.log(\"resize....\");\n        let mode = \"compute\";\n        let type = \"\"\n        let parallel = 0;\n        let errorBound = 0;\n        const combinedUrl = `/line_chart/case1?table_name=${line1[0]}&table_name_others=${line1[1]}&symbol=${line1[2]}&mode=${mode}&width=${lineChartObj.width}&height=${lineChartObj.height}&startTime=${lineChartObj.timeRange[0]}&endTime=${lineChartObj.timeRange[1]}&interact_type=${type}&experiment=${line1[3]}&parallel=${parallel}&errorBound=${errorBound}`;\n        const showColumns = await get(combinedUrl);\n        draw(showColumns['M4_array']);\n    }\n    let isMouseover = false;\n    let startOffsetX = 0;\n    const dragRect = svg\n        .append(\"rect\")\n        .attr(\"x\", 0)\n        .attr(\"y\", 0)\n        .attr(\"height\", lineChartObj.height + pading.top + pading.bottom)\n        .attr(\"width\", lineChartObj.width + pading.left + pading.right)\n        .attr(\"stroke\", \"black\")\n        .attr(\"stroke-width\", 4)\n        .attr(\"fill\", \"none\")\n        .on(\"mouseover\", () => {\n            document.body.style.cursor = 'ew-resize';\n            isMouseover = true;\n        })\n        .on(\"mousedown\", (e) => {\n            if (isMouseover) {\n                startOffsetX = e.offsetX;\n                interactiveInfo.isMouseDown = true;\n            }\n        })\n        .on(\"mouseup\", () => {\n            console.log()\n        })\n        .on(\"mousemove\", (e) => {\n            if (interactiveInfo.isMouseDown) {\n                svg.attr(\"width\", lineChartObj.width + pading.right + pading.left + (e.offsetX - startOffsetX));\n                dragRect.attr(\"width\", lineChartObj.width + pading.right + pading.left + (e.offsetX - startOffsetX));\n            }\n        })\n        .on(\"mouseleave\", () => {\n            if (!interactiveInfo.isMouseDown) {\n                document.body.style.cursor = 'default';\n            }\n        })\n\n    document\n        .getElementById(\"content-container\")!\n        .addEventListener(\"mousemove\", (e) => {\n            if (interactiveInfo.isMouseDown) {\n                svg.attr(\"width\", lineChartObj.width + pading.right + pading.left + (e.offsetX - startOffsetX));\n                dragRect.attr(\"width\", lineChartObj.width + pading.right + pading.left + (e.offsetX - startOffsetX));\n            }\n        });\n\n    document\n        .getElementById(\"content-container\")!\n        .addEventListener(\"mouseup\", (e) => {\n            if (interactiveInfo.isMouseDown) {\n                interactiveInfo.isMouseDown = false;\n                isMouseover = false;\n                document.body.style.cursor = 'default';\n                let preWidth = lineChartObj.width;\n                lineChartObj.width = lineChartObj.width + (e.offsetX - startOffsetX);\n                if (lineChartObj.width === preWidth) {\n                    return\n                }\n                const interInfo = new InteractionInfo(\"resize\")\n                interInfo.setRangeW(lineChartObj.timeRange, lineChartObj.width, lineChartObj.currentLevel);\n                interactionStack.push(interInfo);\n                resizeW(lineChartObj.width)\n            }\n        });\n\n    return draw\n}\n\nfunction computeMinMax(columInfo: Array<NoUniformColObj>) {\n    let min = Infinity;\n    let max = -Infinity;\n\n    for (let j = 0; j < columInfo.length; j++) {\n        if (columInfo[j].vRange[0] < min) {\n            min = columInfo[j].vRange[0];\n        }\n\n        if (columInfo[j].vRange[1] > max) {\n            max = columInfo[j].vRange[1];\n        }\n\n    }\n\n    return {\n        min,\n        max\n    }\n}\n\nfunction savePNG(canvas: any) {\n    const imgURL = canvas.toDataURL(\"./image/png\");\n    const dlLink = document.createElement(\"a\")\n    dlLink.download = `1b_zoom_init`\n    dlLink.href = imgURL\n    dlLink.dataset.downloadurl = [\"./image/png\", dlLink.download, dlLink.href].join(\":\")\n    document.body.appendChild(dlLink)\n    dlLink.click()\n    document.body.removeChild(dlLink)\n}"],"mappings":"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AGF,QAAQ,GAAC,CAAC,CAAC,EAAEnC,MAAM,CAAC2B,iBAAiB,CAACW,CAAC,CAAC,CAACM,GAAG,CAAC,CAAC;QAC1GpD,GAAG,CAACkD,MAAM,CAACxC,cAAc,CAACyB,iBAAiB,CAACW,CAAC,CAAC,CAACF,QAAQ,CAAC,EAAEpC,MAAM,CAAC2B,iBAAiB,CAACW,CAAC,CAAC,CAACO,IAAI,CAAC,CAAC;QAC5F,IAAIP,CAAC,IAAIX,iBAAiB,CAACY,MAAM,GAAG,CAAC,EAAE;UACnC/C,GAAG,CAACgD,MAAM,CAACtC,cAAc,CAACyB,iBAAiB,CAACW,CAAC,CAAC,CAACF,QAAQ,CAAC,EAAEpC,MAAM,CAAC2B,iBAAiB,CAACW,CAAC,CAAC,CAACO,IAAI,CAAC,CAAC;UAC5FrD,GAAG,CAACkD,MAAM,CAACxC,cAAc,CAACyB,iBAAiB,CAACW,CAAC,GAAG,CAAC,CAAC,CAACD,UAAU,CAAC,EAAErC,MAAM,CAAC2B,iBAAiB,CAACW,CAAC,GAAG,CAAC,CAAC,CAACG,IAAI,CAAC,CAAC;;;MAG9GjD,GAAG,CAACsD,MAAM,EAAE;KACf,MAAM;MACHjC,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC;;EAG5B;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EA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","ignoreList":[]}]}