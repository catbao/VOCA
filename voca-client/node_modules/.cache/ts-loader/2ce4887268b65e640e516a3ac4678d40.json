{"remainingRequest":"/Users/bao/Downloads/VOCA/voca-client/node_modules/babel-loader/lib/index.js!/Users/bao/Downloads/VOCA/voca-client/node_modules/ts-loader/index.js??ref--15-2!/Users/bao/Downloads/VOCA/voca-client/node_modules/eslint-loader/index.js??ref--14-0!/Users/bao/Downloads/VOCA/voca-client/src/application/multi-interaction.ts","dependencies":[{"path":"/Users/bao/Downloads/VOCA/voca-client/src/application/multi-interaction.ts","mtime":1737975217037},{"path":"/Users/bao/Downloads/VOCA/voca-client/babel.config.js","mtime":1732546288000},{"path":"/Users/bao/Downloads/VOCA/voca-client/node_modules/cache-loader/dist/cjs.js","mtime":1732627998000},{"path":"/Users/bao/Downloads/VOCA/voca-client/node_modules/babel-loader/lib/index.js","mtime":1732627998000},{"path":"/Users/bao/Downloads/VOCA/voca-client/node_modules/ts-loader/index.js","mtime":1732627997000},{"path":"/Users/bao/Downloads/VOCA/voca-client/node_modules/eslint-loader/index.js","mtime":1732627997000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5pdGVyYXRvci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5pdGVyYXRvci5mb3ItZWFjaC5qcyI7CmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJzsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKLy8gaW1wb3J0IHsgYmF0Y2hWaWV3Q2hhbmdlLCBiYXRjaEdldERhdGEgfSBmcm9tICIuLi9iYXRjaC9tNWJhdGNoIjsKbGV0IG5hbWVNYXAgPSBbCi8vZ3JlZW4KewogICJtYXJ1dGlza3RyIjogIuaxvei9pi0jMGU3NzM1Igp9LCB7CiAgInRhdGFtb3RvcnNza3RyIjogIuaxvei9pi0jMzI5YTUxIgp9LCB7CiAgImVpY2hlcm1vdHNrdHIiOiAi5rG96L2mLSM2MGJhNmMiCn0sIHsKICAiaGVyb21vdG9jb3NrdHIiOiAi5pGp5omYLSM5NGQzOTEiCn0sIHsKICAibW1za3RyIjogIuaxvei9pi0jYzBlNmJhIgp9LAovL29yYW5nZXMKLy8gewovLyAgICAgImJhamZpbmFuY2Vza3RyIjogIumHkeiejS0jYjkzZDAyIgovLyB9LAp7CiAgImF4aXNiYW5rc2t0ciI6ICLph5Hono0tI2QxNDkwNCIKfSwgewogICJpbmR1c2luZGJrc2t0ciI6ICLph5Hono0tI2U0NTgwYiIKfSwKLy8gewovLyAgICAgImJhamFqZmluc3Zza3RyIjogIumHkeiejS0jZjg3ZjJjIgovLyB9LAp7CiAgImtvdGFrYmFua3NrdHIiOiAi6YeR6J6NLSNmZGE1NWUiCn0sCi8vY29sb3IKewogICJzYmluc2t0ciI6ICLpk7booYwtIzM1MzUzNSIKfSwgewogICJpY2ljaWJhbmtza3RyIjogIumTtuihjC0jNGQ0ZDRkIgp9LCB7CiAgImhkZmNza3RyIjogIumTtuihjC0jNjI2MjYyIgp9LCB7CiAgImhkZmNiYW5rc2t0ciI6ICLpk7booYwtIzc1NzU3NSIKfSwKLy9ibHVlCnsKICAiaW5meXNrdHIiOiAi5L+h5oGvLSMxMjVjYTQiCn0sIHsKICAidGVjaG1za3RyIjogIuS/oeaBry0jMzE4MWJkIgp9LCB7CiAgImhjbHRlY2hza3RyIjogIuS/oeaBry0jNWJhM2NmIgp9LCB7CiAgInRjc3NrdHIiOiAi5L+h5oGvLSM4ZmMxZGUiCn0sCi8vcHVycGxlcwp7CiAgImNvYWxpbmRpYXNrdHIiOiAi54Wk54KtLSM1YzM2OTYiCn0sIHsKICAib25nY3NrdHIiOiAi55+z5rK55rCULSM2ODRlYTIiCn0sIHsKICAiaW9jc2t0ciI6ICLnn7PmsrnmsJQtIzc1NjZhZSIKfSwgewogICJicGNsc2t0ciI6ICLnn7PmsrktIzgyN2NiOSIKfSwgewogICJwb3dlcmdyaWRza3RyIjogIueUtee9kS0jOTI4ZWMzIgp9LCB7CiAgIm50cGNza3RyIjogIuWFieS8jy0jYTNhMGNjIgp9LAovL3JlZAp7CiAgImJyaXRhbm5pYXNrdHIiOiAi6aOf5ZOBLSNiMjEyMTgiCn0sIHsKICAibmVzdGxlaW5kc2t0ciI6ICLpm4Dlt6ItI2RjMmEyNSIKfSwgewogICJ0YXRhY29uc3Vtc2t0ciI6ICLppa7mlpktI2Y2NTczZiIKfSwKLy90ZWFscyAKewogICJkcnJlZGR5c2t0ciI6ICLliLboja8tIzEyNzI3MyIKfSwgewogICJzdW5waGFybWFza3RyIjogIuWItuiNry0jMmI4YjhjIgp9LCB7CiAgImRpdmlzbGFic2t0ciI6ICLliLboja8tIzRkYTVhNCIKfSwKLy9ncmV5cwp7CiAgImpzd3N0ZWVsc2t0ciI6ICLpkqLpk4EtIzM1MzUzNSIKfSwgewogICJ0YXRhc3RlZWxza3RyIjogIumSoumTgS0jNGQ0ZDRkIgp9LCB7CiAgImx0c2t0ciI6ICLlt6XnqIvlu7rnrZEtIzYyNjI2MiIKfSwgewogICJ1cGxza3RyIjogIuWGnOiNry0jNzU3NTc1Igp9LCB7CiAgInJlbGlhbmNlc2t0ciI6ICLkv6Hlrp7lt6XkuJotIzg4ODg4OCIKfSwgewogICJncmFzaW1za3RyIjogIue6uue7hy0jOWQ5ZDlkIgp9LAovL3dhcm1ncmV5cwp7CiAgInVsdHJhY2VtY29za3RyIjogIuawtOazpS0jNjY1YzVhIgp9LCB7CiAgInNocmVlY2Vtc2t0ciI6ICLmsLTms6UtIzdlNzY3MyIKfSwgewogICJhc2lhbnBhaW50c2t0ciI6ICLmtoLmlpktIzk4OTA4YyIKfSwgewogICJoaW5kYWxjb3NrdHIiOiAi6ZOd6ZOcLSNiM2FhYTciCn0sIHsKICAiaXRjc2t0ciI6ICLotLjmmJMtI2Q4YjVhNSIKfSwgewogICJhZGFuaXBvcnRzc2t0ciI6ICLmuK/lj6Pov5DokKUtI2ZjYmZkMiIKfSwgewogICJ0aXRhbnNrdHIiOiAi54+g5a6dLSNmZmJmNzkiCn0sIHsKICAiaGluZHVuaWx2cnNrdHIiOiAi6IGU5ZCI5Yip5Y2OLSNkOWQ5ZDkiCn1dOwpsZXQgbmFtZWRNYXAgPSBuZXcgTWFwKCk7CmZvciAobGV0IGkgPSAwOyBpIDwgbmFtZU1hcC5sZW5ndGg7IGkrKykgewogIGNvbnN0IGtleSA9IE9iamVjdC5rZXlzKG5hbWVNYXBbaV0pWzBdOwogIG5hbWVkTWFwLnNldChrZXksIG5hbWVNYXBbaV1ba2V5XSk7Cn0KYXN5bmMgZnVuY3Rpb24gZ2V0KHVybCkgewogIHVybCA9ICdwb3N0Z3JlcycgKyB1cmw7CiAgLy9jb25zdCBsb2FkaW5nID0gb3BlbkxvYWRpbmcoKTsKICBjb25zdCB7CiAgICBkYXRhCiAgfSA9IGF3YWl0IGF4aW9zLmdldCh1cmwpOwogIC8vbG9hZGluZy5jbG9zZSgpOwogIHJldHVybiBkYXRhOwp9CmNsYXNzIEludGVyYWN0aW9uSW5mbyB7CiAgY29uc3RydWN0b3IodHlwZSkgewogICAgdGhpcy50eXBlID0gdHlwZTsKICAgIHRoaXMuc2hvd0luZm8gPSBbXTsKICAgIHRoaXMudGltZVJhbmdlID0gW107CiAgICB0aGlzLndpZHRoID0gMDsKICAgIHRoaXMubGV2ZWwgPSAwOwogIH0KICBzZXRTaG93SW5mbyhzaG93SW5mbykgewogICAgdGhpcy5zaG93SW5mbyA9IHNob3dJbmZvOwogIH0KICBzZXRSYW5nZVcodGltZVJhbmdlLCB3aWR0aCwgbGV2ZWwpIHsKICAgIHRoaXMudGltZVJhbmdlID0gW3RpbWVSYW5nZVswXSwgdGltZVJhbmdlWzFdXTsKICAgIHRoaXMud2lkdGggPSB3aWR0aDsKICAgIHRoaXMubGV2ZWwgPSBsZXZlbDsKICB9Cn0KbGV0IGludGVyYWN0aW9uU3RhY2sgPSBbXTsKZXhwb3J0IGZ1bmN0aW9uIGRyYXdNdWx0aVRpbWVTZXJpZXMobXVsdGlUaW1lU2VyaWVzT2JqKSB7CiAgdmFyIF9kb2N1bWVudCRnZXRFbGVtZW50QjsKICBjb25zdCBzdmdFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215X3N2ZycpOwogIGlmIChzdmdFbGVtZW50KSB7CiAgICBzdmdFbGVtZW50LnJlbW92ZSgpOwogIH0KICBsZXQgcmVhbFRpbWVTdGFtcFJhbmdlID0gW211bHRpVGltZVNlcmllc09iai5zdGFydFRpbWVTdGFtcCwgbXVsdGlUaW1lU2VyaWVzT2JqLmVuZFRpbWVTdGFtcF07CiAgY29uc29sZS5sb2coInJlYWxUaW1lU3RhbXA6IiwgcmVhbFRpbWVTdGFtcFJhbmdlKTsKICBsZXQgbm9kZUluZGV4UmFuZ2UgPSBbbXVsdGlUaW1lU2VyaWVzT2JqLnRpbWVSYW5nZVswXSwgbXVsdGlUaW1lU2VyaWVzT2JqLnRpbWVSYW5nZVsxXV07CiAgbGV0IHJvd051bWJlciA9IG11bHRpVGltZVNlcmllc09iai5jb2x1bW5JbmZvc1swXVttdWx0aVRpbWVTZXJpZXNPYmouY29sdW1uSW5mb3NbMF0ubGVuZ3RoIC0gMV0uZXQ7CiAgbGV0IGlzSW5pdCA9IGZhbHNlOwogIGxldCBpc1Jlc2l6aW5nID0gZmFsc2U7CiAgbGV0IGlzUmViYWNraW5nID0gZmFsc2U7CiAgbGV0IGludGVyYWN0aXZlSW5mbyA9IHsKICAgIHN0YXJ0WDogMCwKICAgIHN0YXJ0WTogMCwKICAgIG9mZnNldFg6IDAsCiAgICBvZmZzZXRZOiAwLAogICAgaXNNb3VzZURvd246IGZhbHNlLAogICAgaXNNb3ZlOiBmYWxzZQogIH07CiAgLy9jb25zdCBwYWRpbmcgPSB7IHRvcDogMjAsIGJvdHRvbTogODAsIGxlZnQ6IDQ1LCByaWdodDogMjUwIH07CiAgY29uc3QgcGFkaW5nID0gewogICAgdG9wOiAyMCwKICAgIGJvdHRvbTogODAsCiAgICBsZWZ0OiA3MCwKICAgIHJpZ2h0OiAyMAogIH07CiAgY29uc3Qgc3ZnID0gZDMuc2VsZWN0KCIjY29udGVudC1jb250YWluZXIiKS5hcHBlbmQoInN2ZyIpOwogIHN2Zy5hdHRyKCJ3aWR0aCIsIG11bHRpVGltZVNlcmllc09iai53aWR0aCArIHBhZGluZy5sZWZ0ICsgcGFkaW5nLnJpZ2h0KS5hdHRyKCJoZWlnaHQiLCBtdWx0aVRpbWVTZXJpZXNPYmouaGVpZ2h0ICsgcGFkaW5nLnRvcCArIHBhZGluZy5ib3R0b20pLmF0dHIoInRyYW5zZm9ybSIsIGB0cmFuc2xhdGUoJHsyMH0sJHsyMH0pYCkuc3R5bGUoImJhY2tncm91bmQtY29sb3IiLCAiI2ZmZiIpLmF0dHIoImlkIiwgIm15X3N2ZyIpOwogIGNvbnN0IGZvcmVpZ25JZCA9IGBmb3JlaWduJHttdWx0aVRpbWVTZXJpZXNPYmoud2lkdGggKyBNYXRoLnJhbmRvbSgpfWA7CiAgY29uc3QgZm9yZWlnRyA9IHN2Zy5hcHBlbmQoImciKS5hdHRyKCJ0cmFuc2Zyb20iLCBgdHJhbnNsYXRlKCR7cGFkaW5nLmxlZnR9LCR7cGFkaW5nLnRvcH0pYCk7CiAgbGV0IGZvcmVpZ25PYmogPSBmb3JlaWdHLmFwcGVuZCgiZm9yZWlnbk9iamVjdCIpLmF0dHIoImlkIiwgZm9yZWlnbklkKS5hdHRyKCJ4IiwgcGFkaW5nLmxlZnQpLmF0dHIoInkiLCBwYWRpbmcudG9wKS5hdHRyKCd3aWR0aCcsIG11bHRpVGltZVNlcmllc09iai53aWR0aCkuYXR0cignaGVpZ2h0JywgbXVsdGlUaW1lU2VyaWVzT2JqLmhlaWdodCk7CiAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7CiAgY2FudmFzLl9fZGF0YV9fID0ge307CiAgKF9kb2N1bWVudCRnZXRFbGVtZW50QiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZvcmVpZ25JZCkpID09PSBudWxsIHx8IF9kb2N1bWVudCRnZXRFbGVtZW50QiA9PT0gdm9pZCAwIHx8IF9kb2N1bWVudCRnZXRFbGVtZW50Qi5hcHBlbmRDaGlsZChjYW52YXMpOwogIGNhbnZhcy53aWR0aCA9IG11bHRpVGltZVNlcmllc09iai53aWR0aDsKICBjYW52YXMuaGVpZ2h0ID0gbXVsdGlUaW1lU2VyaWVzT2JqLmhlaWdodDsKICBsZXQgY3R4ID0gY2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgLy8gY29uc3QgY29sb3JBcnJheTEgPSBbIiNiM2RlNjkiLCAiI2YyZjEyMiIsICIjMjQwM2RiIiwgIiNmZmJiNzgiLCAiI2Y2MDhlOCIsICIjMDBlZTIxIiwgIiM4ZGQzYzciLCAiIzE3MGIxMSIsICIjMGFlOWZlIiAsICIjZjJmMTIyIiwgIiNlYzAzMGYiLCAiIzA3ZmZlZCIsICIjMmNhMDJjIiwgIiM5OGRmOGEiLCAiI2Q2MjcyOCIsICIjZmY5ODk2IiwgIiM5NDY3YmQiLCAiI2M1YjBkNSIsICIjOGM1NjRiIiwgIiNjNDljOTQiLCAiI2UzNzdjMiIsICIjZjdiNmQyIiwgIiM3ZjdmN2YiLCAiI2M3YzdjNyIsICIjYmNiZDIyIiwgIiNkYmRiOGQiLCAiIzE3YmVjZiIsICIjOWVkYWU1IiwgIiMzOTNiNzkiLCAiIzUyNTRhMyIsICIjNmI2ZWNmIiwgIiM5YzllZGUiLCAiIzYzNzkzOSIsICIjOGNhMjUyIiwgIiNiNWNmNmIiLCAiI2NlZGI5YyIsICIjOGM2ZDMxIiwgIiNiZDllMzkiLCAiI2U3YmE1MiIsICIjODQzYzM5IiwgIiNhZDQ5NGEiLCAiI2Q2NjE2YiIsICIjZTc5NjljIiwgIiM3YjQxNzMiLCAiI2E1NTE5NCIsICIjY2U2ZGJkIiwgIiNkZTllZDYiXTsKICAvLyBjb25zdCBrZXlzID0gY29sb3JBcnJheTEubWFwKChfLCBpbmRleCkgPT4gYHYke2luZGV4ICsgMX1gKTsKICAvLyAvLyDnlJ/miJAgTWFwIOWvueixoQogIC8vIGNvbnN0IGNvbG9yTWFwID0gbmV3IE1hcChrZXlzLm1hcCgoa2V5LCBpbmRleCkgPT4gW2tleSwgY29sb3JBcnJheTFbaW5kZXhdXSkpOwogIC8vIGNvbnNvbGUubG9nKGNvbG9yTWFwKTsKICAvLyAgICAgVjctTllDXzIwMTUtMjAyM19Ccm9ueF9ncmVlbl9taW51dGUuY3N277yaI0YyOEUyQgogIC8vIFY5LU5ZQ18yMDE1LTIwMjNfQnJvbnhfeWVsbG93X21pbnV0ZS5jc3bvvJojRkZCRTdECiAgLy8gVjEtTllDXzIwMTUtMjAyM19Ccm9va2x5bl9ncmVlbl9taW51dGUuY3N277yaI0IwN0FBMQogIC8vIFY1LSBOWUNfMjAxNS0yMDIzX0Jyb29rbHluX3llbGxvd19taW51dGUuY3N277yaI0Q0QTZDOAogIC8vIFY0LSBOWUNfMjAxNS0yMDIzX01hbmhhdHRhbl9ncmVlbl9taW51dGUuY3N277yaIzRFNzlBNwogIC8vIFYxMC0gTllDXzIwMTUtMjAyM19NYW5oYXR0YW5feWVsbG93X21pbnV0ZS5jc3bvvJojQTBDQkU4CiAgLy8gVjExLSBOWUNfMjAxNS0yMDIzX1F1ZWVuc19ncmVlbl9taW51dGUuY3N277yaI0UxNTc1OQogIC8vIFYzLU5ZQ18yMDE1LTIwMjNfUXVlZW5zX3llbGxvd19taW51dGUuY3N277yaI0ZGOUQ5QQogIC8vIFYyLSdOWUNfMjAxNS0yMDIzX1N0YXRlbiBJc2xhbmRfZ3JlZW5fbWludXRlLmNzdifvvJojNTlBMTRGCiAgLy8gVjYtJ05ZQ18yMDE1LTIwMjNfU3RhdGVuIElzbGFuZF95ZWxsb3dfbWludXRlLmNzdifvvJojOENEMTdECiAgY29uc3QgY29sb3JBcnJheTEgPSBbIiNCMDdBQTEiLCAiIzU5QTE0RiIsICIjRkY5RDlBIiwgIiM0RTc5QTciLCAiI0Q0QTZDOCIsICIjOENEMTdEIiwgIiNGMjhFMkIiLCAiI0ZGQkU3RCIsICIjQTBDQkU4IiwgIiNFMTU3NTkiXTsKICAvLyBjb25zdCBjb2xvckFycmF5MSA9IFsiI2IzZGU2OSIsICIjZjJmMTIyIiwgIiMyNDAzZGIiLCAiI2ZmYmI3OCIsICIjZjYwOGU4IiwgIiMwMGVlMjEiLCAiIzhkZDNjNyIsICIjMGFlOWZlIiwgIiMxNzBiMTEiLCAiI0ZGMDAwMCJdCiAgY29uc3QgY29sb3JOYW1lcyA9IFsidjEiLCAidjIiLCAidjMiLCAidjQiLCAidjUiLCAidjYiLCAidjciLCAidjkiLCAidjEwIiwgInYxMSJdOwogIGNvbnN0IGNvbG9yTWFwID0gbmV3IE1hcCgpOwogIGNvbG9yTmFtZXMuZm9yRWFjaCgobmFtZSwgaW5kZXgpID0+IHsKICAgIGNvbG9yTWFwLnNldChuYW1lLCBjb2xvckFycmF5MVtpbmRleF0pOwogIH0pOwogIC8vY29uc3QgdGltZVJhbmdlU2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbMTQ5MzczMzg4NDQwOSwgMTQ5MzgyOTI0ODI5NF0pLnJhbmdlKFswLCAyICoqIDIwIC0gMV0pOwogIGNvbnN0IGluZGV4VG9UaW1lU3RhbXBTY2FsZSA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFtub2RlSW5kZXhSYW5nZVswXSwgbm9kZUluZGV4UmFuZ2VbMV1dKS5yYW5nZShbcmVhbFRpbWVTdGFtcFJhbmdlWzBdLCByZWFsVGltZVN0YW1wUmFuZ2VbMV1dKTsKICAvLyBjb25zdCB4U2NhbGU6IGFueSA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFswLCBtdWx0aVRpbWVTZXJpZXNPYmoud2lkdGhdKS5yYW5nZShbMCwgbXVsdGlUaW1lU2VyaWVzT2JqLndpZHRoXSk7CiAgY29uc3QgeFNjYWxlID0gZDMuc2NhbGVUaW1lKCkuZG9tYWluKFswLCBtdWx0aVRpbWVTZXJpZXNPYmoud2lkdGhdKS5yYW5nZShbMCwgbXVsdGlUaW1lU2VyaWVzT2JqLndpZHRoXSk7CiAgbGV0IHNob3dUaW1lWFNjYWxlID0gZDMuc2NhbGVUaW1lKCkuZG9tYWluKFtuZXcgRGF0ZShyZWFsVGltZVN0YW1wUmFuZ2VbMF0pLCBuZXcgRGF0ZShyZWFsVGltZVN0YW1wUmFuZ2VbMV0pXSkucmFuZ2UoWzAsIG11bHRpVGltZVNlcmllc09iai53aWR0aF0pOwogIC8vIGxldCBzaG93VGltZVhTY2FsZTogYW55ID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzAsIHJvd051bWJlcl0pLnJhbmdlKFswLCBtdWx0aVRpbWVTZXJpZXNPYmoud2lkdGhdKTsKICBsZXQgeVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oW211bHRpVGltZVNlcmllc09iai5taW52LCBtdWx0aVRpbWVTZXJpZXNPYmoubWF4dl0pLnJhbmdlKFttdWx0aVRpbWVTZXJpZXNPYmouaGVpZ2h0LCAwXSk7CiAgLy8gbGV0IHhSZVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzAsIG11bHRpVGltZVNlcmllc09iai53aWR0aF0pLnJhbmdlKFswLCBtdWx0aVRpbWVTZXJpZXNPYmouZGF0YU1hbmFnZXJzWzBdLnJlYWxEYXRhUm93TnVtIC0gMV0pOwogIGxldCB4UmVTY2FsZSA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFswLCBtdWx0aVRpbWVTZXJpZXNPYmoud2lkdGhdKS5yYW5nZShbMCwgcm93TnVtYmVyXSk7CiAgbGV0IHNob3dYVGltZVNjYWxlID0gZDMuc2NhbGVUaW1lKCkuZG9tYWluKFtuZXcgRGF0ZShyZWFsVGltZVN0YW1wUmFuZ2VbMF0pLCBuZXcgRGF0ZShyZWFsVGltZVN0YW1wUmFuZ2VbMV0pXSkucmFuZ2UoWzAsIG11bHRpVGltZVNlcmllc09iai53aWR0aF0pOwogIC8vIGxldCBzaG93WFRpbWVTY2FsZTogYW55ID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzAsIHJvd051bWJlcl0pLnJhbmdlKFswLCBtdWx0aVRpbWVTZXJpZXNPYmoud2lkdGhdKTsKICBsZXQgem9vbUF4aXMgPSBkMy5heGlzQm90dG9tKHNob3dUaW1lWFNjYWxlKTsKICBsZXQgeUF4aXMgPSBkMy5heGlzTGVmdCh5U2NhbGUpOwogIC8vIGlmIChzdG9yZS5zdGF0ZS5jb250cm9sUGFyYW1zLmN1cnJlbnRNb2RlID09PSAnRGVmYXVsdCcpIHsKICAvLyAgICAgeUF4aXMgPSBkMy5heGlzTGVmdCh5U2NhbGUpLnRpY2tGb3JtYXQoKHZhbCkgPT4gewogIC8vICAgICAgICAgLy9AdHMtaWdub3JlCiAgLy8gICAgICAgICByZXR1cm4gMTAwICogdmFsICsgIiUiCiAgLy8gICAgIH0pCiAgLy8gfQogIGxldCB4QXhpcyA9IGQzLmF4aXNCb3R0b20oc2hvd1hUaW1lU2NhbGUpOwogIGNvbnN0IHlSZVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oW211bHRpVGltZVNlcmllc09iai5taW52LCBtdWx0aVRpbWVTZXJpZXNPYmoubWF4dl0pLnJhbmdlKFttdWx0aVRpbWVTZXJpZXNPYmouaGVpZ2h0LCAwXSk7CiAgY29uc3QgdGltZUJydXNoT2JqID0gZDMuYnJ1c2hYKCkuZXh0ZW50KFtbMCwgMTBdLCBbbXVsdGlUaW1lU2VyaWVzT2JqLndpZHRoLCA0MF1dKTsKICBjb25zdCB0aW1lQm94QnJ1c2hPYmogPSBkMy5icnVzaCgpLmV4dGVudChbW3BhZGluZy5sZWZ0LCBwYWRpbmcudG9wXSwgW211bHRpVGltZVNlcmllc09iai53aWR0aCArIHBhZGluZy5sZWZ0LCBtdWx0aVRpbWVTZXJpZXNPYmouaGVpZ2h0ICsgcGFkaW5nLnRvcF1dKTsKICB0aW1lQm94QnJ1c2hPYmoub24oImVuZCIsIHRpbWVCb3hCcnVzaGVkKTsKICB0aW1lQnJ1c2hPYmoub24oImVuZCIsIGJydXNoZWQpOwogIHRpbWVCcnVzaE9iai5vbigic3RhcnQiLCAoKSA9PiB7CiAgICBjb25zb2xlLmxvZygic3RhcnQiKTsKICB9KTsKICBjb25zdCB0aW1lQm94RyA9IHN2Zy5hcHBlbmQoImciKS5hdHRyKCJ0cmFuc2Zvcm0iLCBgdHJhbnNsYXRlKCR7cGFkaW5nLmxlZnR9LCR7cGFkaW5nLnRvcCArIDUwICsgbXVsdGlUaW1lU2VyaWVzT2JqLmhlaWdodCAtIDIwfSlgKS5jYWxsKHRpbWVCcnVzaE9iaikuY2FsbCh0aW1lQnJ1c2hPYmoubW92ZSwgWzAsIG11bHRpVGltZVNlcmllc09iai53aWR0aF0pOwogIC8vIGZvcmVpZ0cuY2FsbCh0aW1lQm94QnJ1c2hPYmopCiAgbGV0IHpvb21BeGlzRyA9IHN2Zy5hcHBlbmQoImciKS5hdHRyKCdzdHlsZScsICd1c2VyLXNlbGVjdDpub25lJykuYXR0cigidHJhbnNmb3JtIiwgYHRyYW5zbGF0ZSgke3BhZGluZy5sZWZ0fSwke211bHRpVGltZVNlcmllc09iai5oZWlnaHQgKyBwYWRpbmcudG9wICsgNTB9KWApLmF0dHIoImNsYXNzIiwgJ3ggYXhpcycpLmNhbGwoem9vbUF4aXMpOwogIGxldCB4QXhpc0cgPSBzdmcuYXBwZW5kKCJnIikuYXR0cignc3R5bGUnLCAndXNlci1zZWxlY3Q6bm9uZScpLmF0dHIoInRyYW5zZm9ybSIsIGB0cmFuc2xhdGUoJHtwYWRpbmcubGVmdH0sJHttdWx0aVRpbWVTZXJpZXNPYmouaGVpZ2h0ICsgcGFkaW5nLnRvcH0pYCkuYXR0cigiY2xhc3MiLCAneCBheGlzJykuY2FsbCh4QXhpcyk7CiAgbGV0IHlBeGlzRyA9IHN2Zy5hcHBlbmQoImciKS5hdHRyKCdzdHlsZScsICd1c2VyLXNlbGVjdDpub25lJykuYXR0cigidHJhbnNmb3JtIiwgYHRyYW5zbGF0ZSgke3BhZGluZy5sZWZ0fSwke3BhZGluZy50b3B9KWApLmF0dHIoImNsYXNzIiwgJ3kgYXhpcycpLmNhbGwoeUF4aXMpOwogIC8vQHRzLWlnbm9yZQogIGZ1bmN0aW9uIHVwZGF0ZUNhbnZhc1dpZHRoKCkgewogICAgLy9AdHMtaWdub3JlCiAgICBjYW52YXMuc3R5bGUud2lkdGggPSBtdWx0aVRpbWVTZXJpZXNPYmoud2lkdGg7CiAgICBzdmcuYXR0cigid2lkdGgiLCBtdWx0aVRpbWVTZXJpZXNPYmoud2lkdGggKyBwYWRpbmcubGVmdCArIHBhZGluZy5yaWdodCkuYXR0cigiaGVpZ2h0IiwgbXVsdGlUaW1lU2VyaWVzT2JqLmhlaWdodCArIHBhZGluZy50b3AgKyBwYWRpbmcuYm90dG9tKTsKICAgIGZvcmVpZ25PYmouYXR0cigid2lkdGgiLCBtdWx0aVRpbWVTZXJpZXNPYmoud2lkdGgpOwogICAgeFNjYWxlLmRvbWFpbihbMCwgbXVsdGlUaW1lU2VyaWVzT2JqLndpZHRoXSkucmFuZ2UoWzAsIG11bHRpVGltZVNlcmllc09iai53aWR0aF0pOwogICAgc2hvd1RpbWVYU2NhbGUuZG9tYWluKFtuZXcgRGF0ZShyZWFsVGltZVN0YW1wUmFuZ2VbMF0pLCBuZXcgRGF0ZShyZWFsVGltZVN0YW1wUmFuZ2VbMV0pXSkucmFuZ2UoWzAsIG11bHRpVGltZVNlcmllc09iai53aWR0aF0pOwogICAgLy8gc2hvd1RpbWVYU2NhbGUuZG9tYWluKFswLCByb3dOdW1iZXJdKS5yYW5nZShbMCwgbXVsdGlUaW1lU2VyaWVzT2JqLndpZHRoXSk7CiAgICBpZiAoem9vbUF4aXNHICE9IG51bGwpIHsKICAgICAgem9vbUF4aXNHLnJlbW92ZSgpOwogICAgICB6b29tQXhpc0cgPSBzdmcuYXBwZW5kKCJnIikuYXR0cignc3R5bGUnLCAndXNlci1zZWxlY3Q6bm9uZScpLmF0dHIoInRyYW5zZm9ybSIsIGB0cmFuc2xhdGUoJHtwYWRpbmcubGVmdH0sJHttdWx0aVRpbWVTZXJpZXNPYmouaGVpZ2h0ICsgcGFkaW5nLnRvcCArIDUwfSlgKS5hdHRyKCJjbGFzcyIsICd4IGF4aXMnKS5jYWxsKHpvb21BeGlzKTsKICAgIH0KICAgIHRpbWVCcnVzaE9iai5leHRlbnQoW1swLCAxMF0sIFttdWx0aVRpbWVTZXJpZXNPYmoud2lkdGgsIDQwXV0pOwogICAgdGltZUJydXNoT2JqLm9uKCJlbmQiLCBicnVzaGVkKTsKICAgIHRpbWVCcnVzaE9iai5vbigic3RhcnQiLCAoKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCJzdGFydCIpOwogICAgfSk7CiAgICBjb25zdCB0ZW1wUmVTY2FsZSA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFswLCBub2RlSW5kZXhSYW5nZVsxXV0pLnJhbmdlKFswLCBtdWx0aVRpbWVTZXJpZXNPYmoud2lkdGhdKTsKICAgIHRpbWVCb3hHLmNhbGwodGltZUJydXNoT2JqKS5jYWxsKHRpbWVCcnVzaE9iai5tb3ZlLCBbdGVtcFJlU2NhbGUobXVsdGlUaW1lU2VyaWVzT2JqLnRpbWVSYW5nZVswXSksIHRlbXBSZVNjYWxlKG11bHRpVGltZVNlcmllc09iai50aW1lUmFuZ2VbMV0pXSk7CiAgICBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsKICB9CiAgbGV0IGxlbmdlbmRHID0gbnVsbDsKICBmdW5jdGlvbiBkcmF3TGVuZ2VuZChsZWZ0T2Zmc2V0LCBtdWx0aVRpbWVTZXJpZXNPYmosIGNvbG9yQXJyYXkpIHsKICAgIGlmIChsZW5nZW5kRyAhPT0gbnVsbCkgewogICAgICBsZW5nZW5kRy5yZW1vdmUoKTsKICAgIH0KICAgIGxlbmdlbmRHID0gc3ZnLmFwcGVuZCgnZycpLmF0dHIoIndpZHRoIiwgMTAwKS5hdHRyKCJoZWlnaHQiLCA3MDApLmF0dHIoInRyYW5zZm9ybSIsIGB0cmFuc2xhdGUoJHtsZWZ0T2Zmc2V0fSwke3BhZGluZy50b3AgLSAxNX0pYCk7CiAgICAvLyBjb25zdCBrZXlzID0gWyd2MScsJ3YyJywndjMnXTsKICAgIGNvbnN0IGtleXMgPSBtdWx0aVRpbWVTZXJpZXNPYmouY29sdW1uc0NvbG9yOwogICAga2V5cy5mb3JFYWNoKChrZXksIGluZGV4KSA9PiB7CiAgICAgIGNvbnN0IGNvbG9yID0gY29sb3JNYXAuZ2V0KG11bHRpVGltZVNlcmllc09iai5jb2x1bW5zQ29sb3JbaW5kZXhdKTsKICAgICAgY29uc3QgbGFiZWwgPSBrZXk7CiAgICAgIGxlbmdlbmRHLmFwcGVuZCgicmVjdCIpLmF0dHIoIngiLCAwKS5hdHRyKCJ5IiwgaW5kZXggKiAyNSkgLy8g5q+P5Liq5Zu+5L6L6aG55Z6C55u06Ze06ZqUIDI1IOWDj+e0oAogICAgICAuYXR0cigid2lkdGgiLCAyMCkuYXR0cigiaGVpZ2h0IiwgMjApLmF0dHIoImZpbGwiLCBjb2xvcik7CiAgICAgIGxlbmdlbmRHLmFwcGVuZCgidGV4dCIpLmF0dHIoIngiLCAzMCkgLy8g5paH5pys55u45a+55LqO6aKc6Imy5Z2X55qE5YGP56e7CiAgICAgIC5hdHRyKCJ5IiwgaW5kZXggKiAyNSArIDE1KSAvLyDkuI7popzoibLlnZflr7npvZDlubblnoLnm7TlsYXkuK0KICAgICAgLmF0dHIoImZvbnQtc2l6ZSIsICIxMnB4IikuYXR0cigiZmlsbCIsICIjMDAwIikudGV4dChsYWJlbCk7CiAgICB9KTsKICAgIC8vIGlmKG11bHRpVGltZVNlcmllc09iai5saW5lMVsyXSA9PSAnbWVhbicpewogICAgLy8gICAgIGxlbmdlbmRHCiAgICAvLyAgICAgICAgIC5hcHBlbmQoInJlY3QiKQogICAgLy8gICAgICAgICAuYXR0cigieCIsIDApCiAgICAvLyAgICAgICAgIC5hdHRyKCJ5Iiwga2V5cy5sZW5ndGggKiAyNSkgCiAgICAvLyAgICAgICAgIC5hdHRyKCJ3aWR0aCIsIDIwKQogICAgLy8gICAgICAgICAuYXR0cigiaGVpZ2h0IiwgMjApCiAgICAvLyAgICAgICAgIC5hdHRyKCJmaWxsIiwgY29sb3JBcnJheVtrZXlzLmxlbmd0aF0pOwogICAgLy8gICAgIGxlbmdlbmRHCiAgICAvLyAgICAgICAgIC5hcHBlbmQoInRleHQiKQogICAgLy8gICAgICAgICAuYXR0cigieCIsIDMwKSAvLyDmlofmnKznm7jlr7nkuo7popzoibLlnZfnmoTlgY/np7sKICAgIC8vICAgICAgICAgLmF0dHIoInkiLCBrZXlzLmxlbmd0aCAqIDI1ICsgMTUpIC8vIOS4juminOiJsuWdl+Wvuem9kOW5tuWeguebtOWxheS4rQogICAgLy8gICAgICAgICAuYXR0cigiZm9udC1zaXplIiwgIjEycHgiKQogICAgLy8gICAgICAgICAuYXR0cigiZmlsbCIsICIjMDAwIikKICAgIC8vICAgICAgICAgLnRleHQoIkF2ZSIpOwogICAgLy8gfQogIH0KICBmdW5jdGlvbiBkcmF3KGNvbHVtbkluZm9zKSB7CiAgICB2YXIgX2N0eDsKICAgIC8vIGNvbnN0IGNvbG9yQXJyYXkxID0gWyIjYjNkZTY5IiwgIiNmZGI0NjIiLCAiIzgwYjFkMyIsICIjZmI4MDcyIiwgIiNiZWJhZGEiLCAiI2ZmZmZiMyIsICIjOGRkM2M3IiwgIiMxZjc3YjQiLCAiI2FlYzdlOCIsICIjZmY3ZjBlIiwgIiNmZmJiNzgiLCAiIzJjYTAyYyIsICIjOThkZjhhIiwgIiNkNjI3MjgiLCAiI2ZmOTg5NiIsICIjOTQ2N2JkIiwgIiNjNWIwZDUiLCAiIzhjNTY0YiIsICIjYzQ5Yzk0IiwgIiNlMzc3YzIiLCAiI2Y3YjZkMiIsICIjN2Y3ZjdmIiwgIiNjN2M3YzciLCAiI2JjYmQyMiIsICIjZGJkYjhkIiwgIiMxN2JlY2YiLCAiIzllZGFlNSIsICIjMzkzYjc5IiwgIiM1MjU0YTMiLCAiIzZiNmVjZiIsICIjOWM5ZWRlIiwgIiM2Mzc5MzkiLCAiIzhjYTI1MiIsICIjYjVjZjZiIiwgIiNjZWRiOWMiLCAiIzhjNmQzMSIsICIjYmQ5ZTM5IiwgIiNlN2JhNTIiLCAiIzg0M2MzOSIsICIjYWQ0OTRhIiwgIiNkNjYxNmIiLCAiI2U3OTY5YyIsICIjN2I0MTczIiwgIiNhNTUxOTQiLCAiI2NlNmRiZCIsICIjZGU5ZWQ2Il07CiAgICBkcmF3TGVuZ2VuZChtdWx0aVRpbWVTZXJpZXNPYmoud2lkdGggKyBwYWRpbmcubGVmdCAtIDQwLCBtdWx0aVRpbWVTZXJpZXNPYmosIGNvbG9yQXJyYXkxKTsKICAgIGNhbnZhcy53aWR0aCA9IG11bHRpVGltZVNlcmllc09iai53aWR0aDsKICAgIC8vIGNvbnN0IGN1ck1pbk1heCA9IGNvbXB1dGVNaW5NYXgobXVsdGlUaW1lU2VyaWVzT2JqKTsKICAgIHlTY2FsZSA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFttdWx0aVRpbWVTZXJpZXNPYmoubWludiwgbXVsdGlUaW1lU2VyaWVzT2JqLm1heHZdKS5yYW5nZShbbXVsdGlUaW1lU2VyaWVzT2JqLmhlaWdodCwgMF0pOwogICAgeUF4aXMgPSBkMy5heGlzTGVmdCh5U2NhbGUpOwogICAgLy8gaWYgKHN0b3JlLnN0YXRlLmNvbnRyb2xQYXJhbXMuY3VycmVudE1vZGUgPT09ICdEZWZhdWx0JykgewogICAgLy8gICAgIHlBeGlzID0gZDMuYXhpc0xlZnQoeVNjYWxlKS50aWNrRm9ybWF0KCh2YWwpID0+IHsKICAgIC8vICAgICAgICAgLy9AdHMtaWdub3JlCiAgICAvLyAgICAgICAgIHJldHVybiAxMDAgKiB2YWwgKyAiJSIKICAgIC8vICAgICB9KQogICAgLy8gfQogICAgaWYgKHlBeGlzRyAhPT0gbnVsbCAmJiB5QXhpc0cgIT09IHVuZGVmaW5lZCkgewogICAgICB5QXhpc0cucmVtb3ZlKCk7CiAgICB9CiAgICB5QXhpc0cgPSBzdmcuYXBwZW5kKCJnIikuYXR0cignc3R5bGUnLCAndXNlci1zZWxlY3Q6bm9uZScpLmF0dHIoInRyYW5zZm9ybSIsIGB0cmFuc2xhdGUoJHtwYWRpbmcubGVmdH0sJHtwYWRpbmcudG9wfSlgKS5hdHRyKCJjbGFzcyIsICd5IGF4aXMnKS5jYWxsKHlBeGlzKTsKICAgIHNob3dYVGltZVNjYWxlID0gZDMuc2NhbGVUaW1lKCkuZG9tYWluKFtuZXcgRGF0ZShNYXRoLmZsb29yKGluZGV4VG9UaW1lU3RhbXBTY2FsZShtdWx0aVRpbWVTZXJpZXNPYmoudGltZVJhbmdlWzBdKSkpLCBuZXcgRGF0ZShNYXRoLmZsb29yKGluZGV4VG9UaW1lU3RhbXBTY2FsZShtdWx0aVRpbWVTZXJpZXNPYmoudGltZVJhbmdlWzFdKSkpXSkucmFuZ2UoWzAsIG11bHRpVGltZVNlcmllc09iai53aWR0aF0pOwogICAgLy8gc2hvd1hUaW1lU2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbMCwgcm93TnVtYmVyXSkucmFuZ2UoWzAsIG11bHRpVGltZVNlcmllc09iai53aWR0aF0pOwogICAgeEF4aXMgPSBkMy5heGlzQm90dG9tKHNob3dYVGltZVNjYWxlKTsKICAgIGlmICh4QXhpc0cgIT09IG51bGwgJiYgeEF4aXNHICE9PSB1bmRlZmluZWQpIHsKICAgICAgeEF4aXNHLnJlbW92ZSgpOwogICAgfQogICAgeEF4aXNHID0gc3ZnLmFwcGVuZCgiZyIpLmF0dHIoJ3N0eWxlJywgJ3VzZXItc2VsZWN0Om5vbmUnKS5hdHRyKCJ0cmFuc2Zvcm0iLCBgdHJhbnNsYXRlKCR7cGFkaW5nLmxlZnR9LCR7bXVsdGlUaW1lU2VyaWVzT2JqLmhlaWdodCArIHBhZGluZy50b3B9KWApLmF0dHIoImNsYXNzIiwgJ3ggYXhpcycpLmNhbGwoeEF4aXMpOwogICAgY29sdW1uSW5mb3MgPSBtdWx0aVRpbWVTZXJpZXNPYmouY29sdW1uSW5mb3M7CiAgICAoX2N0eCA9IGN0eCkgPT09IG51bGwgfHwgX2N0eCA9PT0gdm9pZCAwIHx8IF9jdHguY2xlYXJSZWN0KDAsIDAsIG11bHRpVGltZVNlcmllc09iai53aWR0aCwgbXVsdGlUaW1lU2VyaWVzT2JqLmhlaWdodCk7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbHVtbkluZm9zLmxlbmd0aDsgaSsrKSB7CiAgICAgIGlmIChtdWx0aVRpbWVTZXJpZXNPYmouaXNTaG93W2ldKSB7CiAgICAgICAgaWYgKG11bHRpVGltZVNlcmllc09iai5jb2x1bW5JbmZvc1tpXSkgewogICAgICAgICAgdmFyIF9jdHgyLCBfY3R4MTE7CiAgICAgICAgICAoX2N0eDIgPSBjdHgpID09PSBudWxsIHx8IF9jdHgyID09PSB2b2lkIDAgfHwgX2N0eDIuYmVnaW5QYXRoKCk7CiAgICAgICAgICBsZXQgY29sb3IgPSBjb2xvck1hcC5nZXQobXVsdGlUaW1lU2VyaWVzT2JqLmxpbmUxW211bHRpVGltZVNlcmllc09iai5saW5lMS5sZW5ndGggLSAxXVtpXSk7CiAgICAgICAgICAvLyBpZiAoc3RvcmUuc3RhdGUuY29udHJvbFBhcmFtcy5jdXJyZW50TW9kZSA9PT0gJ0RlZmF1bHQnKSB7CiAgICAgICAgICAvLyAgICAgLy9jdHguc3Ryb2tlU3R5bGUgPSBjb2xvckFycmF5MVtpXTsKICAgICAgICAgIC8vICAgICBjb25zdCBub25Vbmlmb3JtQ29sT2JqcyA9IG11bHRpVGltZVNlcmllc09iai5jb2x1bW5JbmZvc1tpXTsKICAgICAgICAgIC8vICAgICBsZXQgbmFtZVN0cnMgPSBtdWx0aVRpbWVTZXJpZXNPYmouZGF0YU5hbWVbaV0uc3BsaXQoIi4iKVsxXS5zcGxpdCgiXyIpCiAgICAgICAgICAvLyAgICAgaWYgKG5hbWVTdHJzWzFdW25hbWVTdHJzWzFdLmxlbmd0aCAtIDFdICE9PSAncicpIHsKICAgICAgICAgIC8vICAgICAgICAgbmFtZVN0cnNbMV0gPSBuYW1lU3Ryc1sxXSArICdyJzsKICAgICAgICAgIC8vICAgICB9CiAgICAgICAgICAvLyAgICAgLy9AdHMtaWdub3JlCiAgICAgICAgICAvLyAgICAgY3R4LnN0cm9rZVN0eWxlID0gbmFtZWRNYXAuZ2V0KG5hbWVTdHJzWzFdKS5zcGxpdCgiLSIpWzFdLy9jb2xvckFycmF5MVtpXTsKICAgICAgICAgIC8vIH0gZWxzZSB7CiAgICAgICAgICAvL0B0cy1pZ25vcmUKICAgICAgICAgIC8vIGN0eC5zdHJva2VTdHlsZSA9IGNvbG9yQXJyYXkxW211bHRpVGltZVNlcmllc09iai5jb2x1bW5JbmZvc1tpXS5tZDVOdW0hICUgNDZdOwogICAgICAgICAgLy8gfQogICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gY29sb3I7CiAgICAgICAgICAvLyBjdHguc3Ryb2tlU3R5bGUgPSBjb2xvckFycmF5MVtpXTsKICAgICAgICAgIC8vQHRzLWlnbm9yZQogICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDE7CiAgICAgICAgICBjb25zdCBub25Vbmlmb3JtQ29sT2JqcyA9IGNvbHVtbkluZm9zW2ldOwogICAgICAgICAgbGV0IGludGVydmFsID0gKG5vblVuaWZvcm1Db2xPYmpzWzBdLmV0IC0gbm9uVW5pZm9ybUNvbE9ianNbMF0uc3QpIC8gMzsKICAgICAgICAgIGxldCB3aG9sZUludGVydmFsID0gbm9uVW5pZm9ybUNvbE9ianNbMF0uZXQgLSBub25Vbmlmb3JtQ29sT2Jqc1swXS5zdDsKICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbm9uVW5pZm9ybUNvbE9ianMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgdmFyIF9jdHgzLCBfY3R4NCwgX2N0eDUsIF9jdHg2LCBfY3R4NywgX2N0eDg7CiAgICAgICAgICAgIChfY3R4MyA9IGN0eCkgPT09IG51bGwgfHwgX2N0eDMgPT09IHZvaWQgMCB8fCBfY3R4My5tb3ZlVG8obm9uVW5pZm9ybUNvbE9ianNbal0uc3QgLyB3aG9sZUludGVydmFsLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbal0uc3YpKTsKICAgICAgICAgICAgKF9jdHg0ID0gY3R4KSA9PT0gbnVsbCB8fCBfY3R4NCA9PT0gdm9pZCAwIHx8IF9jdHg0LmxpbmVUbygobm9uVW5pZm9ybUNvbE9ianNbal0uc3QgKyBpbnRlcnZhbCkgLyB3aG9sZUludGVydmFsLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbal0ubWluKSk7CiAgICAgICAgICAgIChfY3R4NSA9IGN0eCkgPT09IG51bGwgfHwgX2N0eDUgPT09IHZvaWQgMCB8fCBfY3R4NS5tb3ZlVG8oKG5vblVuaWZvcm1Db2xPYmpzW2pdLnN0ICsgaW50ZXJ2YWwpIC8gd2hvbGVJbnRlcnZhbCwgeVNjYWxlKG5vblVuaWZvcm1Db2xPYmpzW2pdLm1pbikpOwogICAgICAgICAgICAoX2N0eDYgPSBjdHgpID09PSBudWxsIHx8IF9jdHg2ID09PSB2b2lkIDAgfHwgX2N0eDYubGluZVRvKChub25Vbmlmb3JtQ29sT2Jqc1tqXS5zdCArIGludGVydmFsICogMikgLyB3aG9sZUludGVydmFsLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbal0ubWF4KSk7CiAgICAgICAgICAgIChfY3R4NyA9IGN0eCkgPT09IG51bGwgfHwgX2N0eDcgPT09IHZvaWQgMCB8fCBfY3R4Ny5tb3ZlVG8oKG5vblVuaWZvcm1Db2xPYmpzW2pdLnN0ICsgaW50ZXJ2YWwgKiAyKSAvIHdob2xlSW50ZXJ2YWwsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tqXS5tYXgpKTsKICAgICAgICAgICAgKF9jdHg4ID0gY3R4KSA9PT0gbnVsbCB8fCBfY3R4OCA9PT0gdm9pZCAwIHx8IF9jdHg4LmxpbmVUbyhub25Vbmlmb3JtQ29sT2Jqc1tqXS5ldCAvIHdob2xlSW50ZXJ2YWwsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tqXS5ldikpOwogICAgICAgICAgICBpZiAoaiA8PSBub25Vbmlmb3JtQ29sT2Jqcy5sZW5ndGggLSAyKSB7CiAgICAgICAgICAgICAgdmFyIF9jdHg5LCBfY3R4MTA7CiAgICAgICAgICAgICAgKF9jdHg5ID0gY3R4KSA9PT0gbnVsbCB8fCBfY3R4OSA9PT0gdm9pZCAwIHx8IF9jdHg5Lm1vdmVUbyhub25Vbmlmb3JtQ29sT2Jqc1tqXS5ldCAvIHdob2xlSW50ZXJ2YWwsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tqXS5ldikpOwogICAgICAgICAgICAgIChfY3R4MTAgPSBjdHgpID09PSBudWxsIHx8IF9jdHgxMCA9PT0gdm9pZCAwIHx8IF9jdHgxMC5saW5lVG8obm9uVW5pZm9ybUNvbE9ianNbaiArIDFdLnN0IC8gd2hvbGVJbnRlcnZhbCwgeVNjYWxlKG5vblVuaWZvcm1Db2xPYmpzW2ogKyAxXS5zdikpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICAoX2N0eDExID0gY3R4KSA9PT0gbnVsbCB8fCBfY3R4MTEgPT09IHZvaWQgMCB8fCBfY3R4MTEuc3Ryb2tlKCk7CiAgICAgICAgICAvLyBpZihtdWx0aVRpbWVTZXJpZXNPYmoubGluZTFbMl0gPT0gJ21lYW4nKXsKICAgICAgICAgIC8vICAgICBsZXQgY3R4ID0gY2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgICAgICAgICAvLyAgICAgLy9AdHMtaWdub3JlCiAgICAgICAgICAvLyAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgLy8gICAgIC8vQHRzLWlnbm9yZQogICAgICAgICAgLy8gICAgIGN0eC5saW5lV2lkdGggPSAyOwogICAgICAgICAgLy8gICAgIGZvciAobGV0IGogPSBub25Vbmlmb3JtQ29sT2Jqcy5sZW5ndGgtMTsgaiA8IG5vblVuaWZvcm1Db2xPYmpzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAvLyAgICAgICAgIGN0eD8ubW92ZVRvKG5vblVuaWZvcm1Db2xPYmpzW2pdLnN0L3dob2xlSW50ZXJ2YWwsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tqXS5zdikpOwogICAgICAgICAgLy8gICAgICAgICBjdHg/LmxpbmVUbygobm9uVW5pZm9ybUNvbE9ianNbal0uc3QgKyBpbnRlcnZhbCkvd2hvbGVJbnRlcnZhbCwgeVNjYWxlKG5vblVuaWZvcm1Db2xPYmpzW2pdLm1pbikpOwogICAgICAgICAgLy8gICAgICAgICBjdHg/Lm1vdmVUbygobm9uVW5pZm9ybUNvbE9ianNbal0uc3QgKyBpbnRlcnZhbCkvd2hvbGVJbnRlcnZhbCwgeVNjYWxlKG5vblVuaWZvcm1Db2xPYmpzW2pdLm1pbikpOwogICAgICAgICAgLy8gICAgICAgICBjdHg/LmxpbmVUbygobm9uVW5pZm9ybUNvbE9ianNbal0uc3QgKyBpbnRlcnZhbCoyKS93aG9sZUludGVydmFsLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbal0ubWF4KSk7CiAgICAgICAgICAvLyAgICAgICAgIGN0eD8ubW92ZVRvKChub25Vbmlmb3JtQ29sT2Jqc1tqXS5zdCArIGludGVydmFsKjIpL3dob2xlSW50ZXJ2YWwsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tqXS5tYXgpKTsKICAgICAgICAgIC8vICAgICAgICAgY3R4Py5saW5lVG8obm9uVW5pZm9ybUNvbE9ianNbal0uZXQvd2hvbGVJbnRlcnZhbCwgeVNjYWxlKG5vblVuaWZvcm1Db2xPYmpzW2pdLmV2KSk7CiAgICAgICAgICAvLyAgICAgICAgIGlmIChqIDw9IG5vblVuaWZvcm1Db2xPYmpzLmxlbmd0aCAtIDIpIHsKICAgICAgICAgIC8vICAgICAgICAgICAgIGN0eD8ubW92ZVRvKG5vblVuaWZvcm1Db2xPYmpzW2pdLmV0L3dob2xlSW50ZXJ2YWwsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tqXS5ldikpOwogICAgICAgICAgLy8gICAgICAgICAgICAgY3R4Py5saW5lVG8obm9uVW5pZm9ybUNvbE9ianNbaiArIDFdLnN0L3dob2xlSW50ZXJ2YWwsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tqICsgMV0uc3YpKTsKICAgICAgICAgIC8vICAgICAgICAgfQogICAgICAgICAgLy8gICAgIH0KICAgICAgICAgIC8vICAgICBjdHg/LnN0cm9rZSgpOwogICAgICAgICAgLy8gfQogICAgICAgICAgLy8gZWxzZXsKICAgICAgICAgIC8vICAgICBmb3IgKGxldCBqID0gbm9uVW5pZm9ybUNvbE9ianMubGVuZ3RoLTE7IGogPCBub25Vbmlmb3JtQ29sT2Jqcy5sZW5ndGg7IGorKykgewogICAgICAgICAgLy8gICAgICAgICBjdHg/Lm1vdmVUbyhub25Vbmlmb3JtQ29sT2Jqc1tqXS5zdC93aG9sZUludGVydmFsLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbal0uc3YpKTsKICAgICAgICAgIC8vICAgICAgICAgY3R4Py5saW5lVG8oKG5vblVuaWZvcm1Db2xPYmpzW2pdLnN0ICsgaW50ZXJ2YWwpL3dob2xlSW50ZXJ2YWwsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tqXS5taW4pKTsKICAgICAgICAgIC8vICAgICAgICAgY3R4Py5tb3ZlVG8oKG5vblVuaWZvcm1Db2xPYmpzW2pdLnN0ICsgaW50ZXJ2YWwpL3dob2xlSW50ZXJ2YWwsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tqXS5taW4pKTsKICAgICAgICAgIC8vICAgICAgICAgY3R4Py5saW5lVG8oKG5vblVuaWZvcm1Db2xPYmpzW2pdLnN0ICsgaW50ZXJ2YWwqMikvd2hvbGVJbnRlcnZhbCwgeVNjYWxlKG5vblVuaWZvcm1Db2xPYmpzW2pdLm1heCkpOwogICAgICAgICAgLy8gICAgICAgICBjdHg/Lm1vdmVUbygobm9uVW5pZm9ybUNvbE9ianNbal0uc3QgKyBpbnRlcnZhbCoyKS93aG9sZUludGVydmFsLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbal0ubWF4KSk7CiAgICAgICAgICAvLyAgICAgICAgIGN0eD8ubGluZVRvKG5vblVuaWZvcm1Db2xPYmpzW2pdLmV0L3dob2xlSW50ZXJ2YWwsIHlTY2FsZShub25Vbmlmb3JtQ29sT2Jqc1tqXS5ldikpOwogICAgICAgICAgLy8gICAgICAgICBpZiAoaiA8PSBub25Vbmlmb3JtQ29sT2Jqcy5sZW5ndGggLSAyKSB7CiAgICAgICAgICAvLyAgICAgICAgICAgICBjdHg/Lm1vdmVUbyhub25Vbmlmb3JtQ29sT2Jqc1tqXS5ldC93aG9sZUludGVydmFsLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbal0uZXYpKTsKICAgICAgICAgIC8vICAgICAgICAgICAgIGN0eD8ubGluZVRvKG5vblVuaWZvcm1Db2xPYmpzW2ogKyAxXS5zdC93aG9sZUludGVydmFsLCB5U2NhbGUobm9uVW5pZm9ybUNvbE9ianNbaiArIDFdLnN2KSk7CiAgICAgICAgICAvLyAgICAgICAgIH0KICAgICAgICAgIC8vICAgICB9CiAgICAgICAgICAvLyAgICAgY3R4Py5zdHJva2UoKTsKICAgICAgICAgIC8vIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8vIHNhdmVQTkcoY2FudmFzKTsKICAgIC8vIHNhdmVQTkcoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNvbnRlbnQtY29udGFpbmVyIikpOwogIH0KICBhc3luYyBmdW5jdGlvbiByZXNpemVXKHdpZHRoKSB7CiAgICBpc1Jlc2l6aW5nID0gdHJ1ZTsKICAgIC8vdGltZWJveFN0YWNrID0gW107CiAgICBjb25zdCBjdXJyZW50TGV2ZWwgPSBtdWx0aVRpbWVTZXJpZXNPYmouY3VycmVudExldmVsOwogICAgLy8gbXVsdGlUaW1lU2VyaWVzT2JqLmN1cnJlbnRMZXZlbCA9IDEwOy8vY3VycmVudExldmVsICsgMQogICAgbXVsdGlUaW1lU2VyaWVzT2JqLndpZHRoID0gd2lkdGg7CiAgICB1cGRhdGVDYW52YXNXaWR0aCgpOwogICAgaWYgKGN1cnJlbnRMZXZlbCArIDEgPj0gbXVsdGlUaW1lU2VyaWVzT2JqLm1heExldmVsIC0gMSkgewogICAgICByZXR1cm47CiAgICB9CiAgICAvL0B0cy1pZ25vcmUKICAgIGNhbnZhcy5zdHlsZS53aWR0aCA9IG11bHRpVGltZVNlcmllc09iai53aWR0aDsKICAgIGNvbnNvbGUubG9nKCJyZXNpemUuLi4uIik7CiAgICAvLyBsZXQgbW9kZSA9ICJzaG93IjsKICAgIC8vIGxldCB0eXBlID0gIiIKICAgIC8vIGxldCBwYXJhbGxlbCA9IDA7CiAgICAvLyBsZXQgZXJyb3JCb3VuZCA9IDA7CiAgICAvLyBsZXQgbGluZTEgPSBtdWx0aVRpbWVTZXJpZXNPYmoubGluZTE7CiAgICAvLyBjb25zdCBjb21iaW5lZFVybCA9IGAvbGluZV9jaGFydC9jYXNlMT90YWJsZV9uYW1lPSR7bGluZTFbMF19JnRhYmxlX25hbWVfb3RoZXJzPSR7bGluZTFbMV19JnN5bWJvbD0ke2xpbmUxWzJdfSZtb2RlPSR7bW9kZX0md2lkdGg9JHttdWx0aVRpbWVTZXJpZXNPYmoud2lkdGh9JmhlaWdodD0ke211bHRpVGltZVNlcmllc09iai5oZWlnaHR9JnN0YXJ0VGltZT0ke211bHRpVGltZVNlcmllc09iai50aW1lUmFuZ2VbMF19JmVuZFRpbWU9JHttdWx0aVRpbWVTZXJpZXNPYmoudGltZVJhbmdlWzFdfSZpbnRlcmFjdF90eXBlPSR7dHlwZX0mZXhwZXJpbWVudD0ke2xpbmUxWzNdfSZwYXJhbGxlbD0ke3BhcmFsbGVsfSZlcnJvckJvdW5kPSR7ZXJyb3JCb3VuZH1gOwogICAgLy8gY29uc3Qgc2hvd0NvbHVtbnMgPSBhd2FpdCBnZXQoY29tYmluZWRVcmwpOwogICAgLy8gbXVsdGlUaW1lU2VyaWVzT2JqLmNvbHVtbkluZm9zID0gc2hvd0NvbHVtbnM7CiAgICAvLyBkcmF3KCk7CiAgfQogIGFzeW5jIGZ1bmN0aW9uIHpvb21Jbih0aW1lUmFuZ2UpIHsKICAgIC8vdGltZWJveFN0YWNrID0gW107CiAgICBjb25zdCBjdXJyZW50TGV2ZWwgPSBtdWx0aVRpbWVTZXJpZXNPYmouY3VycmVudExldmVsOwogICAgbXVsdGlUaW1lU2VyaWVzT2JqLmN1cnJlbnRMZXZlbCA9IDEwOyAvL2N1cnJlbnRMZXZlbCArIDEKICAgIGNvbnN0IHdpZHRoID0gbXVsdGlUaW1lU2VyaWVzT2JqLndpZHRoOwogICAgbXVsdGlUaW1lU2VyaWVzT2JqLnRpbWVSYW5nZVsxXSA9IHRpbWVSYW5nZVsxXTsgLy9NYXRoLmZsb29yKG11bHRpVGltZVNlcmllc09iai50aW1lUmFuZ2VbMV0gLyAyKTsKICAgIG11bHRpVGltZVNlcmllc09iai50aW1lUmFuZ2VbMF0gPSB0aW1lUmFuZ2VbMF07CiAgICBpZiAoY3VycmVudExldmVsICsgMSA+PSBtdWx0aVRpbWVTZXJpZXNPYmoubWF4TGV2ZWwgLSAxKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGNvbnN0IG5lZWRMb2FkTGV2ZWwgPSAyICoqIE1hdGguY2VpbChNYXRoLmxvZzIod2lkdGgpKTsKICAgIGNvbnNvbGUubG9nKCJ6b29tSW4uLi4uIik7CiAgICBsZXQgbW9kZSA9ICJzaG93IjsKICAgIGxldCB0eXBlID0gIiI7CiAgICBsZXQgcGFyYWxsZWwgPSAwOwogICAgbGV0IGVycm9yQm91bmQgPSAwOwogICAgbGV0IGxpbmUxID0gbXVsdGlUaW1lU2VyaWVzT2JqLmxpbmUxOwogICAgY29uc3QgY29tYmluZWRVcmwgPSBgL2xpbmVfY2hhcnQvY2FzZTE/dGFibGVfbmFtZT0ke2xpbmUxWzBdfSZ0YWJsZV9uYW1lX290aGVycz0ke2xpbmUxWzFdfSZzeW1ib2w9JHtsaW5lMVsyXX0mbW9kZT0ke21vZGV9JndpZHRoPSR7bXVsdGlUaW1lU2VyaWVzT2JqLndpZHRofSZoZWlnaHQ9JHttdWx0aVRpbWVTZXJpZXNPYmouaGVpZ2h0fSZzdGFydFRpbWU9JHttdWx0aVRpbWVTZXJpZXNPYmoudGltZVJhbmdlWzBdfSZlbmRUaW1lPSR7bXVsdGlUaW1lU2VyaWVzT2JqLnRpbWVSYW5nZVsxXX0maW50ZXJhY3RfdHlwZT0ke3R5cGV9JmV4cGVyaW1lbnQ9JHtsaW5lMVszXX0mcGFyYWxsZWw9JHtwYXJhbGxlbH0mZXJyb3JCb3VuZD0ke2Vycm9yQm91bmR9YDsKICAgIGNvbnN0IHNob3dDb2x1bW5zID0gYXdhaXQgZ2V0KGNvbWJpbmVkVXJsKTsKICAgIG11bHRpVGltZVNlcmllc09iai5jb2x1bW5JbmZvcyA9IHNob3dDb2x1bW5zOwogICAgZHJhdygpOwogIH0KICAvL0B0cy1pZ25vcmUKICBhc3luYyBmdW5jdGlvbiBicnVzaGVkKHsKICAgIHNlbGVjdGlvbgogIH0pIHsKICAgIGlmICghaXNJbml0KSB7CiAgICAgIGlzSW5pdCA9IHRydWU7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmIChpc1Jlc2l6aW5nKSB7CiAgICAgIGlzUmViYWNraW5nID0gZmFsc2U7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmIChpc1JlYmFja2luZykgewogICAgICBpc1JlYmFja2luZyA9IGZhbHNlOwogICAgICByZXR1cm47CiAgICB9CiAgICBjb25zdCB0aW1lUmFuZ2UgPSBbTWF0aC5mbG9vcih4UmVTY2FsZShzZWxlY3Rpb25bMF0pKSwgTWF0aC5mbG9vcih4UmVTY2FsZShzZWxlY3Rpb25bMV0pKV07CiAgICBpZiAodGltZVJhbmdlWzBdIDwgMCkgewogICAgICB0aW1lUmFuZ2VbMF0gPSAwOwogICAgfQogICAgaWYgKHRpbWVSYW5nZVsxXSA+IG5vZGVJbmRleFJhbmdlWzFdKSB7CiAgICAgIHRpbWVSYW5nZVsxXSA9IG5vZGVJbmRleFJhbmdlWzFdOwogICAgfQogICAgY29uc3QgaW50ZXJJbmZvID0gbmV3IEludGVyYWN0aW9uSW5mbygiem9vbSIpOwogICAgaW50ZXJJbmZvLnNldFJhbmdlVyhtdWx0aVRpbWVTZXJpZXNPYmoudGltZVJhbmdlLCBtdWx0aVRpbWVTZXJpZXNPYmoud2lkdGgsIG11bHRpVGltZVNlcmllc09iai5jdXJyZW50TGV2ZWwpOwogICAgaW50ZXJhY3Rpb25TdGFjay5wdXNoKGludGVySW5mbyk7CiAgICB6b29tSW4oW3RpbWVSYW5nZVswXSwgdGltZVJhbmdlWzFdXSk7CiAgfQogIGxldCB0aW1lYm94U3RhY2sgPSBbXTsKICAvL0B0cy1pZ25vcmUKICBmdW5jdGlvbiB0aW1lQm94QnJ1c2hlZCh7CiAgICBzZWxlY3Rpb24KICB9KSB7CiAgICBpZiAoc2VsZWN0aW9uID09PSBudWxsKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGNvbnN0IGxhc3RSZXMgPSBbXTsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbXVsdGlUaW1lU2VyaWVzT2JqLmNvbHVtbkluZm9zLmxlbmd0aDsgaSsrKSB7CiAgICAgIGxhc3RSZXMucHVzaChtdWx0aVRpbWVTZXJpZXNPYmouaXNTaG93W2ldKTsKICAgIH0KICAgIC8vaWYoaW50ZXJhY3Rpb25TdGFja1tpbnRlcmFjdGlvblN0YWNrLmxlbmd0aC0xXS50eXBlPT09J3RpbWVib3gnKQogICAgY29uc3QgdGltZUJveFN0YXJ0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgY29uc3QgaW50ZXJJbmZvID0gbmV3IEludGVyYWN0aW9uSW5mbygidGltZWJveCIpOwogICAgaW50ZXJJbmZvLnNldFNob3dJbmZvKGxhc3RSZXMpOwogICAgaW50ZXJhY3Rpb25TdGFjay5wdXNoKGludGVySW5mbyk7CiAgICAvLyBjb25zb2xlLmxvZyhzZWxlY3Rpb24pOwogICAgY29uc3Qgc3RhcnRYID0gc2VsZWN0aW9uWzBdWzBdIC0gNDA7CiAgICBjb25zdCBlbmRYID0gc2VsZWN0aW9uWzFdWzBdIC0gNDA7CiAgICAvLyBjb25zb2xlLmxvZyhzaG93VGltZVhTY2FsZS5pbnZlcnQoc3RhcnRYKSk7CiAgICAvLyBjb25zb2xlLmxvZyhzaG93VGltZVhTY2FsZS5pbnZlcnQoZW5kWCkpOwogICAgY29uc3Qgdk1pblkgPSBzZWxlY3Rpb25bMV1bMV0gLSAyMDsKICAgIGNvbnN0IHZNYXhZID0gc2VsZWN0aW9uWzBdWzFdIC0gMjA7CiAgICBjb25zdCB2TWluID0geVNjYWxlLmludmVydCh2TWluWSk7CiAgICBjb25zdCB2TWF4ID0geVNjYWxlLmludmVydCh2TWF4WSk7CiAgICBjb25zdCBhbGxDb2x1bW5JbmZvcyA9IG11bHRpVGltZVNlcmllc09iai5jb2x1bW5JbmZvczsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxsQ29sdW1uSW5mb3MubGVuZ3RoOyBpKyspIHsKICAgICAgbGV0IGlzQ2hvb3NlID0gbXVsdGlUaW1lU2VyaWVzT2JqLmlzU2hvd1tpXTsKICAgICAgZm9yIChsZXQgaiA9IE1hdGguZmxvb3Ioc3RhcnRYKTsgaiA8PSBNYXRoLmZsb29yKGVuZFgpOyBqKyspIHsKICAgICAgICBpc0Nob29zZSA9IGlzQ2hvb3NlICYmIGFsbENvbHVtbkluZm9zW2ldW2pdLm1pbiA+PSB2TWluICYmIGFsbENvbHVtbkluZm9zW2ldW2pdLm1heCA8PSB2TWF4OwogICAgICB9CiAgICAgIG11bHRpVGltZVNlcmllc09iai5pc1Nob3dbaV0gPSBmYWxzZTsKICAgICAgaWYgKGlzQ2hvb3NlKSB7CiAgICAgICAgbXVsdGlUaW1lU2VyaWVzT2JqLmlzU2hvd1tpXSA9IHRydWU7CiAgICAgICAgLy9jb25zb2xlLmxvZyhtdWx0aVRpbWVTZXJpZXNPYmouZGF0YU1hbmFnZXJzW2ldLmRhdGFOYW1lKTsKICAgICAgfQogICAgICAvLyBtdWx0aVRpbWVTZXJpZXNPYmouaXNTaG93W2ldID0gZmFsc2U7CiAgICB9CiAgICBsZXQgbWluViA9IEluZmluaXR5OwogICAgbGV0IG1heFYgPSAtSW5maW5pdHk7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbENvbHVtbkluZm9zLmxlbmd0aDsgaSsrKSB7CiAgICAgIGlmIChtdWx0aVRpbWVTZXJpZXNPYmouaXNTaG93W2ldKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPD0gYWxsQ29sdW1uSW5mb3NbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIG1pblYgPSBNYXRoLm1pbihtaW5WLCBhbGxDb2x1bW5JbmZvc1tpXVtqXSA/IGFsbENvbHVtbkluZm9zW2ldW2pdLnZSYW5nZVswXSA6IG1pblYpOwogICAgICAgICAgbWF4ViA9IE1hdGgubWF4KG1heFYsIGFsbENvbHVtbkluZm9zW2ldW2pdID8gYWxsQ29sdW1uSW5mb3NbaV1bal0udlJhbmdlWzFdIDogbWF4Vik7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvLyBtdWx0aVRpbWVTZXJpZXNPYmoubWF4diA9IC0xMDsKICAgIC8vIG11bHRpVGltZVNlcmllc09iai5taW52ID0gMTAKICAgIGRyYXcoKTsKICAgIC8vem9vbUluKFt0aW1lUmFuZ2VTY2FsZSgxNDkzNzQwODQ1MDAwKSx0aW1lUmFuZ2VTY2FsZSgxNDkzODA1MzE0MDAwKV0pCiAgfQogIGxldCBpc01vdXNlb3ZlciA9IGZhbHNlOwogIGxldCBzdGFydE9mZnNldFggPSAwOwogIGNvbnN0IGRyYWdSZWN0ID0gc3ZnLmFwcGVuZCgicmVjdCIpLmF0dHIoIngiLCAwKS5hdHRyKCJ5IiwgMCkuYXR0cigiaGVpZ2h0IiwgbXVsdGlUaW1lU2VyaWVzT2JqLmhlaWdodCArIHBhZGluZy50b3AgKyBwYWRpbmcuYm90dG9tKS5hdHRyKCJ3aWR0aCIsIG11bHRpVGltZVNlcmllc09iai53aWR0aCArIHBhZGluZy5sZWZ0ICsgcGFkaW5nLnJpZ2h0KS5hdHRyKCJzdHJva2UiLCAiYmxhY2siKS5hdHRyKCJzdHJva2Utd2lkdGgiLCA0KS5hdHRyKCJmaWxsIiwgIm5vbmUiKS5vbigibW91c2VvdmVyIiwgKCkgPT4gewogICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSAnZXctcmVzaXplJzsKICAgIGlzTW91c2VvdmVyID0gdHJ1ZTsKICB9KS5vbigibW91c2Vkb3duIiwgZSA9PiB7CiAgICBpZiAoaXNNb3VzZW92ZXIpIHsKICAgICAgc3RhcnRPZmZzZXRYID0gZS5vZmZzZXRYOwogICAgICBpbnRlcmFjdGl2ZUluZm8uaXNNb3VzZURvd24gPSB0cnVlOwogICAgfQogIH0pLm9uKCJtb3VzZXVwIiwgKCkgPT4gewogICAgY29uc29sZS5sb2coKTsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzA7IGkrKykgewogICAgICBtdWx0aVRpbWVTZXJpZXNPYmouaXNTaG93W2ldID0gdHJ1ZTsKICAgIH0KICB9KS5vbigibW91c2Vtb3ZlIiwgZSA9PiB7CiAgICBpZiAoaW50ZXJhY3RpdmVJbmZvLmlzTW91c2VEb3duKSB7CiAgICAgIHN2Zy5hdHRyKCJ3aWR0aCIsIG11bHRpVGltZVNlcmllc09iai53aWR0aCArIHBhZGluZy5yaWdodCArIHBhZGluZy5sZWZ0ICsgKGUub2Zmc2V0WCAtIHN0YXJ0T2Zmc2V0WCkpOwogICAgICBkcmFnUmVjdC5hdHRyKCJ3aWR0aCIsIG11bHRpVGltZVNlcmllc09iai53aWR0aCArIHBhZGluZy5yaWdodCArIHBhZGluZy5sZWZ0ICsgKGUub2Zmc2V0WCAtIHN0YXJ0T2Zmc2V0WCkpOwogICAgfQogIH0pLm9uKCJtb3VzZWxlYXZlIiwgKCkgPT4gewogICAgaWYgKCFpbnRlcmFjdGl2ZUluZm8uaXNNb3VzZURvd24pIHsKICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCc7CiAgICB9CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDMwOyBpKyspIHsKICAgICAgbXVsdGlUaW1lU2VyaWVzT2JqLmlzU2hvd1tpXSA9IHRydWU7CiAgICB9CiAgfSk7CiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNvbnRlbnQtY29udGFpbmVyIikuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIiwgZSA9PiB7CiAgICBpZiAoaW50ZXJhY3RpdmVJbmZvLmlzTW91c2VEb3duKSB7CiAgICAgIHN2Zy5hdHRyKCJ3aWR0aCIsIG11bHRpVGltZVNlcmllc09iai53aWR0aCArIHBhZGluZy5yaWdodCArIHBhZGluZy5sZWZ0ICsgKGUub2Zmc2V0WCAtIHN0YXJ0T2Zmc2V0WCkpOwogICAgICBkcmFnUmVjdC5hdHRyKCJ3aWR0aCIsIG11bHRpVGltZVNlcmllc09iai53aWR0aCArIHBhZGluZy5yaWdodCArIHBhZGluZy5sZWZ0ICsgKGUub2Zmc2V0WCAtIHN0YXJ0T2Zmc2V0WCkpOwogICAgfQogIH0pOwogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjb250ZW50LWNvbnRhaW5lciIpLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLCBlID0+IHsKICAgIGlmIChpbnRlcmFjdGl2ZUluZm8uaXNNb3VzZURvd24pIHsKICAgICAgaW50ZXJhY3RpdmVJbmZvLmlzTW91c2VEb3duID0gZmFsc2U7CiAgICAgIGlzTW91c2VvdmVyID0gZmFsc2U7CiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gJ2RlZmF1bHQnOwogICAgICBsZXQgcHJlV2lkdGggPSBtdWx0aVRpbWVTZXJpZXNPYmoud2lkdGg7CiAgICAgIG11bHRpVGltZVNlcmllc09iai53aWR0aCA9IG11bHRpVGltZVNlcmllc09iai53aWR0aCArIChlLm9mZnNldFggLSBzdGFydE9mZnNldFgpOwogICAgICBpZiAobXVsdGlUaW1lU2VyaWVzT2JqLndpZHRoID09PSBwcmVXaWR0aCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCBpbnRlckluZm8gPSBuZXcgSW50ZXJhY3Rpb25JbmZvKCJyZXNpemUiKTsKICAgICAgaW50ZXJJbmZvLnNldFJhbmdlVyhtdWx0aVRpbWVTZXJpZXNPYmoudGltZVJhbmdlLCBtdWx0aVRpbWVTZXJpZXNPYmoud2lkdGgsIG11bHRpVGltZVNlcmllc09iai5jdXJyZW50TGV2ZWwpOwogICAgICBpbnRlcmFjdGlvblN0YWNrLnB1c2goaW50ZXJJbmZvKTsKICAgICAgcmVzaXplVyhtdWx0aVRpbWVTZXJpZXNPYmoud2lkdGgpOwogICAgfQogICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzMDsgaSsrKSB7CiAgICAgIG11bHRpVGltZVNlcmllc09iai5pc1Nob3dbaV0gPSB0cnVlOwogICAgfQogIH0pOwogIHN2Zy5vbigiY29udGV4dG1lbnUiLCBlID0+IHsKICAgIGlmIChpbnRlcmFjdGlvblN0YWNrLmxlbmd0aCA+IDApIHsKICAgICAgY29uc3QgaW50ZXJJbmZvID0gaW50ZXJhY3Rpb25TdGFjay5wb3AoKTsKICAgICAgaWYgKChpbnRlckluZm8gPT09IG51bGwgfHwgaW50ZXJJbmZvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpbnRlckluZm8udHlwZSkgPT09ICd0aW1lYm94JykgewogICAgICAgIGNvbnN0IGN1clN0YXRzID0gaW50ZXJJbmZvLnNob3dJbmZvOwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbXVsdGlUaW1lU2VyaWVzT2JqLmNvbHVtbkluZm9zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBtdWx0aVRpbWVTZXJpZXNPYmouaXNTaG93W2ldID0gY3VyU3RhdHNbaV07CiAgICAgICAgfQogICAgICAgIGRyYXcoKTsKICAgICAgfSBlbHNlIGlmICgoaW50ZXJJbmZvID09PSBudWxsIHx8IGludGVySW5mbyA9PT0gdm9pZCAwID8gdm9pZCAwIDogaW50ZXJJbmZvLnR5cGUpID09PSAncmVzaXplJykgewogICAgICAgIHJlc2l6ZVcoaW50ZXJJbmZvLndpZHRoKTsKICAgICAgfSBlbHNlIGlmICgoaW50ZXJJbmZvID09PSBudWxsIHx8IGludGVySW5mbyA9PT0gdm9pZCAwID8gdm9pZCAwIDogaW50ZXJJbmZvLnR5cGUpID09PSAnem9vbScpIHsKICAgICAgICBpc1JlYmFja2luZyA9IHRydWU7CiAgICAgICAgem9vbUluKGludGVySW5mby50aW1lUmFuZ2UpOwogICAgICB9CiAgICB9CiAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogIH0pOwogIGxldCBpID0gMDsKICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBlID0+IHsKICAgIGNvbnNvbGUubG9nKDEpOwogIH0pOwogIGRyYXcoKTsKfQpmdW5jdGlvbiBjb21wdXRlTWluTWF4KG11bHRpVGltZVNlcmllc09iaikgewogIGxldCBtaW4gPSBJbmZpbml0eTsKICBsZXQgbWF4ID0gLUluZmluaXR5OwogIC8vIGZvciAobGV0IGkgPSAwOyBpIDwgbXVsdGlUaW1lU2VyaWVzT2JqLmNvbHVtbkluZm9zLmxlbmd0aDsgaSsrKSB7CiAgLy8gICAgIGlmIChtdWx0aVRpbWVTZXJpZXNPYmouaXNTaG93W2ldKSB7CiAgLy8gICAgICAgICBjb25zdCBjb2x1bUluZm8gPSBtdWx0aVRpbWVTZXJpZXNPYmouY29sdW1uSW5mb3NbaV07CiAgLy8gICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNvbHVtSW5mby5sZW5ndGg7IGorKykgewogIC8vICAgICAgICAgICAgIGlmIChjb2x1bUluZm9bal0udlJhbmdlWzBdIDwgbWluKSB7CiAgLy8gICAgICAgICAgICAgICAgIG1pbiA9IGNvbHVtSW5mb1tqXS52UmFuZ2VbMF07CiAgLy8gICAgICAgICAgICAgfQogIC8vICAgICAgICAgICAgIGlmIChjb2x1bUluZm9bal0udlJhbmdlWzFdID4gbWF4KSB7CiAgLy8gICAgICAgICAgICAgICAgIG1heCA9IGNvbHVtSW5mb1tqXS52UmFuZ2VbMV07CiAgLy8gICAgICAgICAgICAgfQogIC8vICAgICAgICAgfQogIC8vICAgICB9IGVsc2UgewogIC8vICAgICAgICAgLy8gY29uc29sZS5sb2cobXVsdGlUaW1lU2VyaWVzT2JqLmRhdGFNYW5hZ2Vyc1tpXS5kYXRhTmFtZSkKICAvLyAgICAgfQogIC8vIH0KICBtaW4gPSAtMjAwMCwgbWF4ID0gMjAwMDsKICByZXR1cm4gewogICAgbWluLAogICAgbWF4CiAgfTsKfQpmdW5jdGlvbiBzYXZlUE5HKGNhbnZhcykgewogIGNvbnN0IGltZ1VSTCA9IGNhbnZhcy50b0RhdGFVUkwoIi4vaW1hZ2UvcG5nIik7CiAgY29uc3QgZGxMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogIGRsTGluay5kb3dubG9hZCA9IGAxYl96b29tX2luaXRgOwogIGRsTGluay5ocmVmID0gaW1nVVJMOwogIGRsTGluay5kYXRhc2V0LmRvd25sb2FkdXJsID0gWyIuL2ltYWdlL3BuZyIsIGRsTGluay5kb3dubG9hZCwgZGxMaW5rLmhyZWZdLmpvaW4oIjoiKTsKICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRsTGluayk7CiAgZGxMaW5rLmNsaWNrKCk7CiAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChkbExpbmspOwp9Ci8vIGxldCBzaG93TnVtID0gMDsKLy8gZm9yIChsZXQgaSA9IDA7IGkgPCBtdWx0aVRpbWVTZXJpZXNPYmouY29sdW1uSW5mb3MubGVuZ3RoOyBpKyspIHsKLy8gICAgIGNvbnN0IGRhdGFNYW5hZ2VyID0gbXVsdGlUaW1lU2VyaWVzT2JqLmNvbHVtbkluZm9zW2ldOwovLyAgICAgaWYgKGRhdGFNYW5hZ2VyLmlzU2hvdykgewovLyAgICAgICAgIGlmIChzdG9yZS5zdGF0ZS5jb250cm9sUGFyYW1zLmN1cnJlbnRNb2RlID09PSAnRGVmYXVsdCcpIHsKLy8gICAgICAgICAgICAgbGV0IG5hbWVTdHJzID0gZGF0YU1hbmFnZXIuZGF0YU5hbWUuc3BsaXQoIi4iKVsxXS5zcGxpdCgiXyIpCi8vICAgICAgICAgICAgIGlmIChuYW1lU3Ryc1sxXVtuYW1lU3Ryc1sxXS5sZW5ndGggLSAxXSAhPT0gJ3InKSB7Ci8vICAgICAgICAgICAgICAgICBuYW1lU3Ryc1sxXSA9IG5hbWVTdHJzWzFdICsgJ3InOwovLyAgICAgICAgICAgICB9Ci8vICAgICAgICAgICAgIGlmICghbmFtZWRNYXAuaGFzKG5hbWVTdHJzWzFdKSkgewovLyAgICAgICAgICAgICAgICAgZGF0YU1hbmFnZXIuaXNTaG93ID0gZmFsc2U7Ci8vICAgICAgICAgICAgICAgICBjb250aW51ZQovLyAgICAgICAgICAgICB9Ci8vICAgICAgICAgICAgIHNob3dOdW0rKzsKLy8gICAgICAgICB9IGVsc2UgewovLyAgICAgICAgICAgICBsZXQgbmFtZVN0cnMgPSBkYXRhTWFuYWdlci5kYXRhTmFtZS5zcGxpdCgiLiIpWzFdLnNwbGl0KCJfIik7Ci8vICAgICAgICAgICAgIGxldCBzaG93TmFtZSA9IG5hbWVTdHJzWzFdCi8vICAgICAgICAgICAgIGZvciAobGV0IGkgPSAyOyBpIDwgbmFtZVN0cnMubGVuZ3RoIC0gMjsgaSsrKSB7Ci8vICAgICAgICAgICAgICAgICBzaG93TmFtZSA9IHNob3dOYW1lICsgIl8iICsgbmFtZVN0cnNbaV07Ci8vICAgICAgICAgICAgIH0KLy8gICAgICAgICAgICAgY29uc3Qgc2hvd0NvbG9yID0gY29sb3JBcnJheVtkYXRhTWFuYWdlci5tZDVOdW0hICUgNDZdOwovLyAgICAgICAgICAgICBzaG93TnVtKys7Ci8vICAgICAgICAgfQovLyAgICAgfQovLyB9"},{"version":3,"names":["d3","axios","nameMap","namedMap","Map","i","length","key","Object","keys","set","get","url","data","InteractionInfo","constructor","type","showInfo","timeRange","width","level","setShowInfo","setRangeW","interactionStack","drawMultiTimeSeries","multiTimeSeriesObj","_document$getElementB","svgElement","document","getElementById","remove","realTimeStampRange","startTimeStamp","endTimeStamp","console","log","nodeIndexRange","rowNumber","columnInfos","et","isInit","isResizing","isRebacking","interactiveInfo","startX","startY","offsetX","offsetY","isMouseDown","isMove","pading","top","bottom","left","right","svg","select","append","attr","height","style","foreignId","Math","random","foreigG","foreignObj","canvas","createElement","__data__","appendChild","ctx","getContext","colorArray1","colorNames","colorMap","forEach","name","index","indexToTimeStampScale","scaleLinear","domain","range","xScale","scaleTime","showTimeXScale","Date","yScale","minv","maxv","xReScale","showXTimeScale","zoomAxis","axisBottom","yAxis","axisLeft","xAxis","yReScale","timeBrushObj","brushX","extent","timeBoxBrushObj","brush","on","timeBoxBrushed","brushed","timeBoxG","call","move","zoomAxisG","xAxisG","yAxisG","updateCanvasWidth","tempReScale","lengendG","drawLengend","leftOffset","colorArray","columnsColor","color","label","text","draw","_ctx","undefined","floor","clearRect","isShow","_ctx2","_ctx11","beginPath","line1","strokeStyle","lineWidth","nonUniformColObjs","interval","st","wholeInterval","j","_ctx3","_ctx4","_ctx5","_ctx6","_ctx7","_ctx8","moveTo","sv","lineTo","min","max","ev","_ctx9","_ctx10","stroke","resizeW","currentLevel","maxLevel","zoomIn","needLoadLevel","ceil","log2","mode","parallel","errorBound","combinedUrl","showColumns","selection","interInfo","push","timeboxStack","lastRes","timeBoxStartTime","getTime","endX","vMinY","vMaxY","vMin","invert","vMax","allColumnInfos","isChoose","minV","Infinity","maxV","vRange","isMouseover","startOffsetX","dragRect","body","cursor","e","addEventListener","preWidth","pop","curStats","preventDefault","stopPropagation","computeMinMax","savePNG","imgURL","toDataURL","dlLink","download","href","dataset","downloadurl","join","click","removeChild"],"sources":["/Users/bao/Downloads/VOCA/voca-client/node_modules/eslint-loader/index.js??ref--14-0!/Users/bao/Downloads/VOCA/voca-client/src/application/multi-interaction.ts"],"sourcesContent":["import { formatNonPowDataForViewChange } from \"@/helper/format-data\";\nimport  NoUniformColObj  from \"@/model/non-uniform-col-obj\";\nimport store, { MultiTimeSeriesObj } from \"@/store\";\nimport * as d3 from 'd3';\nimport axios from \"axios\";\n// import { batchViewChange, batchGetData } from \"../batch/m5batch\";\n\nlet nameMap: any = [\n    //green\n    {\n        \"marutisktr\": \"汽车-#0e7735\"\n    },\n    {\n        \"tatamotorssktr\": \"汽车-#329a51\"\n    },\n    {\n        \"eichermotsktr\": \"汽车-#60ba6c\"\n    },\n    {\n        \"heromotocosktr\": \"摩托-#94d391\"\n    },\n    {\n        \"mmsktr\": \"汽车-#c0e6ba\"\n    },\n    //oranges\n    // {\n    //     \"bajfinancesktr\": \"金融-#b93d02\"\n    // },\n    {\n        \"axisbanksktr\": \"金融-#d14904\"\n    },\n    {\n        \"indusindbksktr\": \"金融-#e4580b\"\n    },\n    // {\n    //     \"bajajfinsvsktr\": \"金融-#f87f2c\"\n    // },\n    {\n        \"kotakbanksktr\": \"金融-#fda55e\"\n    },\n\n\n    //color\n    {\n        \"sbinsktr\": \"银行-#353535\"\n    },\n    {\n        \"icicibanksktr\": \"银行-#4d4d4d\"\n    },\n    {\n        \"hdfcsktr\": \"银行-#626262\"\n    },\n    {\n        \"hdfcbanksktr\": \"银行-#757575\"\n    },\n    //blue\n    {\n        \"infysktr\": \"信息-#125ca4\"\n    },\n    {\n        \"techmsktr\": \"信息-#3181bd\"\n    },\n    {\n        \"hcltechsktr\": \"信息-#5ba3cf\"\n    },\n    {\n        \"tcssktr\": \"信息-#8fc1de\"\n    },\n    //purples\n    {\n        \"coalindiasktr\": \"煤炭-#5c3696\"\n    },\n    {\n        \"ongcsktr\": \"石油气-#684ea2\"\n    },\n    {\n        \"iocsktr\": \"石油气-#7566ae\"\n    },\n    {\n        \"bpclsktr\": \"石油-#827cb9\"\n    },\n    {\n        \"powergridsktr\": \"电网-#928ec3\"\n    },\n    {\n        \"ntpcsktr\": \"光伏-#a3a0cc\"\n    },\n\n    //red\n    {\n        \"britanniasktr\": \"食品-#b21218\"\n    },\n    {\n        \"nestleindsktr\": \"雀巢-#dc2a25\"\n    },\n    {\n        \"tataconsumsktr\": \"饮料-#f6573f\"\n    },\n    //teals \n    {\n        \"drreddysktr\": \"制药-#127273\"\n    },\n    {\n        \"sunpharmasktr\": \"制药-#2b8b8c\"\n    },\n    {\n        \"divislabsktr\": \"制药-#4da5a4\"\n    },\n    //greys\n    {\n        \"jswsteelsktr\": \"钢铁-#353535\"\n    },\n    {\n        \"tatasteelsktr\": \"钢铁-#4d4d4d\"\n    },\n    {\n        \"ltsktr\": \"工程建筑-#626262\"\n    },\n    {\n        \"uplsktr\": \"农药-#757575\"\n    },\n    {\n        \"reliancesktr\": \"信实工业-#888888\"\n    },\n    {\n        \"grasimsktr\": \"纺织-#9d9d9d\"\n    },\n    //warmgreys\n    {\n        \"ultracemcosktr\": \"水泥-#665c5a\"\n    },\n    {\n        \"shreecemsktr\": \"水泥-#7e7673\"\n    },\n    {\n        \"asianpaintsktr\": \"涂料-#98908c\"\n    },\n    {\n        \"hindalcosktr\": \"铝铜-#b3aaa7\"\n    },\n\n\n    {\n        \"itcsktr\": \"贸易-#d8b5a5\"\n    },\n    {\n        \"adaniportssktr\": \"港口运营-#fcbfd2\"\n    },\n    {\n        \"titansktr\": \"珠宝-#ffbf79\"\n    },\n    {\n        \"hindunilvrsktr\": \"联合利华-#d9d9d9\"\n    },\n\n\n\n]\nlet namedMap = new Map<any, any>()\nfor (let i = 0; i < nameMap.length; i++) {\n    const key = Object.keys(nameMap[i])[0];\n    namedMap.set(key, nameMap[i][key])\n}\n\nasync function get(url: string) {\n    url = 'postgres' + url;\n    //const loading = openLoading();\n    const { data } = await axios.get(url);\n    //loading.close();\n    return data;\n}\n\nclass InteractionInfo {\n    type: string\n    showInfo: Array<boolean>\n    timeRange: Array<number>\n    width: number\n    level: number\n    constructor(type: string) {\n        this.type = type;\n        this.showInfo = [];\n        this.timeRange = [];\n        this.width = 0;\n        this.level = 0;\n    }\n    setShowInfo(showInfo: Array<boolean>) {\n        this.showInfo = showInfo;\n    }\n    setRangeW(timeRange: Array<number>, width: number, level: number) {\n        this.timeRange = [timeRange[0], timeRange[1]];\n        this.width = width;\n        this.level = level;\n    }\n\n}\n\nlet interactionStack: Array<InteractionInfo> = [];\n\nexport function drawMultiTimeSeries(multiTimeSeriesObj: MultiTimeSeriesObj) {\n\n    const svgElement = document.getElementById('my_svg'); \n    if(svgElement){ \n        svgElement.remove(); \n    }\n\n    let realTimeStampRange: Array<number> = [multiTimeSeriesObj.startTimeStamp, multiTimeSeriesObj.endTimeStamp];\n    console.log(\"realTimeStamp:\", realTimeStampRange);\n    let nodeIndexRange: Array<number> = [multiTimeSeriesObj.timeRange[0], multiTimeSeriesObj.timeRange[1]]\n    let rowNumber = multiTimeSeriesObj.columnInfos[0][multiTimeSeriesObj.columnInfos[0].length-1].et;\n    let isInit = false;\n    let isResizing = false;\n    let isRebacking = false;\n    let interactiveInfo = {\n        startX: 0,\n        startY: 0,\n        offsetX: 0,\n        offsetY: 0,\n        isMouseDown: false,\n        isMove: false,\n    };\n    //const pading = { top: 20, bottom: 80, left: 45, right: 250 };\n    const pading = { top: 20, bottom: 80, left: 70, right: 20 };\n    const svg = d3.select(\"#content-container\").append(\"svg\");\n    svg\n        .attr(\"width\", multiTimeSeriesObj.width + pading.left + pading.right)\n        .attr(\"height\", multiTimeSeriesObj.height + pading.top + pading.bottom)\n        .attr(\"transform\", `translate(${20},${20})`)\n        .style(\"background-color\", \"#fff\")\n        .attr(\"id\",\"my_svg\"); \n\n    const foreignId = `foreign${multiTimeSeriesObj.width + Math.random()}`;\n    const foreigG = svg.append(\"g\").attr(\"transfrom\", `translate(${pading.left},${pading.top})`)\n    let foreignObj: any = foreigG.append(\"foreignObject\").attr(\"id\", foreignId).attr(\"x\", pading.left).attr(\"y\", pading.top).attr('width', multiTimeSeriesObj.width).attr('height', multiTimeSeriesObj.height);\n    const canvas = document.createElement(\"canvas\");\n    (canvas as any).__data__ = {}\n    document.getElementById(foreignId)?.appendChild(canvas);\n    canvas.width = multiTimeSeriesObj.width;\n    canvas.height = multiTimeSeriesObj.height;\n    let ctx = canvas.getContext(\"2d\");\n\n    // const colorArray1 = [\"#b3de69\", \"#f2f122\", \"#2403db\", \"#ffbb78\", \"#f608e8\", \"#00ee21\", \"#8dd3c7\", \"#170b11\", \"#0ae9fe\" , \"#f2f122\", \"#ec030f\", \"#07ffed\", \"#2ca02c\", \"#98df8a\", \"#d62728\", \"#ff9896\", \"#9467bd\", \"#c5b0d5\", \"#8c564b\", \"#c49c94\", \"#e377c2\", \"#f7b6d2\", \"#7f7f7f\", \"#c7c7c7\", \"#bcbd22\", \"#dbdb8d\", \"#17becf\", \"#9edae5\", \"#393b79\", \"#5254a3\", \"#6b6ecf\", \"#9c9ede\", \"#637939\", \"#8ca252\", \"#b5cf6b\", \"#cedb9c\", \"#8c6d31\", \"#bd9e39\", \"#e7ba52\", \"#843c39\", \"#ad494a\", \"#d6616b\", \"#e7969c\", \"#7b4173\", \"#a55194\", \"#ce6dbd\", \"#de9ed6\"];\n    // const keys = colorArray1.map((_, index) => `v${index + 1}`);\n    // // 生成 Map 对象\n    // const colorMap = new Map(keys.map((key, index) => [key, colorArray1[index]]));\n    // console.log(colorMap);\n\n\n//     V7-NYC_2015-2023_Bronx_green_minute.csv：#F28E2B\n    // V9-NYC_2015-2023_Bronx_yellow_minute.csv：#FFBE7D\n    // V1-NYC_2015-2023_Brooklyn_green_minute.csv：#B07AA1\n    // V5- NYC_2015-2023_Brooklyn_yellow_minute.csv：#D4A6C8\n    // V4- NYC_2015-2023_Manhattan_green_minute.csv：#4E79A7\n    // V10- NYC_2015-2023_Manhattan_yellow_minute.csv：#A0CBE8\n    // V11- NYC_2015-2023_Queens_green_minute.csv：#E15759\n    // V3-NYC_2015-2023_Queens_yellow_minute.csv：#FF9D9A\n    // V2-'NYC_2015-2023_Staten Island_green_minute.csv'：#59A14F\n    // V6-'NYC_2015-2023_Staten Island_yellow_minute.csv'：#8CD17D\n    \n    const colorArray1 = [\"#B07AA1\", \"#59A14F\", \"#FF9D9A\", \"#4E79A7\", \"#D4A6C8\", \"#8CD17D\", \"#F28E2B\", \"#FFBE7D\", \"#A0CBE8\", \"#E15759\"];\n    // const colorArray1 = [\"#b3de69\", \"#f2f122\", \"#2403db\", \"#ffbb78\", \"#f608e8\", \"#00ee21\", \"#8dd3c7\", \"#0ae9fe\", \"#170b11\", \"#FF0000\"]\n    const colorNames = [\n        \"v1\", \"v2\", \"v3\", \"v4\", \"v5\", \"v6\", \"v7\", \"v9\", \"v10\", \"v11\"\n    ];\n    const colorMap = new Map();\n    colorNames.forEach((name, index) => {\n    colorMap.set(name, colorArray1[index]);\n    });\n\n    //const timeRangeScale = d3.scaleLinear().domain([1493733884409, 1493829248294]).range([0, 2 ** 20 - 1]);\n    const indexToTimeStampScale = d3.scaleLinear().domain([nodeIndexRange[0], nodeIndexRange[1]]).range([realTimeStampRange[0], realTimeStampRange[1]]);\n    // const xScale: any = d3.scaleLinear().domain([0, multiTimeSeriesObj.width]).range([0, multiTimeSeriesObj.width]);\n    const xScale: any = d3.scaleTime().domain([0, multiTimeSeriesObj.width]).range([0, multiTimeSeriesObj.width]);\n    let showTimeXScale: any = d3.scaleTime().domain([new Date(realTimeStampRange[0]), new Date(realTimeStampRange[1])]).range([0, multiTimeSeriesObj.width]);\n    // let showTimeXScale: any = d3.scaleLinear().domain([0, rowNumber]).range([0, multiTimeSeriesObj.width]);\n    let yScale: any = d3.scaleLinear().domain([multiTimeSeriesObj.minv, multiTimeSeriesObj.maxv]).range([multiTimeSeriesObj.height, 0]);\n\n    // let xReScale = d3.scaleLinear().domain([0, multiTimeSeriesObj.width]).range([0, multiTimeSeriesObj.dataManagers[0].realDataRowNum - 1]);\n    let xReScale = d3.scaleLinear().domain([0, multiTimeSeriesObj.width]).range([0, rowNumber]);\n    let showXTimeScale: any = d3.scaleTime().domain([new Date(realTimeStampRange[0]), new Date(realTimeStampRange[1])]).range([0, multiTimeSeriesObj.width]);\n    // let showXTimeScale: any = d3.scaleLinear().domain([0, rowNumber]).range([0, multiTimeSeriesObj.width]);\n\n    let zoomAxis = d3.axisBottom(showTimeXScale);\n    let yAxis = d3.axisLeft(yScale);\n    // if (store.state.controlParams.currentMode === 'Default') {\n    //     yAxis = d3.axisLeft(yScale).tickFormat((val) => {\n    //         //@ts-ignore\n    //         return 100 * val + \"%\"\n    //     })\n    // }\n\n    let xAxis = d3.axisBottom(showXTimeScale)\n    const yReScale = d3.scaleLinear().domain([multiTimeSeriesObj.minv, multiTimeSeriesObj.maxv]).range([multiTimeSeriesObj.height, 0]);\n    const timeBrushObj = d3.brushX().extent([[0, 10], [multiTimeSeriesObj.width, 40]]);\n    const timeBoxBrushObj = d3.brush().extent([[pading.left, pading.top], [multiTimeSeriesObj.width + pading.left, multiTimeSeriesObj.height + pading.top]]);\n\n    timeBoxBrushObj.on(\"end\", timeBoxBrushed);\n\n    timeBrushObj.on(\"end\", brushed);\n    timeBrushObj.on(\"start\", () => {\n        console.log(\"start\")\n    })\n    const timeBoxG = svg.append(\"g\").attr(\"transform\", `translate(${pading.left},${pading.top + 50 + multiTimeSeriesObj.height - 20})`).call(timeBrushObj).call(timeBrushObj.move, [0, multiTimeSeriesObj.width]);\n    // foreigG.call(timeBoxBrushObj)\n\n    let zoomAxisG = svg.append(\"g\").attr('style', 'user-select:none').attr(\"transform\", `translate(${pading.left},${multiTimeSeriesObj.height + pading.top + 50})`).attr(\"class\", 'x axis').call(zoomAxis)\n    let xAxisG = svg.append(\"g\").attr('style', 'user-select:none').attr(\"transform\", `translate(${pading.left},${multiTimeSeriesObj.height + pading.top})`).attr(\"class\", 'x axis').call(xAxis)\n    let yAxisG = svg.append(\"g\").attr('style', 'user-select:none').attr(\"transform\", `translate(${pading.left},${pading.top})`).attr(\"class\", 'y axis').call(yAxis);\n\n\n    //@ts-ignore\n    function updateCanvasWidth() {\n        //@ts-ignore\n        canvas.style.width = multiTimeSeriesObj.width;\n        svg\n            .attr(\"width\", multiTimeSeriesObj.width + pading.left + pading.right)\n            .attr(\"height\", multiTimeSeriesObj.height + pading.top + pading.bottom)\n        foreignObj.attr(\"width\", multiTimeSeriesObj.width);\n        xScale.domain([0, multiTimeSeriesObj.width]).range([0, multiTimeSeriesObj.width]);\n        showTimeXScale.domain([new Date(realTimeStampRange[0]), new Date(realTimeStampRange[1])]).range([0, multiTimeSeriesObj.width]);\n        // showTimeXScale.domain([0, rowNumber]).range([0, multiTimeSeriesObj.width]);\n        if (zoomAxisG != null) {\n            zoomAxisG.remove();\n            zoomAxisG = svg.append(\"g\").attr('style', 'user-select:none').attr(\"transform\", `translate(${pading.left},${multiTimeSeriesObj.height + pading.top + 50})`).attr(\"class\", 'x axis').call(zoomAxis)\n        }\n        timeBrushObj.extent([[0, 10], [multiTimeSeriesObj.width, 40]]);\n        timeBrushObj.on(\"end\", brushed);\n        timeBrushObj.on(\"start\", () => {\n            console.log(\"start\")\n        })\n        const tempReScale = d3.scaleLinear().domain([0, nodeIndexRange[1]]).range([0, multiTimeSeriesObj.width]);\n        timeBoxG.call(timeBrushObj).call(timeBrushObj.move, [tempReScale(multiTimeSeriesObj.timeRange[0]), tempReScale(multiTimeSeriesObj.timeRange[1])]);\n        ctx = canvas.getContext(\"2d\");\n    }\n\n    let lengendG: any = null;\n    \n    function drawLengend(leftOffset: number, multiTimeSeriesObj: MultiTimeSeriesObj, colorArray: Array<string>) {\n        if (lengendG !== null) {\n            lengendG.remove()\n        }\n        lengendG = svg.append('g').attr(\"width\", 100).attr(\"height\", 700).attr(\"transform\", `translate(${leftOffset},${pading.top - 15})`);\n\n        // const keys = ['v1','v2','v3'];\n        const keys = multiTimeSeriesObj.columnsColor;\n        keys.forEach((key, index) => {\n            const color = colorMap.get(multiTimeSeriesObj.columnsColor[index]);\n            const label = key; \n\n            lengendG\n                .append(\"rect\")\n                .attr(\"x\", 0)\n                .attr(\"y\", index * 25) // 每个图例项垂直间隔 25 像素\n                .attr(\"width\", 20)\n                .attr(\"height\", 20)\n                .attr(\"fill\", color);\n\n            lengendG\n                .append(\"text\")\n                .attr(\"x\", 30) // 文本相对于颜色块的偏移\n                .attr(\"y\", index * 25 + 15) // 与颜色块对齐并垂直居中\n                .attr(\"font-size\", \"12px\")\n                .attr(\"fill\", \"#000\")\n                .text(label);\n        });\n        // if(multiTimeSeriesObj.line1[2] == 'mean'){\n        //     lengendG\n        //         .append(\"rect\")\n        //         .attr(\"x\", 0)\n        //         .attr(\"y\", keys.length * 25) \n        //         .attr(\"width\", 20)\n        //         .attr(\"height\", 20)\n        //         .attr(\"fill\", colorArray[keys.length]);\n\n        //     lengendG\n        //         .append(\"text\")\n        //         .attr(\"x\", 30) // 文本相对于颜色块的偏移\n        //         .attr(\"y\", keys.length * 25 + 15) // 与颜色块对齐并垂直居中\n        //         .attr(\"font-size\", \"12px\")\n        //         .attr(\"fill\", \"#000\")\n        //         .text(\"Ave\");\n        // }\n    }\n\n    function draw(columnInfos?: any) {\n        // const colorArray1 = [\"#b3de69\", \"#fdb462\", \"#80b1d3\", \"#fb8072\", \"#bebada\", \"#ffffb3\", \"#8dd3c7\", \"#1f77b4\", \"#aec7e8\", \"#ff7f0e\", \"#ffbb78\", \"#2ca02c\", \"#98df8a\", \"#d62728\", \"#ff9896\", \"#9467bd\", \"#c5b0d5\", \"#8c564b\", \"#c49c94\", \"#e377c2\", \"#f7b6d2\", \"#7f7f7f\", \"#c7c7c7\", \"#bcbd22\", \"#dbdb8d\", \"#17becf\", \"#9edae5\", \"#393b79\", \"#5254a3\", \"#6b6ecf\", \"#9c9ede\", \"#637939\", \"#8ca252\", \"#b5cf6b\", \"#cedb9c\", \"#8c6d31\", \"#bd9e39\", \"#e7ba52\", \"#843c39\", \"#ad494a\", \"#d6616b\", \"#e7969c\", \"#7b4173\", \"#a55194\", \"#ce6dbd\", \"#de9ed6\"];\n        \n        \n        drawLengend(multiTimeSeriesObj.width + pading.left - 40, multiTimeSeriesObj, colorArray1)\n        canvas.width = multiTimeSeriesObj.width;\n        // const curMinMax = computeMinMax(multiTimeSeriesObj);\n        yScale = d3.scaleLinear().domain([multiTimeSeriesObj.minv, multiTimeSeriesObj.maxv]).range([multiTimeSeriesObj.height, 0]);  \n        yAxis = d3.axisLeft(yScale);\n        // if (store.state.controlParams.currentMode === 'Default') {\n        //     yAxis = d3.axisLeft(yScale).tickFormat((val) => {\n        //         //@ts-ignore\n        //         return 100 * val + \"%\"\n        //     })\n        // }\n        if (yAxisG !== null && yAxisG !== undefined) {\n            yAxisG.remove();\n        }\n        yAxisG = svg.append(\"g\").attr('style', 'user-select:none').attr(\"transform\", `translate(${pading.left},${pading.top})`).attr(\"class\", 'y axis').call(yAxis);\n\n        showXTimeScale = d3.scaleTime().domain([new Date(Math.floor(indexToTimeStampScale(multiTimeSeriesObj.timeRange[0]))), new Date(Math.floor(indexToTimeStampScale(multiTimeSeriesObj.timeRange[1])))]).range([0, multiTimeSeriesObj.width]);\n        // showXTimeScale = d3.scaleLinear().domain([0, rowNumber]).range([0, multiTimeSeriesObj.width]);\n        xAxis = d3.axisBottom(showXTimeScale);\n        if (xAxisG !== null && xAxisG !== undefined) {\n            xAxisG.remove();\n        }\n        xAxisG = svg.append(\"g\").attr('style', 'user-select:none').attr(\"transform\", `translate(${pading.left},${multiTimeSeriesObj.height + pading.top})`).attr(\"class\", 'x axis').call(xAxis)\n        \n        columnInfos = multiTimeSeriesObj.columnInfos;\n        ctx?.clearRect(0, 0, multiTimeSeriesObj.width, multiTimeSeriesObj.height);\n        for (let i = 0; i < columnInfos.length; i++) {\n            if (multiTimeSeriesObj.isShow[i]) {\n                if (multiTimeSeriesObj.columnInfos[i]) {\n                    ctx?.beginPath();\n                    let color = colorMap.get(multiTimeSeriesObj.line1[multiTimeSeriesObj.line1.length-1][i]);\n                    // if (store.state.controlParams.currentMode === 'Default') {\n                    //     //ctx.strokeStyle = colorArray1[i];\n                    //     const nonUniformColObjs = multiTimeSeriesObj.columnInfos[i];\n                    //     let nameStrs = multiTimeSeriesObj.dataName[i].split(\".\")[1].split(\"_\")\n                    //     if (nameStrs[1][nameStrs[1].length - 1] !== 'r') {\n                    //         nameStrs[1] = nameStrs[1] + 'r';\n                    //     }\n                    //     //@ts-ignore\n                    //     ctx.strokeStyle = namedMap.get(nameStrs[1]).split(\"-\")[1]//colorArray1[i];\n                    // } else {\n                        //@ts-ignore\n                        // ctx.strokeStyle = colorArray1[multiTimeSeriesObj.columnInfos[i].md5Num! % 46];\n                    // }\n                    ctx.strokeStyle = color;\n                    // ctx.strokeStyle = colorArray1[i];\n\n                    //@ts-ignore\n                    ctx.lineWidth = 1;\n                    const nonUniformColObjs = columnInfos[i];\n                    let interval = (nonUniformColObjs[0].et - nonUniformColObjs[0].st)/3;\n                    let wholeInterval = nonUniformColObjs[0].et - nonUniformColObjs[0].st\n                    for (let j = 0; j < nonUniformColObjs.length; j++) {\n                        ctx?.moveTo(nonUniformColObjs[j].st/wholeInterval, yScale(nonUniformColObjs[j].sv));\n                        ctx?.lineTo((nonUniformColObjs[j].st + interval)/wholeInterval, yScale(nonUniformColObjs[j].min));\n                        ctx?.moveTo((nonUniformColObjs[j].st + interval)/wholeInterval, yScale(nonUniformColObjs[j].min));\n                        ctx?.lineTo((nonUniformColObjs[j].st + interval*2)/wholeInterval, yScale(nonUniformColObjs[j].max));\n                        ctx?.moveTo((nonUniformColObjs[j].st + interval*2)/wholeInterval, yScale(nonUniformColObjs[j].max));\n                        ctx?.lineTo(nonUniformColObjs[j].et/wholeInterval, yScale(nonUniformColObjs[j].ev));\n                        if (j <= nonUniformColObjs.length - 2) {\n                            ctx?.moveTo(nonUniformColObjs[j].et/wholeInterval, yScale(nonUniformColObjs[j].ev));\n                            ctx?.lineTo(nonUniformColObjs[j + 1].st/wholeInterval, yScale(nonUniformColObjs[j + 1].sv));\n                        }\n                    }\n                    ctx?.stroke();\n                    // if(multiTimeSeriesObj.line1[2] == 'mean'){\n                    //     let ctx = canvas.getContext(\"2d\");\n                    //     //@ts-ignore\n                    //     ctx.beginPath();\n                    //     //@ts-ignore\n                    //     ctx.lineWidth = 2;\n                        \n                    //     for (let j = nonUniformColObjs.length-1; j < nonUniformColObjs.length; j++) {\n                    //         ctx?.moveTo(nonUniformColObjs[j].st/wholeInterval, yScale(nonUniformColObjs[j].sv));\n                    //         ctx?.lineTo((nonUniformColObjs[j].st + interval)/wholeInterval, yScale(nonUniformColObjs[j].min));\n                    //         ctx?.moveTo((nonUniformColObjs[j].st + interval)/wholeInterval, yScale(nonUniformColObjs[j].min));\n                    //         ctx?.lineTo((nonUniformColObjs[j].st + interval*2)/wholeInterval, yScale(nonUniformColObjs[j].max));\n                    //         ctx?.moveTo((nonUniformColObjs[j].st + interval*2)/wholeInterval, yScale(nonUniformColObjs[j].max));\n                    //         ctx?.lineTo(nonUniformColObjs[j].et/wholeInterval, yScale(nonUniformColObjs[j].ev));\n                    //         if (j <= nonUniformColObjs.length - 2) {\n                    //             ctx?.moveTo(nonUniformColObjs[j].et/wholeInterval, yScale(nonUniformColObjs[j].ev));\n                    //             ctx?.lineTo(nonUniformColObjs[j + 1].st/wholeInterval, yScale(nonUniformColObjs[j + 1].sv));\n                    //         }\n                    //     }\n                    //     ctx?.stroke();\n                    // }\n                    // else{\n                    //     for (let j = nonUniformColObjs.length-1; j < nonUniformColObjs.length; j++) {\n                    //         ctx?.moveTo(nonUniformColObjs[j].st/wholeInterval, yScale(nonUniformColObjs[j].sv));\n                    //         ctx?.lineTo((nonUniformColObjs[j].st + interval)/wholeInterval, yScale(nonUniformColObjs[j].min));\n                    //         ctx?.moveTo((nonUniformColObjs[j].st + interval)/wholeInterval, yScale(nonUniformColObjs[j].min));\n                    //         ctx?.lineTo((nonUniformColObjs[j].st + interval*2)/wholeInterval, yScale(nonUniformColObjs[j].max));\n                    //         ctx?.moveTo((nonUniformColObjs[j].st + interval*2)/wholeInterval, yScale(nonUniformColObjs[j].max));\n                    //         ctx?.lineTo(nonUniformColObjs[j].et/wholeInterval, yScale(nonUniformColObjs[j].ev));\n                    //         if (j <= nonUniformColObjs.length - 2) {\n                    //             ctx?.moveTo(nonUniformColObjs[j].et/wholeInterval, yScale(nonUniformColObjs[j].ev));\n                    //             ctx?.lineTo(nonUniformColObjs[j + 1].st/wholeInterval, yScale(nonUniformColObjs[j + 1].sv));\n                    //         }\n                    //     }\n                    //     ctx?.stroke();\n                    // }\n                    \n                }\n            }\n        }\n        // savePNG(canvas);\n        // savePNG(document.getElementById(\"content-container\"));\n    }\n\n    async function resizeW(width: number) {\n        isResizing = true;\n        //timeboxStack = [];\n        const currentLevel = multiTimeSeriesObj.currentLevel;\n        // multiTimeSeriesObj.currentLevel = 10;//currentLevel + 1\n        multiTimeSeriesObj.width = width;\n        updateCanvasWidth();\n\n        if (currentLevel + 1 >= multiTimeSeriesObj.maxLevel - 1) {\n            return\n        }\n\n        //@ts-ignore\n        canvas.style.width = multiTimeSeriesObj.width\n\n        console.log(\"resize....\");\n        // let mode = \"show\";\n        // let type = \"\"\n        // let parallel = 0;\n        // let errorBound = 0;\n        // let line1 = multiTimeSeriesObj.line1;\n        // const combinedUrl = `/line_chart/case1?table_name=${line1[0]}&table_name_others=${line1[1]}&symbol=${line1[2]}&mode=${mode}&width=${multiTimeSeriesObj.width}&height=${multiTimeSeriesObj.height}&startTime=${multiTimeSeriesObj.timeRange[0]}&endTime=${multiTimeSeriesObj.timeRange[1]}&interact_type=${type}&experiment=${line1[3]}&parallel=${parallel}&errorBound=${errorBound}`;\n        // const showColumns = await get(combinedUrl);\n        // multiTimeSeriesObj.columnInfos = showColumns;\n        // draw();\n    }\n\n    async function zoomIn(timeRange: Array<number>) {\n        //timeboxStack = [];\n        const currentLevel = multiTimeSeriesObj.currentLevel;\n        multiTimeSeriesObj.currentLevel = 10;//currentLevel + 1\n        const width = multiTimeSeriesObj.width;\n        multiTimeSeriesObj.timeRange[1] = timeRange[1]//Math.floor(multiTimeSeriesObj.timeRange[1] / 2);\n        multiTimeSeriesObj.timeRange[0] = timeRange[0]\n        if (currentLevel + 1 >= multiTimeSeriesObj.maxLevel - 1) {\n            return\n        }\n\n        const needLoadLevel = 2 ** Math.ceil(Math.log2(width))\n        console.log(\"zoomIn....\");\n        let mode = \"show\";\n        let type = \"\"\n        let parallel = 0;\n        let errorBound = 0;\n        let line1 = multiTimeSeriesObj.line1;\n        const combinedUrl = `/line_chart/case1?table_name=${line1[0]}&table_name_others=${line1[1]}&symbol=${line1[2]}&mode=${mode}&width=${multiTimeSeriesObj.width}&height=${multiTimeSeriesObj.height}&startTime=${multiTimeSeriesObj.timeRange[0]}&endTime=${multiTimeSeriesObj.timeRange[1]}&interact_type=${type}&experiment=${line1[3]}&parallel=${parallel}&errorBound=${errorBound}`;\n        const showColumns = await get(combinedUrl);\n        multiTimeSeriesObj.columnInfos = showColumns;\n        draw();\n    }\n\n\n    //@ts-ignore\n    async function brushed({ selection }) {\n        if (!isInit) {\n            isInit = true\n            return;\n        }\n        if (isResizing) {\n            isRebacking = false;\n            return;\n        }\n        if (isRebacking) {\n            isRebacking = false;\n            return\n        }\n        const timeRange = [Math.floor(xReScale(selection[0])), Math.floor(xReScale(selection[1]))];\n        if (timeRange[0] < 0) {\n            timeRange[0] = 0;\n        }\n        if (timeRange[1] > nodeIndexRange[1]) {\n            timeRange[1] = nodeIndexRange[1]\n        }\n        const interInfo = new InteractionInfo(\"zoom\")\n        interInfo.setRangeW(multiTimeSeriesObj.timeRange, multiTimeSeriesObj.width, multiTimeSeriesObj.currentLevel);\n        interactionStack.push(interInfo);\n        zoomIn([timeRange[0], timeRange[1]])\n    }\n\n    let timeboxStack: Array<Array<boolean>> = [];\n\n    //@ts-ignore\n    function timeBoxBrushed({ selection }) {\n        if (selection === null) {\n            return;\n        }\n        const lastRes = [];\n        for (let i = 0; i < multiTimeSeriesObj.columnInfos.length; i++) {\n            lastRes.push(multiTimeSeriesObj.isShow[i]);\n        }\n        //if(interactionStack[interactionStack.length-1].type==='timebox')\n        const timeBoxStartTime = new Date().getTime();\n        const interInfo = new InteractionInfo(\"timebox\");\n        interInfo.setShowInfo(lastRes);\n        interactionStack.push(interInfo);\n        // console.log(selection);\n        const startX = selection[0][0] - 40;\n        const endX = selection[1][0] - 40;\n        // console.log(showTimeXScale.invert(startX));\n        // console.log(showTimeXScale.invert(endX));\n        const vMinY = selection[1][1] - 20;\n        const vMaxY = selection[0][1] - 20;\n        const vMin = yScale.invert(vMinY);\n        const vMax = yScale.invert(vMaxY);\n        const allColumnInfos = multiTimeSeriesObj.columnInfos;\n\n        for (let i = 0; i < allColumnInfos.length; i++) {\n            let isChoose = multiTimeSeriesObj.isShow[i];\n            for (let j = Math.floor(startX); j <= Math.floor(endX); j++) {\n                isChoose = isChoose && (allColumnInfos[i][j].min >= vMin && allColumnInfos[i][j].max <= vMax)\n            }\n            multiTimeSeriesObj.isShow[i] = false;\n            if (isChoose) {\n                multiTimeSeriesObj.isShow[i] = true\n                //console.log(multiTimeSeriesObj.dataManagers[i].dataName);\n            }\n            // multiTimeSeriesObj.isShow[i] = false;\n        }\n        let minV = Infinity;\n        let maxV = -Infinity;\n        for (let i = 0; i < allColumnInfos.length; i++) {\n            if (multiTimeSeriesObj.isShow[i]) {\n                for (let j = 0; j <= allColumnInfos[i].length; j++) {\n                    minV = Math.min(minV, allColumnInfos[i][j] ? allColumnInfos[i][j].vRange[0] : minV);\n\n                    maxV = Math.max(maxV, allColumnInfos[i][j] ? allColumnInfos[i][j].vRange[1] : maxV);\n                }\n            }\n        }\n        // multiTimeSeriesObj.maxv = -10;\n        // multiTimeSeriesObj.minv = 10\n        draw();\n        //zoomIn([timeRangeScale(1493740845000),timeRangeScale(1493805314000)])\n    }\n    let isMouseover = false;\n    let startOffsetX = 0;\n    const dragRect = svg\n        .append(\"rect\")\n        .attr(\"x\", 0)\n        .attr(\"y\", 0)\n        .attr(\"height\", multiTimeSeriesObj.height + pading.top + pading.bottom)\n        .attr(\"width\", multiTimeSeriesObj.width + pading.left + pading.right)\n        .attr(\"stroke\", \"black\")\n        .attr(\"stroke-width\", 4)\n        .attr(\"fill\", \"none\")\n        .on(\"mouseover\", () => {\n            document.body.style.cursor = 'ew-resize';\n            isMouseover = true;\n        })\n        .on(\"mousedown\", (e) => {\n            if (isMouseover) {\n                startOffsetX = e.offsetX;\n                interactiveInfo.isMouseDown = true;\n            }\n        })\n        .on(\"mouseup\", () => {\n            console.log();\n            for (let i = 0; i < 30; i++) {\n                multiTimeSeriesObj.isShow[i] = true;\n            }\n        })\n        .on(\"mousemove\", (e) => {\n            if (interactiveInfo.isMouseDown) {\n                svg.attr(\"width\", multiTimeSeriesObj.width + pading.right + pading.left + (e.offsetX - startOffsetX));\n                dragRect.attr(\"width\", multiTimeSeriesObj.width + pading.right + pading.left + (e.offsetX - startOffsetX));\n            }\n        })\n        .on(\"mouseleave\", () => {\n            if (!interactiveInfo.isMouseDown) {\n                document.body.style.cursor = 'default';\n            }\n            for (let i = 0; i < 30; i++) {\n                multiTimeSeriesObj.isShow[i] = true;\n            }\n        })\n\n    document\n        .getElementById(\"content-container\")!\n        .addEventListener(\"mousemove\", (e) => {\n            if (interactiveInfo.isMouseDown) {\n                svg.attr(\"width\", multiTimeSeriesObj.width + pading.right + pading.left + (e.offsetX - startOffsetX));\n                dragRect.attr(\"width\", multiTimeSeriesObj.width + pading.right + pading.left + (e.offsetX - startOffsetX));\n            }\n        });\n\n    document\n        .getElementById(\"content-container\")!\n        .addEventListener(\"mouseup\", (e) => {\n            if (interactiveInfo.isMouseDown) {\n                interactiveInfo.isMouseDown = false;\n                isMouseover = false;\n                document.body.style.cursor = 'default';\n                let preWidth = multiTimeSeriesObj.width;\n                multiTimeSeriesObj.width = multiTimeSeriesObj.width + (e.offsetX - startOffsetX);\n                if (multiTimeSeriesObj.width === preWidth) {\n                    return\n                }\n                const interInfo = new InteractionInfo(\"resize\")\n                interInfo.setRangeW(multiTimeSeriesObj.timeRange, multiTimeSeriesObj.width, multiTimeSeriesObj.currentLevel);\n                interactionStack.push(interInfo);\n                resizeW(multiTimeSeriesObj.width)\n            }\n            for (let i = 0; i < 30; i++) {\n                multiTimeSeriesObj.isShow[i] = true;\n            }\n        });\n    svg.on(\"contextmenu\", (e) => {\n\n        if (interactionStack.length > 0) {\n            const interInfo = interactionStack.pop();\n\n            if (interInfo?.type === 'timebox') {\n                const curStats = interInfo.showInfo;\n                for (let i = 0; i < multiTimeSeriesObj.columnInfos.length; i++) {\n                    multiTimeSeriesObj.isShow[i] = curStats![i];\n                }\n                draw();\n            } else if (interInfo?.type === 'resize') {\n\n                resizeW(interInfo.width);\n            } else if (interInfo?.type === 'zoom') {\n                isRebacking = true;\n                zoomIn(interInfo.timeRange)\n            }\n        }\n        e.preventDefault();\n        e.stopPropagation();\n    });\n\n\n    let i = 0;\n    canvas.addEventListener(\"click\", (e) => {\n        console.log(1);\n    });\n    draw();\n}\n\nfunction computeMinMax(multiTimeSeriesObj: MultiTimeSeriesObj) {\n    let min = Infinity;\n    let max = -Infinity;\n    // for (let i = 0; i < multiTimeSeriesObj.columnInfos.length; i++) {\n    //     if (multiTimeSeriesObj.isShow[i]) {\n    //         const columInfo = multiTimeSeriesObj.columnInfos[i];\n    //         for (let j = 0; j < columInfo.length; j++) {\n    //             if (columInfo[j].vRange[0] < min) {\n    //                 min = columInfo[j].vRange[0];\n    //             }\n\n    //             if (columInfo[j].vRange[1] > max) {\n    //                 max = columInfo[j].vRange[1];\n    //             }\n    //         }\n    //     } else {\n    //         // console.log(multiTimeSeriesObj.dataManagers[i].dataName)\n    //     }\n    // }\n    min = -2000, max = 2000;\n    return {\n        min,\n        max\n    }\n}\n\nfunction savePNG(canvas: any) {\n    const imgURL = canvas.toDataURL(\"./image/png\");\n    const dlLink = document.createElement(\"a\")\n    dlLink.download = `1b_zoom_init`\n    dlLink.href = imgURL\n    dlLink.dataset.downloadurl = [\"./image/png\", dlLink.download, dlLink.href].join(\":\")\n    document.body.appendChild(dlLink)\n    dlLink.click()\n    document.body.removeChild(dlLink)\n}\n\n\n        // let showNum = 0;\n        // for (let i = 0; i < multiTimeSeriesObj.columnInfos.length; i++) {\n        //     const dataManager = multiTimeSeriesObj.columnInfos[i];\n        //     if (dataManager.isShow) {\n        //         if (store.state.controlParams.currentMode === 'Default') {\n        //             let nameStrs = dataManager.dataName.split(\".\")[1].split(\"_\")\n        //             if (nameStrs[1][nameStrs[1].length - 1] !== 'r') {\n        //                 nameStrs[1] = nameStrs[1] + 'r';\n        //             }\n        //             if (!namedMap.has(nameStrs[1])) {\n        //                 dataManager.isShow = false;\n        //                 continue\n        //             }\n        //             showNum++;\n        //         } else {\n        //             let nameStrs = dataManager.dataName.split(\".\")[1].split(\"_\");\n        //             let showName = nameStrs[1]\n        //             for (let i = 2; i < nameStrs.length - 2; i++) {\n        //                 showName = showName + \"_\" + nameStrs[i];\n        //             }\n        //             const showColor = colorArray[dataManager.md5Num! % 46];\n        //             showNum++;\n        //         }\n        //     }\n        // }"],"mappings":";;;AAGA,OAAO,KAAKA,EAAE,MAAM,IAAI;AACxB,OAAOC,KAAK,MAAM,OAAO;AACzB;AAEA,IAAIC,OAAO,GAAQ;AACf;AACA;EACI,YAAY,EAAE;CACjB,EACD;EACI,gBAAgB,EAAE;CACrB,EACD;EACI,eAAe,EAAE;CACpB,EACD;EACI,gBAAgB,EAAE;CACrB,EACD;EACI,QAAQ,EAAE;CACb;AACD;AACA;AACA;AACA;AACA;EACI,cAAc,EAAE;CACnB,EACD;EACI,gBAAgB,EAAE;CACrB;AACD;AACA;AACA;AACA;EACI,eAAe,EAAE;CACpB;AAGD;AACA;EACI,UAAU,EAAE;CACf,EACD;EACI,eAAe,EAAE;CACpB,EACD;EACI,UAAU,EAAE;CACf,EACD;EACI,cAAc,EAAE;CACnB;AACD;AACA;EACI,UAAU,EAAE;CACf,EACD;EACI,WAAW,EAAE;CAChB,EACD;EACI,aAAa,EAAE;CAClB,EACD;EACI,SAAS,EAAE;CACd;AACD;AACA;EACI,eAAe,EAAE;CACpB,EACD;EACI,UAAU,EAAE;CACf,EACD;EACI,SAAS,EAAE;CACd,EACD;EACI,UAAU,EAAE;CACf,EACD;EACI,eAAe,EAAE;CACpB,EACD;EACI,UAAU,EAAE;CACf;AAED;AACA;EACI,eAAe,EAAE;CACpB,EACD;EACI,eAAe,EAAE;CACpB,EACD;EACI,gBAAgB,EAAE;CACrB;AACD;AACA;EACI,aAAa,EAAE;CAClB,EACD;EACI,eAAe,EAAE;CACpB,EACD;EACI,cAAc,EAAE;CACnB;AACD;AACA;EACI,cAAc,EAAE;CACnB,EACD;EACI,eAAe,EAAE;CACpB,EACD;EACI,QAAQ,EAAE;CACb,EACD;EACI,SAAS,EAAE;CACd,EACD;EACI,cAAc,EAAE;CACnB,EACD;EACI,YAAY,EAAE;CACjB;AACD;AACA;EACI,gBAAgB,EAAE;CACrB,EACD;EACI,cAAc,EAAE;CACnB,EACD;EACI,gBAAgB,EAAE;CACrB,EACD;EACI,cAAc,EAAE;CACnB,EAGD;EACI,SAAS,EAAE;CACd,EACD;EACI,gBAAgB,EAAE;CACrB,EACD;EACI,WAAW,EAAE;CAChB,EACD;EACI,gBAAgB,EAAE;CACrB,CAIJ;AACD,IAAIC,QAAQ,GAAG,IAAIC,GAAG,EAAY;AAClC,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,OAAO,CAACI,MAAM,EAAED,CAAC,EAAE,EAAE;EACrC,MAAME,GAAG,GAAGC,MAAM,CAACC,IAAI,CAACP,OAAO,CAACG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACtCF,QAAQ,CAACO,GAAG,CAACH,GAAG,EAAEL,OAAO,CAACG,CAAC,CAAC,CAACE,GAAG,CAAC,CAAC;;AAGtC,eAAeI,GAAGA,CAACC,GAAW;EAC1BA,GAAG,GAAG,UAAU,GAAGA,GAAG;EACtB;EACA,MAAM;IAAEC;EAAI,CAAE,GAAG,MAAMZ,KAAK,CAACU,GAAG,CAACC,GAAG,CAAC;EACrC;EACA,OAAOC,IAAI;AACf;AAEA,MAAMC,eAAe;EAMjBC,YAAYC,IAAY;IACpB,IAAI,CAACA,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACC,QAAQ,GAAG,EAAE;IAClB,IAAI,CAACC,SAAS,GAAG,EAAE;IACnB,IAAI,CAACC,KAAK,GAAG,CAAC;IACd,IAAI,CAACC,KAAK,GAAG,CAAC;EAClB;EACAC,WAAWA,CAACJ,QAAwB;IAChC,IAAI,CAACA,QAAQ,GAAGA,QAAQ;EAC5B;EACAK,SAASA,CAACJ,SAAwB,EAAEC,KAAa,EAAEC,KAAa;IAC5D,IAAI,CAACF,SAAS,GAAG,CAACA,SAAS,CAAC,CAAC,CAAC,EAAEA,SAAS,CAAC,CAAC,CAAC,CAAC;IAC7C,IAAI,CAACC,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACC,KAAK,GAAGA,KAAK;EACtB;;AAIJ,IAAIG,gBAAgB,GAA2B,EAAE;AAEjD,OAAM,SAAUC,mBAAmBA,CAACC,kBAAsC;EAAA,IAAAC,qBAAA;EAEtE,MAAMC,UAAU,GAAGC,QAAQ,CAACC,cAAc,CAAC,QAAQ,CAAC;EACpD,IAAGF,UAAU,EAAC;IACVA,UAAU,CAACG,MAAM,EAAE;;EAGvB,IAAIC,kBAAkB,GAAkB,CAACN,kBAAkB,CAACO,cAAc,EAAEP,kBAAkB,CAACQ,YAAY,CAAC;EAC5GC,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEJ,kBAAkB,CAAC;EACjD,IAAIK,cAAc,GAAkB,CAACX,kBAAkB,CAACP,SAAS,CAAC,CAAC,CAAC,EAAEO,kBAAkB,CAACP,SAAS,CAAC,CAAC,CAAC,CAAC;EACtG,IAAImB,SAAS,GAAGZ,kBAAkB,CAACa,WAAW,CAAC,CAAC,CAAC,CAACb,kBAAkB,CAACa,WAAW,CAAC,CAAC,CAAC,CAAChC,MAAM,GAAC,CAAC,CAAC,CAACiC,EAAE;EAChG,IAAIC,MAAM,GAAG,KAAK;EAClB,IAAIC,UAAU,GAAG,KAAK;EACtB,IAAIC,WAAW,GAAG,KAAK;EACvB,IAAIC,eAAe,GAAG;IAClBC,MAAM,EAAE,CAAC;IACTC,MAAM,EAAE,CAAC;IACTC,OAAO,EAAE,CAAC;IACVC,OAAO,EAAE,CAAC;IACVC,WAAW,EAAE,KAAK;IAClBC,MAAM,EAAE;GACX;EACD;EACA,MAAMC,MAAM,GAAG;IAAEC,GAAG,EAAE,EAAE;IAAEC,MAAM,EAAE,EAAE;IAAEC,IAAI,EAAE,EAAE;IAAEC,KAAK,EAAE;EAAE,CAAE;EAC3D,MAAMC,GAAG,GAAGvD,EAAE,CAACwD,MAAM,CAAC,oBAAoB,CAAC,CAACC,MAAM,CAAC,KAAK,CAAC;EACzDF,GAAG,CACEG,IAAI,CAAC,OAAO,EAAEjC,kBAAkB,CAACN,KAAK,GAAG+B,MAAM,CAACG,IAAI,GAAGH,MAAM,CAACI,KAAK,CAAC,CACpEI,IAAI,CAAC,QAAQ,EAAEjC,kBAAkB,CAACkC,MAAM,GAAGT,MAAM,CAACC,GAAG,GAAGD,MAAM,CAACE,MAAM,CAAC,CACtEM,IAAI,CAAC,WAAW,EAAE,aAAa,EAAE,IAAI,EAAE,GAAG,CAAC,CAC3CE,KAAK,CAAC,kBAAkB,EAAE,MAAM,CAAC,CACjCF,IAAI,CAAC,IAAI,EAAC,QAAQ,CAAC;EAExB,MAAMG,SAAS,GAAG,UAAUpC,kBAAkB,CAACN,KAAK,GAAG2C,IAAI,CAACC,MAAM,EAAE,EAAE;EACtE,MAAMC,OAAO,GAAGT,GAAG,CAACE,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,WAAW,EAAE,aAAaR,MAAM,CAACG,IAAI,IAAIH,MAAM,CAACC,GAAG,GAAG,CAAC;EAC5F,IAAIc,UAAU,GAAQD,OAAO,CAACP,MAAM,CAAC,eAAe,CAAC,CAACC,IAAI,CAAC,IAAI,EAAEG,SAAS,CAAC,CAACH,IAAI,CAAC,GAAG,EAAER,MAAM,CAACG,IAAI,CAAC,CAACK,IAAI,CAAC,GAAG,EAAER,MAAM,CAACC,GAAG,CAAC,CAACO,IAAI,CAAC,OAAO,EAAEjC,kBAAkB,CAACN,KAAK,CAAC,CAACuC,IAAI,CAAC,QAAQ,EAAEjC,kBAAkB,CAACkC,MAAM,CAAC;EAC1M,MAAMO,MAAM,GAAGtC,QAAQ,CAACuC,aAAa,CAAC,QAAQ,CAAC;EAC9CD,MAAc,CAACE,QAAQ,GAAG,EAAE;EAC7B,CAAA1C,qBAAA,GAAAE,QAAQ,CAACC,cAAc,CAACgC,SAAS,CAAC,cAAAnC,qBAAA,eAAlCA,qBAAA,CAAoC2C,WAAW,CAACH,MAAM,CAAC;EACvDA,MAAM,CAAC/C,KAAK,GAAGM,kBAAkB,CAACN,KAAK;EACvC+C,MAAM,CAACP,MAAM,GAAGlC,kBAAkB,CAACkC,MAAM;EACzC,IAAIW,GAAG,GAAGJ,MAAM,CAACK,UAAU,CAAC,IAAI,CAAC;EAEjC;EACA;EACA;EACA;EACA;EAGJ;EACI;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA,MAAMC,WAAW,GAAG,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;EAClI;EACA,MAAMC,UAAU,GAAG,CACf,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAC/D;EACD,MAAMC,QAAQ,GAAG,IAAItE,GAAG,EAAE;EAC1BqE,UAAU,CAACE,OAAO,CAAC,CAACC,IAAI,EAAEC,KAAK,KAAI;IACnCH,QAAQ,CAAChE,GAAG,CAACkE,IAAI,EAAEJ,WAAW,CAACK,KAAK,CAAC,CAAC;EACtC,CAAC,CAAC;EAEF;EACA,MAAMC,qBAAqB,GAAG9E,EAAE,CAAC+E,WAAW,EAAE,CAACC,MAAM,CAAC,CAAC5C,cAAc,CAAC,CAAC,CAAC,EAAEA,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC6C,KAAK,CAAC,CAAClD,kBAAkB,CAAC,CAAC,CAAC,EAAEA,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC;EACnJ;EACA,MAAMmD,MAAM,GAAQlF,EAAE,CAACmF,SAAS,EAAE,CAACH,MAAM,CAAC,CAAC,CAAC,EAAEvD,kBAAkB,CAACN,KAAK,CAAC,CAAC,CAAC8D,KAAK,CAAC,CAAC,CAAC,EAAExD,kBAAkB,CAACN,KAAK,CAAC,CAAC;EAC7G,IAAIiE,cAAc,GAAQpF,EAAE,CAACmF,SAAS,EAAE,CAACH,MAAM,CAAC,CAAC,IAAIK,IAAI,CAACtD,kBAAkB,CAAC,CAAC,CAAC,CAAC,EAAE,IAAIsD,IAAI,CAACtD,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACkD,KAAK,CAAC,CAAC,CAAC,EAAExD,kBAAkB,CAACN,KAAK,CAAC,CAAC;EACxJ;EACA,IAAImE,MAAM,GAAQtF,EAAE,CAAC+E,WAAW,EAAE,CAACC,MAAM,CAAC,CAACvD,kBAAkB,CAAC8D,IAAI,EAAE9D,kBAAkB,CAAC+D,IAAI,CAAC,CAAC,CAACP,KAAK,CAAC,CAACxD,kBAAkB,CAACkC,MAAM,EAAE,CAAC,CAAC,CAAC;EAEnI;EACA,IAAI8B,QAAQ,GAAGzF,EAAE,CAAC+E,WAAW,EAAE,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEvD,kBAAkB,CAACN,KAAK,CAAC,CAAC,CAAC8D,KAAK,CAAC,CAAC,CAAC,EAAE5C,SAAS,CAAC,CAAC;EAC3F,IAAIqD,cAAc,GAAQ1F,EAAE,CAACmF,SAAS,EAAE,CAACH,MAAM,CAAC,CAAC,IAAIK,IAAI,CAACtD,kBAAkB,CAAC,CAAC,CAAC,CAAC,EAAE,IAAIsD,IAAI,CAACtD,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACkD,KAAK,CAAC,CAAC,CAAC,EAAExD,kBAAkB,CAACN,KAAK,CAAC,CAAC;EACxJ;EAEA,IAAIwE,QAAQ,GAAG3F,EAAE,CAAC4F,UAAU,CAACR,cAAc,CAAC;EAC5C,IAAIS,KAAK,GAAG7F,EAAE,CAAC8F,QAAQ,CAACR,MAAM,CAAC;EAC/B;EACA;EACA;EACA;EACA;EACA;EAEA,IAAIS,KAAK,GAAG/F,EAAE,CAAC4F,UAAU,CAACF,cAAc,CAAC;EACzC,MAAMM,QAAQ,GAAGhG,EAAE,CAAC+E,WAAW,EAAE,CAACC,MAAM,CAAC,CAACvD,kBAAkB,CAAC8D,IAAI,EAAE9D,kBAAkB,CAAC+D,IAAI,CAAC,CAAC,CAACP,KAAK,CAAC,CAACxD,kBAAkB,CAACkC,MAAM,EAAE,CAAC,CAAC,CAAC;EAClI,MAAMsC,YAAY,GAAGjG,EAAE,CAACkG,MAAM,EAAE,CAACC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC1E,kBAAkB,CAACN,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC;EAClF,MAAMiF,eAAe,GAAGpG,EAAE,CAACqG,KAAK,EAAE,CAACF,MAAM,CAAC,CAAC,CAACjD,MAAM,CAACG,IAAI,EAAEH,MAAM,CAACC,GAAG,CAAC,EAAE,CAAC1B,kBAAkB,CAACN,KAAK,GAAG+B,MAAM,CAACG,IAAI,EAAE5B,kBAAkB,CAACkC,MAAM,GAAGT,MAAM,CAACC,GAAG,CAAC,CAAC,CAAC;EAExJiD,eAAe,CAACE,EAAE,CAAC,KAAK,EAAEC,cAAc,CAAC;EAEzCN,YAAY,CAACK,EAAE,CAAC,KAAK,EAAEE,OAAO,CAAC;EAC/BP,YAAY,CAACK,EAAE,CAAC,OAAO,EAAE,MAAK;IAC1BpE,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC;EACxB,CAAC,CAAC;EACF,MAAMsE,QAAQ,GAAGlD,GAAG,CAACE,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,WAAW,EAAE,aAAaR,MAAM,CAACG,IAAI,IAAIH,MAAM,CAACC,GAAG,GAAG,EAAE,GAAG1B,kBAAkB,CAACkC,MAAM,GAAG,EAAE,GAAG,CAAC,CAAC+C,IAAI,CAACT,YAAY,CAAC,CAACS,IAAI,CAACT,YAAY,CAACU,IAAI,EAAE,CAAC,CAAC,EAAElF,kBAAkB,CAACN,KAAK,CAAC,CAAC;EAC7M;EAEA,IAAIyF,SAAS,GAAGrD,GAAG,CAACE,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,OAAO,EAAE,kBAAkB,CAAC,CAACA,IAAI,CAAC,WAAW,EAAE,aAAaR,MAAM,CAACG,IAAI,IAAI5B,kBAAkB,CAACkC,MAAM,GAAGT,MAAM,CAACC,GAAG,GAAG,EAAE,GAAG,CAAC,CAACO,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC,CAACgD,IAAI,CAACf,QAAQ,CAAC;EACtM,IAAIkB,MAAM,GAAGtD,GAAG,CAACE,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,OAAO,EAAE,kBAAkB,CAAC,CAACA,IAAI,CAAC,WAAW,EAAE,aAAaR,MAAM,CAACG,IAAI,IAAI5B,kBAAkB,CAACkC,MAAM,GAAGT,MAAM,CAACC,GAAG,GAAG,CAAC,CAACO,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC,CAACgD,IAAI,CAACX,KAAK,CAAC;EAC3L,IAAIe,MAAM,GAAGvD,GAAG,CAACE,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,OAAO,EAAE,kBAAkB,CAAC,CAACA,IAAI,CAAC,WAAW,EAAE,aAAaR,MAAM,CAACG,IAAI,IAAIH,MAAM,CAACC,GAAG,GAAG,CAAC,CAACO,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC,CAACgD,IAAI,CAACb,KAAK,CAAC;EAG/J;EACA,SAASkB,iBAAiBA,CAAA;IACtB;IACA7C,MAAM,CAACN,KAAK,CAACzC,KAAK,GAAGM,kBAAkB,CAACN,KAAK;IAC7CoC,GAAG,CACEG,IAAI,CAAC,OAAO,EAAEjC,kBAAkB,CAACN,KAAK,GAAG+B,MAAM,CAACG,IAAI,GAAGH,MAAM,CAACI,KAAK,CAAC,CACpEI,IAAI,CAAC,QAAQ,EAAEjC,kBAAkB,CAACkC,MAAM,GAAGT,MAAM,CAACC,GAAG,GAAGD,MAAM,CAACE,MAAM,CAAC;IAC3Ea,UAAU,CAACP,IAAI,CAAC,OAAO,EAAEjC,kBAAkB,CAACN,KAAK,CAAC;IAClD+D,MAAM,CAACF,MAAM,CAAC,CAAC,CAAC,EAAEvD,kBAAkB,CAACN,KAAK,CAAC,CAAC,CAAC8D,KAAK,CAAC,CAAC,CAAC,EAAExD,kBAAkB,CAACN,KAAK,CAAC,CAAC;IACjFiE,cAAc,CAACJ,MAAM,CAAC,CAAC,IAAIK,IAAI,CAACtD,kBAAkB,CAAC,CAAC,CAAC,CAAC,EAAE,IAAIsD,IAAI,CAACtD,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACkD,KAAK,CAAC,CAAC,CAAC,EAAExD,kBAAkB,CAACN,KAAK,CAAC,CAAC;IAC9H;IACA,IAAIyF,SAAS,IAAI,IAAI,EAAE;MACnBA,SAAS,CAAC9E,MAAM,EAAE;MAClB8E,SAAS,GAAGrD,GAAG,CAACE,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,OAAO,EAAE,kBAAkB,CAAC,CAACA,IAAI,CAAC,WAAW,EAAE,aAAaR,MAAM,CAACG,IAAI,IAAI5B,kBAAkB,CAACkC,MAAM,GAAGT,MAAM,CAACC,GAAG,GAAG,EAAE,GAAG,CAAC,CAACO,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC,CAACgD,IAAI,CAACf,QAAQ,CAAC;;IAEtMM,YAAY,CAACE,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC1E,kBAAkB,CAACN,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC;IAC9D8E,YAAY,CAACK,EAAE,CAAC,KAAK,EAAEE,OAAO,CAAC;IAC/BP,YAAY,CAACK,EAAE,CAAC,OAAO,EAAE,MAAK;MAC1BpE,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC;IACxB,CAAC,CAAC;IACF,MAAM6E,WAAW,GAAGhH,EAAE,CAAC+E,WAAW,EAAE,CAACC,MAAM,CAAC,CAAC,CAAC,EAAE5C,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC6C,KAAK,CAAC,CAAC,CAAC,EAAExD,kBAAkB,CAACN,KAAK,CAAC,CAAC;IACxGsF,QAAQ,CAACC,IAAI,CAACT,YAAY,CAAC,CAACS,IAAI,CAACT,YAAY,CAACU,IAAI,EAAE,CAACK,WAAW,CAACvF,kBAAkB,CAACP,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE8F,WAAW,CAACvF,kBAAkB,CAACP,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACjJoD,GAAG,GAAGJ,MAAM,CAACK,UAAU,CAAC,IAAI,CAAC;EACjC;EAEA,IAAI0C,QAAQ,GAAQ,IAAI;EAExB,SAASC,WAAWA,CAACC,UAAkB,EAAE1F,kBAAsC,EAAE2F,UAAyB;IACtG,IAAIH,QAAQ,KAAK,IAAI,EAAE;MACnBA,QAAQ,CAACnF,MAAM,EAAE;;IAErBmF,QAAQ,GAAG1D,GAAG,CAACE,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,OAAO,EAAE,GAAG,CAAC,CAACA,IAAI,CAAC,QAAQ,EAAE,GAAG,CAAC,CAACA,IAAI,CAAC,WAAW,EAAE,aAAayD,UAAU,IAAIjE,MAAM,CAACC,GAAG,GAAG,EAAE,GAAG,CAAC;IAElI;IACA,MAAM1C,IAAI,GAAGgB,kBAAkB,CAAC4F,YAAY;IAC5C5G,IAAI,CAACkE,OAAO,CAAC,CAACpE,GAAG,EAAEsE,KAAK,KAAI;MACxB,MAAMyC,KAAK,GAAG5C,QAAQ,CAAC/D,GAAG,CAACc,kBAAkB,CAAC4F,YAAY,CAACxC,KAAK,CAAC,CAAC;MAClE,MAAM0C,KAAK,GAAGhH,GAAG;MAEjB0G,QAAQ,CACHxD,MAAM,CAAC,MAAM,CAAC,CACdC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CACZA,IAAI,CAAC,GAAG,EAAEmB,KAAK,GAAG,EAAE,CAAC,CAAC;MAAA,CACtBnB,IAAI,CAAC,OAAO,EAAE,EAAE,CAAC,CACjBA,IAAI,CAAC,QAAQ,EAAE,EAAE,CAAC,CAClBA,IAAI,CAAC,MAAM,EAAE4D,KAAK,CAAC;MAExBL,QAAQ,CACHxD,MAAM,CAAC,MAAM,CAAC,CACdC,IAAI,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;MAAA,CACdA,IAAI,CAAC,GAAG,EAAEmB,KAAK,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;MAAA,CAC3BnB,IAAI,CAAC,WAAW,EAAE,MAAM,CAAC,CACzBA,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CACpB8D,IAAI,CAACD,KAAK,CAAC;IACpB,CAAC,CAAC;IACF;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACJ;EAEA,SAASE,IAAIA,CAACnF,WAAiB;IAAA,IAAAoF,IAAA;IAC3B;IAGAR,WAAW,CAACzF,kBAAkB,CAACN,KAAK,GAAG+B,MAAM,CAACG,IAAI,GAAG,EAAE,EAAE5B,kBAAkB,EAAE+C,WAAW,CAAC;IACzFN,MAAM,CAAC/C,KAAK,GAAGM,kBAAkB,CAACN,KAAK;IACvC;IACAmE,MAAM,GAAGtF,EAAE,CAAC+E,WAAW,EAAE,CAACC,MAAM,CAAC,CAACvD,kBAAkB,CAAC8D,IAAI,EAAE9D,kBAAkB,CAAC+D,IAAI,CAAC,CAAC,CAACP,KAAK,CAAC,CAACxD,kBAAkB,CAACkC,MAAM,EAAE,CAAC,CAAC,CAAC;IAC1HkC,KAAK,GAAG7F,EAAE,CAAC8F,QAAQ,CAACR,MAAM,CAAC;IAC3B;IACA;IACA;IACA;IACA;IACA;IACA,IAAIwB,MAAM,KAAK,IAAI,IAAIA,MAAM,KAAKa,SAAS,EAAE;MACzCb,MAAM,CAAChF,MAAM,EAAE;;IAEnBgF,MAAM,GAAGvD,GAAG,CAACE,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,OAAO,EAAE,kBAAkB,CAAC,CAACA,IAAI,CAAC,WAAW,EAAE,aAAaR,MAAM,CAACG,IAAI,IAAIH,MAAM,CAACC,GAAG,GAAG,CAAC,CAACO,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC,CAACgD,IAAI,CAACb,KAAK,CAAC;IAE3JH,cAAc,GAAG1F,EAAE,CAACmF,SAAS,EAAE,CAACH,MAAM,CAAC,CAAC,IAAIK,IAAI,CAACvB,IAAI,CAAC8D,KAAK,CAAC9C,qBAAqB,CAACrD,kBAAkB,CAACP,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,IAAImE,IAAI,CAACvB,IAAI,CAAC8D,KAAK,CAAC9C,qBAAqB,CAACrD,kBAAkB,CAACP,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC+D,KAAK,CAAC,CAAC,CAAC,EAAExD,kBAAkB,CAACN,KAAK,CAAC,CAAC;IACzO;IACA4E,KAAK,GAAG/F,EAAE,CAAC4F,UAAU,CAACF,cAAc,CAAC;IACrC,IAAImB,MAAM,KAAK,IAAI,IAAIA,MAAM,KAAKc,SAAS,EAAE;MACzCd,MAAM,CAAC/E,MAAM,EAAE;;IAEnB+E,MAAM,GAAGtD,GAAG,CAACE,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,OAAO,EAAE,kBAAkB,CAAC,CAACA,IAAI,CAAC,WAAW,EAAE,aAAaR,MAAM,CAACG,IAAI,IAAI5B,kBAAkB,CAACkC,MAAM,GAAGT,MAAM,CAACC,GAAG,GAAG,CAAC,CAACO,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC,CAACgD,IAAI,CAACX,KAAK,CAAC;IAEvLzD,WAAW,GAAGb,kBAAkB,CAACa,WAAW;IAC5C,CAAAoF,IAAA,GAAApD,GAAG,cAAAoD,IAAA,eAAHA,IAAA,CAAKG,SAAS,CAAC,CAAC,EAAE,CAAC,EAAEpG,kBAAkB,CAACN,KAAK,EAAEM,kBAAkB,CAACkC,MAAM,CAAC;IACzE,KAAK,IAAItD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGiC,WAAW,CAAChC,MAAM,EAAED,CAAC,EAAE,EAAE;MACzC,IAAIoB,kBAAkB,CAACqG,MAAM,CAACzH,CAAC,CAAC,EAAE;QAC9B,IAAIoB,kBAAkB,CAACa,WAAW,CAACjC,CAAC,CAAC,EAAE;UAAA,IAAA0H,KAAA,EAAAC,MAAA;UACnC,CAAAD,KAAA,GAAAzD,GAAG,cAAAyD,KAAA,eAAHA,KAAA,CAAKE,SAAS,EAAE;UAChB,IAAIX,KAAK,GAAG5C,QAAQ,CAAC/D,GAAG,CAACc,kBAAkB,CAACyG,KAAK,CAACzG,kBAAkB,CAACyG,KAAK,CAAC5H,MAAM,GAAC,CAAC,CAAC,CAACD,CAAC,CAAC,CAAC;UACxF;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACI;UACA;UACJ;UACAiE,GAAG,CAAC6D,WAAW,GAAGb,KAAK;UACvB;UAEA;UACAhD,GAAG,CAAC8D,SAAS,GAAG,CAAC;UACjB,MAAMC,iBAAiB,GAAG/F,WAAW,CAACjC,CAAC,CAAC;UACxC,IAAIiI,QAAQ,GAAG,CAACD,iBAAiB,CAAC,CAAC,CAAC,CAAC9F,EAAE,GAAG8F,iBAAiB,CAAC,CAAC,CAAC,CAACE,EAAE,IAAE,CAAC;UACpE,IAAIC,aAAa,GAAGH,iBAAiB,CAAC,CAAC,CAAC,CAAC9F,EAAE,GAAG8F,iBAAiB,CAAC,CAAC,CAAC,CAACE,EAAE;UACrE,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,iBAAiB,CAAC/H,MAAM,EAAEmI,CAAC,EAAE,EAAE;YAAA,IAAAC,KAAA,EAAAC,KAAA,EAAAC,KAAA,EAAAC,KAAA,EAAAC,KAAA,EAAAC,KAAA;YAC/C,CAAAL,KAAA,GAAApE,GAAG,cAAAoE,KAAA,eAAHA,KAAA,CAAKM,MAAM,CAACX,iBAAiB,CAACI,CAAC,CAAC,CAACF,EAAE,GAACC,aAAa,EAAElD,MAAM,CAAC+C,iBAAiB,CAACI,CAAC,CAAC,CAACQ,EAAE,CAAC,CAAC;YACnF,CAAAN,KAAA,GAAArE,GAAG,cAAAqE,KAAA,eAAHA,KAAA,CAAKO,MAAM,CAAC,CAACb,iBAAiB,CAACI,CAAC,CAAC,CAACF,EAAE,GAAGD,QAAQ,IAAEE,aAAa,EAAElD,MAAM,CAAC+C,iBAAiB,CAACI,CAAC,CAAC,CAACU,GAAG,CAAC,CAAC;YACjG,CAAAP,KAAA,GAAAtE,GAAG,cAAAsE,KAAA,eAAHA,KAAA,CAAKI,MAAM,CAAC,CAACX,iBAAiB,CAACI,CAAC,CAAC,CAACF,EAAE,GAAGD,QAAQ,IAAEE,aAAa,EAAElD,MAAM,CAAC+C,iBAAiB,CAACI,CAAC,CAAC,CAACU,GAAG,CAAC,CAAC;YACjG,CAAAN,KAAA,GAAAvE,GAAG,cAAAuE,KAAA,eAAHA,KAAA,CAAKK,MAAM,CAAC,CAACb,iBAAiB,CAACI,CAAC,CAAC,CAACF,EAAE,GAAGD,QAAQ,GAAC,CAAC,IAAEE,aAAa,EAAElD,MAAM,CAAC+C,iBAAiB,CAACI,CAAC,CAAC,CAACW,GAAG,CAAC,CAAC;YACnG,CAAAN,KAAA,GAAAxE,GAAG,cAAAwE,KAAA,eAAHA,KAAA,CAAKE,MAAM,CAAC,CAACX,iBAAiB,CAACI,CAAC,CAAC,CAACF,EAAE,GAAGD,QAAQ,GAAC,CAAC,IAAEE,aAAa,EAAElD,MAAM,CAAC+C,iBAAiB,CAACI,CAAC,CAAC,CAACW,GAAG,CAAC,CAAC;YACnG,CAAAL,KAAA,GAAAzE,GAAG,cAAAyE,KAAA,eAAHA,KAAA,CAAKG,MAAM,CAACb,iBAAiB,CAACI,CAAC,CAAC,CAAClG,EAAE,GAACiG,aAAa,EAAElD,MAAM,CAAC+C,iBAAiB,CAACI,CAAC,CAAC,CAACY,EAAE,CAAC,CAAC;YACnF,IAAIZ,CAAC,IAAIJ,iBAAiB,CAAC/H,MAAM,GAAG,CAAC,EAAE;cAAA,IAAAgJ,KAAA,EAAAC,MAAA;cACnC,CAAAD,KAAA,GAAAhF,GAAG,cAAAgF,KAAA,eAAHA,KAAA,CAAKN,MAAM,CAACX,iBAAiB,CAACI,CAAC,CAAC,CAAClG,EAAE,GAACiG,aAAa,EAAElD,MAAM,CAAC+C,iBAAiB,CAACI,CAAC,CAAC,CAACY,EAAE,CAAC,CAAC;cACnF,CAAAE,MAAA,GAAAjF,GAAG,cAAAiF,MAAA,eAAHA,MAAA,CAAKL,MAAM,CAACb,iBAAiB,CAACI,CAAC,GAAG,CAAC,CAAC,CAACF,EAAE,GAACC,aAAa,EAAElD,MAAM,CAAC+C,iBAAiB,CAACI,CAAC,GAAG,CAAC,CAAC,CAACQ,EAAE,CAAC,CAAC;;;UAGnG,CAAAjB,MAAA,GAAA1D,GAAG,cAAA0D,MAAA,eAAHA,MAAA,CAAKwB,MAAM,EAAE;UACb;UACA;UACA;UACA;UACA;UACA;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;;;IAKZ;IACA;EACJ;EAEA,eAAeC,OAAOA,CAACtI,KAAa;IAChCsB,UAAU,GAAG,IAAI;IACjB;IACA,MAAMiH,YAAY,GAAGjI,kBAAkB,CAACiI,YAAY;IACpD;IACAjI,kBAAkB,CAACN,KAAK,GAAGA,KAAK;IAChC4F,iBAAiB,EAAE;IAEnB,IAAI2C,YAAY,GAAG,CAAC,IAAIjI,kBAAkB,CAACkI,QAAQ,GAAG,CAAC,EAAE;MACrD;;IAGJ;IACAzF,MAAM,CAACN,KAAK,CAACzC,KAAK,GAAGM,kBAAkB,CAACN,KAAK;IAE7Ce,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC;IACzB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACJ;EAEA,eAAeyH,MAAMA,CAAC1I,SAAwB;IAC1C;IACA,MAAMwI,YAAY,GAAGjI,kBAAkB,CAACiI,YAAY;IACpDjI,kBAAkB,CAACiI,YAAY,GAAG,EAAE,CAAC;IACrC,MAAMvI,KAAK,GAAGM,kBAAkB,CAACN,KAAK;IACtCM,kBAAkB,CAACP,SAAS,CAAC,CAAC,CAAC,GAAGA,SAAS,CAAC,CAAC,CAAC;IAC9CO,kBAAkB,CAACP,SAAS,CAAC,CAAC,CAAC,GAAGA,SAAS,CAAC,CAAC,CAAC;IAC9C,IAAIwI,YAAY,GAAG,CAAC,IAAIjI,kBAAkB,CAACkI,QAAQ,GAAG,CAAC,EAAE;MACrD;;IAGJ,MAAME,aAAa,GAAG,CAAC,IAAI/F,IAAI,CAACgG,IAAI,CAAChG,IAAI,CAACiG,IAAI,CAAC5I,KAAK,CAAC,CAAC;IACtDe,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC;IACzB,IAAI6H,IAAI,GAAG,MAAM;IACjB,IAAIhJ,IAAI,GAAG,EAAE;IACb,IAAIiJ,QAAQ,GAAG,CAAC;IAChB,IAAIC,UAAU,GAAG,CAAC;IAClB,IAAIhC,KAAK,GAAGzG,kBAAkB,CAACyG,KAAK;IACpC,MAAMiC,WAAW,GAAG,gCAAgCjC,KAAK,CAAC,CAAC,CAAC,sBAAsBA,KAAK,CAAC,CAAC,CAAC,WAAWA,KAAK,CAAC,CAAC,CAAC,SAAS8B,IAAI,UAAUvI,kBAAkB,CAACN,KAAK,WAAWM,kBAAkB,CAACkC,MAAM,cAAclC,kBAAkB,CAACP,SAAS,CAAC,CAAC,CAAC,YAAYO,kBAAkB,CAACP,SAAS,CAAC,CAAC,CAAC,kBAAkBF,IAAI,eAAekH,KAAK,CAAC,CAAC,CAAC,aAAa+B,QAAQ,eAAeC,UAAU,EAAE;IACrX,MAAME,WAAW,GAAG,MAAMzJ,GAAG,CAACwJ,WAAW,CAAC;IAC1C1I,kBAAkB,CAACa,WAAW,GAAG8H,WAAW;IAC5C3C,IAAI,EAAE;EACV;EAGA;EACA,eAAejB,OAAOA,CAAC;IAAE6D;EAAS,CAAE;IAChC,IAAI,CAAC7H,MAAM,EAAE;MACTA,MAAM,GAAG,IAAI;MACb;;IAEJ,IAAIC,UAAU,EAAE;MACZC,WAAW,GAAG,KAAK;MACnB;;IAEJ,IAAIA,WAAW,EAAE;MACbA,WAAW,GAAG,KAAK;MACnB;;IAEJ,MAAMxB,SAAS,GAAG,CAAC4C,IAAI,CAAC8D,KAAK,CAACnC,QAAQ,CAAC4E,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEvG,IAAI,CAAC8D,KAAK,CAACnC,QAAQ,CAAC4E,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC1F,IAAInJ,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;MAClBA,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC;;IAEpB,IAAIA,SAAS,CAAC,CAAC,CAAC,GAAGkB,cAAc,CAAC,CAAC,CAAC,EAAE;MAClClB,SAAS,CAAC,CAAC,CAAC,GAAGkB,cAAc,CAAC,CAAC,CAAC;;IAEpC,MAAMkI,SAAS,GAAG,IAAIxJ,eAAe,CAAC,MAAM,CAAC;IAC7CwJ,SAAS,CAAChJ,SAAS,CAACG,kBAAkB,CAACP,SAAS,EAAEO,kBAAkB,CAACN,KAAK,EAAEM,kBAAkB,CAACiI,YAAY,CAAC;IAC5GnI,gBAAgB,CAACgJ,IAAI,CAACD,SAAS,CAAC;IAChCV,MAAM,CAAC,CAAC1I,SAAS,CAAC,CAAC,CAAC,EAAEA,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;EACxC;EAEA,IAAIsJ,YAAY,GAA0B,EAAE;EAE5C;EACA,SAASjE,cAAcA,CAAC;IAAE8D;EAAS,CAAE;IACjC,IAAIA,SAAS,KAAK,IAAI,EAAE;MACpB;;IAEJ,MAAMI,OAAO,GAAG,EAAE;IAClB,KAAK,IAAIpK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoB,kBAAkB,CAACa,WAAW,CAAChC,MAAM,EAAED,CAAC,EAAE,EAAE;MAC5DoK,OAAO,CAACF,IAAI,CAAC9I,kBAAkB,CAACqG,MAAM,CAACzH,CAAC,CAAC,CAAC;;IAE9C;IACA,MAAMqK,gBAAgB,GAAG,IAAIrF,IAAI,EAAE,CAACsF,OAAO,EAAE;IAC7C,MAAML,SAAS,GAAG,IAAIxJ,eAAe,CAAC,SAAS,CAAC;IAChDwJ,SAAS,CAACjJ,WAAW,CAACoJ,OAAO,CAAC;IAC9BlJ,gBAAgB,CAACgJ,IAAI,CAACD,SAAS,CAAC;IAChC;IACA,MAAM1H,MAAM,GAAGyH,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE;IACnC,MAAMO,IAAI,GAAGP,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE;IACjC;IACA;IACA,MAAMQ,KAAK,GAAGR,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE;IAClC,MAAMS,KAAK,GAAGT,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE;IAClC,MAAMU,IAAI,GAAGzF,MAAM,CAAC0F,MAAM,CAACH,KAAK,CAAC;IACjC,MAAMI,IAAI,GAAG3F,MAAM,CAAC0F,MAAM,CAACF,KAAK,CAAC;IACjC,MAAMI,cAAc,GAAGzJ,kBAAkB,CAACa,WAAW;IAErD,KAAK,IAAIjC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG6K,cAAc,CAAC5K,MAAM,EAAED,CAAC,EAAE,EAAE;MAC5C,IAAI8K,QAAQ,GAAG1J,kBAAkB,CAACqG,MAAM,CAACzH,CAAC,CAAC;MAC3C,KAAK,IAAIoI,CAAC,GAAG3E,IAAI,CAAC8D,KAAK,CAAChF,MAAM,CAAC,EAAE6F,CAAC,IAAI3E,IAAI,CAAC8D,KAAK,CAACgD,IAAI,CAAC,EAAEnC,CAAC,EAAE,EAAE;QACzD0C,QAAQ,GAAGA,QAAQ,IAAKD,cAAc,CAAC7K,CAAC,CAAC,CAACoI,CAAC,CAAC,CAACU,GAAG,IAAI4B,IAAI,IAAIG,cAAc,CAAC7K,CAAC,CAAC,CAACoI,CAAC,CAAC,CAACW,GAAG,IAAI6B,IAAK;;MAEjGxJ,kBAAkB,CAACqG,MAAM,CAACzH,CAAC,CAAC,GAAG,KAAK;MACpC,IAAI8K,QAAQ,EAAE;QACV1J,kBAAkB,CAACqG,MAAM,CAACzH,CAAC,CAAC,GAAG,IAAI;QACnC;;MAEJ;;IAEJ,IAAI+K,IAAI,GAAGC,QAAQ;IACnB,IAAIC,IAAI,GAAG,CAACD,QAAQ;IACpB,KAAK,IAAIhL,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG6K,cAAc,CAAC5K,MAAM,EAAED,CAAC,EAAE,EAAE;MAC5C,IAAIoB,kBAAkB,CAACqG,MAAM,CAACzH,CAAC,CAAC,EAAE;QAC9B,KAAK,IAAIoI,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAIyC,cAAc,CAAC7K,CAAC,CAAC,CAACC,MAAM,EAAEmI,CAAC,EAAE,EAAE;UAChD2C,IAAI,GAAGtH,IAAI,CAACqF,GAAG,CAACiC,IAAI,EAAEF,cAAc,CAAC7K,CAAC,CAAC,CAACoI,CAAC,CAAC,GAAGyC,cAAc,CAAC7K,CAAC,CAAC,CAACoI,CAAC,CAAC,CAAC8C,MAAM,CAAC,CAAC,CAAC,GAAGH,IAAI,CAAC;UAEnFE,IAAI,GAAGxH,IAAI,CAACsF,GAAG,CAACkC,IAAI,EAAEJ,cAAc,CAAC7K,CAAC,CAAC,CAACoI,CAAC,CAAC,GAAGyC,cAAc,CAAC7K,CAAC,CAAC,CAACoI,CAAC,CAAC,CAAC8C,MAAM,CAAC,CAAC,CAAC,GAAGD,IAAI,CAAC;;;;IAI/F;IACA;IACA7D,IAAI,EAAE;IACN;EACJ;EACA,IAAI+D,WAAW,GAAG,KAAK;EACvB,IAAIC,YAAY,GAAG,CAAC;EACpB,MAAMC,QAAQ,GAAGnI,GAAG,CACfE,MAAM,CAAC,MAAM,CAAC,CACdC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CACZA,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CACZA,IAAI,CAAC,QAAQ,EAAEjC,kBAAkB,CAACkC,MAAM,GAAGT,MAAM,CAACC,GAAG,GAAGD,MAAM,CAACE,MAAM,CAAC,CACtEM,IAAI,CAAC,OAAO,EAAEjC,kBAAkB,CAACN,KAAK,GAAG+B,MAAM,CAACG,IAAI,GAAGH,MAAM,CAACI,KAAK,CAAC,CACpEI,IAAI,CAAC,QAAQ,EAAE,OAAO,CAAC,CACvBA,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,CACvBA,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CACpB4C,EAAE,CAAC,WAAW,EAAE,MAAK;IAClB1E,QAAQ,CAAC+J,IAAI,CAAC/H,KAAK,CAACgI,MAAM,GAAG,WAAW;IACxCJ,WAAW,GAAG,IAAI;EACtB,CAAC,CAAC,CACDlF,EAAE,CAAC,WAAW,EAAGuF,CAAC,IAAI;IACnB,IAAIL,WAAW,EAAE;MACbC,YAAY,GAAGI,CAAC,CAAC/I,OAAO;MACxBH,eAAe,CAACK,WAAW,GAAG,IAAI;;EAE1C,CAAC,CAAC,CACDsD,EAAE,CAAC,SAAS,EAAE,MAAK;IAChBpE,OAAO,CAACC,GAAG,EAAE;IACb,KAAK,IAAI9B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,EAAE,EAAEA,CAAC,EAAE,EAAE;MACzBoB,kBAAkB,CAACqG,MAAM,CAACzH,CAAC,CAAC,GAAG,IAAI;;EAE3C,CAAC,CAAC,CACDiG,EAAE,CAAC,WAAW,EAAGuF,CAAC,IAAI;IACnB,IAAIlJ,eAAe,CAACK,WAAW,EAAE;MAC7BO,GAAG,CAACG,IAAI,CAAC,OAAO,EAAEjC,kBAAkB,CAACN,KAAK,GAAG+B,MAAM,CAACI,KAAK,GAAGJ,MAAM,CAACG,IAAI,IAAIwI,CAAC,CAAC/I,OAAO,GAAG2I,YAAY,CAAC,CAAC;MACrGC,QAAQ,CAAChI,IAAI,CAAC,OAAO,EAAEjC,kBAAkB,CAACN,KAAK,GAAG+B,MAAM,CAACI,KAAK,GAAGJ,MAAM,CAACG,IAAI,IAAIwI,CAAC,CAAC/I,OAAO,GAAG2I,YAAY,CAAC,CAAC;;EAElH,CAAC,CAAC,CACDnF,EAAE,CAAC,YAAY,EAAE,MAAK;IACnB,IAAI,CAAC3D,eAAe,CAACK,WAAW,EAAE;MAC9BpB,QAAQ,CAAC+J,IAAI,CAAC/H,KAAK,CAACgI,MAAM,GAAG,SAAS;;IAE1C,KAAK,IAAIvL,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,EAAE,EAAEA,CAAC,EAAE,EAAE;MACzBoB,kBAAkB,CAACqG,MAAM,CAACzH,CAAC,CAAC,GAAG,IAAI;;EAE3C,CAAC,CAAC;EAENuB,QAAQ,CACHC,cAAc,CAAC,mBAAmB,CAAE,CACpCiK,gBAAgB,CAAC,WAAW,EAAGD,CAAC,IAAI;IACjC,IAAIlJ,eAAe,CAACK,WAAW,EAAE;MAC7BO,GAAG,CAACG,IAAI,CAAC,OAAO,EAAEjC,kBAAkB,CAACN,KAAK,GAAG+B,MAAM,CAACI,KAAK,GAAGJ,MAAM,CAACG,IAAI,IAAIwI,CAAC,CAAC/I,OAAO,GAAG2I,YAAY,CAAC,CAAC;MACrGC,QAAQ,CAAChI,IAAI,CAAC,OAAO,EAAEjC,kBAAkB,CAACN,KAAK,GAAG+B,MAAM,CAACI,KAAK,GAAGJ,MAAM,CAACG,IAAI,IAAIwI,CAAC,CAAC/I,OAAO,GAAG2I,YAAY,CAAC,CAAC;;EAElH,CAAC,CAAC;EAEN7J,QAAQ,CACHC,cAAc,CAAC,mBAAmB,CAAE,CACpCiK,gBAAgB,CAAC,SAAS,EAAGD,CAAC,IAAI;IAC/B,IAAIlJ,eAAe,CAACK,WAAW,EAAE;MAC7BL,eAAe,CAACK,WAAW,GAAG,KAAK;MACnCwI,WAAW,GAAG,KAAK;MACnB5J,QAAQ,CAAC+J,IAAI,CAAC/H,KAAK,CAACgI,MAAM,GAAG,SAAS;MACtC,IAAIG,QAAQ,GAAGtK,kBAAkB,CAACN,KAAK;MACvCM,kBAAkB,CAACN,KAAK,GAAGM,kBAAkB,CAACN,KAAK,IAAI0K,CAAC,CAAC/I,OAAO,GAAG2I,YAAY,CAAC;MAChF,IAAIhK,kBAAkB,CAACN,KAAK,KAAK4K,QAAQ,EAAE;QACvC;;MAEJ,MAAMzB,SAAS,GAAG,IAAIxJ,eAAe,CAAC,QAAQ,CAAC;MAC/CwJ,SAAS,CAAChJ,SAAS,CAACG,kBAAkB,CAACP,SAAS,EAAEO,kBAAkB,CAACN,KAAK,EAAEM,kBAAkB,CAACiI,YAAY,CAAC;MAC5GnI,gBAAgB,CAACgJ,IAAI,CAACD,SAAS,CAAC;MAChCb,OAAO,CAAChI,kBAAkB,CAACN,KAAK,CAAC;;IAErC,KAAK,IAAId,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,EAAE,EAAEA,CAAC,EAAE,EAAE;MACzBoB,kBAAkB,CAACqG,MAAM,CAACzH,CAAC,CAAC,GAAG,IAAI;;EAE3C,CAAC,CAAC;EACNkD,GAAG,CAAC+C,EAAE,CAAC,aAAa,EAAGuF,CAAC,IAAI;IAExB,IAAItK,gBAAgB,CAACjB,MAAM,GAAG,CAAC,EAAE;MAC7B,MAAMgK,SAAS,GAAG/I,gBAAgB,CAACyK,GAAG,EAAE;MAExC,IAAI,CAAA1B,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEtJ,IAAI,MAAK,SAAS,EAAE;QAC/B,MAAMiL,QAAQ,GAAG3B,SAAS,CAACrJ,QAAQ;QACnC,KAAK,IAAIZ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoB,kBAAkB,CAACa,WAAW,CAAChC,MAAM,EAAED,CAAC,EAAE,EAAE;UAC5DoB,kBAAkB,CAACqG,MAAM,CAACzH,CAAC,CAAC,GAAG4L,QAAS,CAAC5L,CAAC,CAAC;;QAE/CoH,IAAI,EAAE;OACT,MAAM,IAAI,CAAA6C,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEtJ,IAAI,MAAK,QAAQ,EAAE;QAErCyI,OAAO,CAACa,SAAS,CAACnJ,KAAK,CAAC;OAC3B,MAAM,IAAI,CAAAmJ,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEtJ,IAAI,MAAK,MAAM,EAAE;QACnC0B,WAAW,GAAG,IAAI;QAClBkH,MAAM,CAACU,SAAS,CAACpJ,SAAS,CAAC;;;IAGnC2K,CAAC,CAACK,cAAc,EAAE;IAClBL,CAAC,CAACM,eAAe,EAAE;EACvB,CAAC,CAAC;EAGF,IAAI9L,CAAC,GAAG,CAAC;EACT6D,MAAM,CAAC4H,gBAAgB,CAAC,OAAO,EAAGD,CAAC,IAAI;IACnC3J,OAAO,CAACC,GAAG,CAAC,CAAC,CAAC;EAClB,CAAC,CAAC;EACFsF,IAAI,EAAE;AACV;AAEA,SAAS2E,aAAaA,CAAC3K,kBAAsC;EACzD,IAAI0H,GAAG,GAAGkC,QAAQ;EAClB,IAAIjC,GAAG,GAAG,CAACiC,QAAQ;EACnB;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACAlC,GAAG,GAAG,CAAC,IAAI,EAAEC,GAAG,GAAG,IAAI;EACvB,OAAO;IACHD,GAAG;IACHC;GACH;AACL;AAEA,SAASiD,OAAOA,CAACnI,MAAW;EACxB,MAAMoI,MAAM,GAAGpI,MAAM,CAACqI,SAAS,CAAC,aAAa,CAAC;EAC9C,MAAMC,MAAM,GAAG5K,QAAQ,CAACuC,aAAa,CAAC,GAAG,CAAC;EAC1CqI,MAAM,CAACC,QAAQ,GAAG,cAAc;EAChCD,MAAM,CAACE,IAAI,GAAGJ,MAAM;EACpBE,MAAM,CAACG,OAAO,CAACC,WAAW,GAAG,CAAC,aAAa,EAAEJ,MAAM,CAACC,QAAQ,EAAED,MAAM,CAACE,IAAI,CAAC,CAACG,IAAI,CAAC,GAAG,CAAC;EACpFjL,QAAQ,CAAC+J,IAAI,CAACtH,WAAW,CAACmI,MAAM,CAAC;EACjCA,MAAM,CAACM,KAAK,EAAE;EACdlL,QAAQ,CAAC+J,IAAI,CAACoB,WAAW,CAACP,MAAM,CAAC;AACrC;AAGQ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]}]}